var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{h(n.next(e))}catch(t){r(t)}}function a(e){try{h(n["throw"](e))}catch(t){r(t)}}function h(e){e.done?s(e.value):new i(function(t){t(e.value)}).then(o,a)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(n){i=[6,n],r=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,o,a,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},BaseClass=function(){function e(){}return e.getInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this;if(!i._instance){var n=e.length;0==n?i._instance=new i:1==n?i._instance=new i(e[0]):2==n?i._instance=new i(e[0],e[1]):3==n?i._instance=new i(e[0],e[1],e[2]):4==n?i._instance=new i(e[0],e[1],e[2],e[3]):5==n&&(i._instance=new i(e[0],e[1],e[2],e[3],e[4]))}return i._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var GameUser=function(){function e(){this.id=0,this.name="",this.avatar="http://pic.vszone.cn/upload/avatar/1464079970.png",this.token="",this.pValue=0,this.tableID=0,this.isOwner=!1,this.curAvatarType=1,this.ownerId=0,this.maxScore=0}return e}();__reflect(GameUser.prototype,"GameUser");var BaseSound=function(){function e(){this._cache={},this._loadingCache=new Array,App.TimerManager.doTimer(6e4,0,this.dealSoundTimer,this)}return e.prototype.dealSoundTimer=function(){for(var e=egret.getTimer(),t=Object.keys(this._cache),i=0,n=t.length;n>i;i++){var s=t[i];this.checkCanClear(s)&&e-this._cache[s]>=SoundManager.CLEAR_TIME&&(delete this._cache[s],RES.destroyRes(s))}},e.prototype.getSound=function(e){var t=RES.getRes(e);if(t)this._cache[e]&&(this._cache[e]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(e))return null;this._loadingCache.push(e),RES.getResAsync(e,this.onResourceLoadComplete,this)}return t},e.prototype.onResourceLoadComplete=function(e,t){var i=this._loadingCache.indexOf(t);-1!=i&&(this._loadingCache.splice(i,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e}();__reflect(BaseSound.prototype,"BaseSound");var qr;!function(e){var t=function(){function e(){}return e.PATTERN000=0,e.PATTERN001=1,e.PATTERN010=2,e.PATTERN011=3,e.PATTERN100=4,e.PATTERN101=5,e.PATTERN110=6,e.PATTERN111=7,e}();e.QRMaskPattern=t,__reflect(t.prototype,"qr.QRMaskPattern")}(qr||(qr={}));var Loading=function(e){function t(t,i){var n=e.call(this)||this;return n.logoUrl="resource/assets/loading_logo.png",n.isShow=!1,n.createView(t,i),n}return __extends(t,e),t.prototype.createView=function(e,t){this.w=e,this.h=t,this.textField=new egret.TextField,this.textField.y=this.h/2,this.textField.textColor=13421772,this.textField.size=46,this.textField.width=this.w,this.textField.height=100,this.textField.fontFamily="Black",this.textField.textAlign="center",this.textField.text="登录中…",this.textField_power=new egret.TextField,this.textField_power.text=".",this.textField_power.textColor=13421772,this.textField_power.size=80,this.textField_power.fontFamily="White",this.textField_power.textAlign="center",this.textField_power.x=.5*this.w,this.textField_power.y=.8*this.h,egret.Tween.get(this.textField_power,{loop:!0}).to({rotation:360},800,egret.Ease.cubicIn).play();var i=new egret.Shape;i.width=this.w,i.height=this.h,i.x=(this.w-i.width)/2,i.y=(this.h-i.height)/2,i.graphics.beginFill(3355443,.8),i.graphics.drawRect(0,0,this.w,this.h),i.graphics.endFill(),this.addChild(i),this.addChild(this.textField),this.addChild(this.textField_power),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this)},t.prototype.setProgress=function(e,t){var i=Math.floor(e/t*100);this.textField.text="加载中…"+i+"%"},t.create=function(e){var i=new t(e.width,e.height);return i.context=e,i},t.prototype.show=function(){this.isShow||(this.isShow=!0,this.context.addChild(this))},t.prototype.close=function(){this.isShow&&(this.isShow=!1,this.context.removeChild(this))},t.prototype.reconnect=function(){var e=new eui.Button;e.x=this.stage.stageWidth/2,e.y=this.stage.stageHeight/3*2,this.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSceneView._gameScene.login()},this)},t}(egret.Sprite);__reflect(Loading.prototype,"Loading");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.loadBG=AssetManager.getBitmap("loadBG_jpg",!1,!1),(App.GameHeight>this.loadBG.height||App.GameHeight<this.loadBG.height)&&(this.loadBG.height=App.GameHeight,this.loadBG.anchorOffsetY=this.loadBG.height/2,this.loadBG.y=App.GameHeight/2),this.addChild(this.loadBG),this.numText=new egret.BitmapText;var e=RES.getRes("num_fnt");this.numText.font=e,this.numText.text="0%",this.numText.x=this.loadBG.width/2-this.numText.width/2,this.numText.y=this.loadBG.height/2+200,this.addChild(this.numText),this.loadDb=this.createLoadingDB(),this.loadDb.x=this.loadBG.width/2,this.loadDb.y=this.loadBG.height/2,this.addChild(this.loadDb)},t.prototype.createLoadingDB=function(){var e,t=RES.getRes("loading_ske_json"),i=RES.getRes("loading_tex_json"),n=RES.getRes("loading_tex_png");return t&&i&&n&&(AssetManager.loadDBAnimation(["loading"]),e=AssetManager.getDBArmature("loading"),e.scaleX=e.scaleY=2,e.play("newAnimation",0)),e},t.prototype.onProgress=function(e,t){this.numText.text=Math.ceil(e/t*100).toString()+"%","100%"==this.numText.text&&this.loadDb.dispose()},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Lobby=function(e){function t(){var t=e.call(this)||this;return t.gp_bg_Rect=160,t.i=0,egret.ExternalInterface.call("sendToNative","lobbyCanclick"),t.skinName="resource/mySkins/Lobby.exml",t.onFullscreen(),t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),"runtime2"==GameData.runtimeType?t.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(t.KeyBoardMethod,t),t}return __extends(t,e),t.prototype.init=function(){this.selected.getChildAt(0).visible=!0,this.len=this.selected.numChildren},t.prototype.KeyBoardMethod=function(e){if(39==e.keyCode){for(this.i;this.i<this.len;this.i++)if(this.selected.getChildAt(this.i).visible=!0){this.selected.getChildAt(this.i).visible=!1,this.i!=this.len-1?(this.selected.getChildAt(this.i+1).visible=!0,this.i=this.i+1):(this.selected.getChildAt(0).visible=!0,this.i=0);break}}else if(37==e.keyCode){for(this.i;this.i<this.len;this.i++)if(this.selected.getChildAt(this.i).visible=!0){this.selected.getChildAt(this.i).visible=!1,0!=this.i?(this.selected.getChildAt(this.i-1).visible=!0,this.i=this.i-1):(this.selected.getChildAt(2).visible=!0,this.i=2);break}}else if(13==e.keyCode)switch(this.i){case 0:GameSceneView._gameScene.match(0),this.removePckey();break;case 1:GameSceneView._gameScene.match(1),this.removePckey(),this.i=0;break;case 2:GameSceneView._gameScene.match(2),this.removePckey(),this.i=0}},t.prototype.KeyBoardMethodRuntime=function(){var e=this;egret.ExternalInterface.addCallback("sendToJS",function(t){if("right"==t){for(e.i;e.i<e.len;e.i++)if(e.selected.getChildAt(e.i).visible=!0){e.selected.getChildAt(e.i).visible=!1,e.i!=e.len-1?(e.selected.getChildAt(e.i+1).visible=!0,e.i=e.i+1):(e.selected.getChildAt(0).visible=!0,e.i=0);break}}else if("left"==t){for(e.i;e.i<e.len;e.i++)if(e.selected.getChildAt(e.i).visible=!0){e.selected.getChildAt(e.i).visible=!1,0!=e.i?(e.selected.getChildAt(e.i-1).visible=!0,e.i=e.i-1):(e.selected.getChildAt(2).visible=!0,e.i=2);break}}else if("OK"==t)switch(e.i){case 0:GameSceneView._gameScene.match(0);break;case 1:GameSceneView._gameScene.match(1),e.i=0;break;case 2:GameSceneView._gameScene.match(2),e.i=0}})},t.prototype.removePckey=function(){PcKeyBoardHelper.instance.removeListener(this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.height=this.stage.stageHeight,this.initView()},t.prototype.initView=function(){var e=this;this.group.getChildAt(0).addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.showSelected(0),GameSceneView._gameScene.match(0),e.removePckey()},this),this.group.getChildAt(1).addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.showSelected(1),GameSceneView._gameScene.match(1),e.removePckey()},this),this.group.getChildAt(2).addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.showSelected(2),GameSceneView._gameScene.match(2),e.removePckey()},this)},t.prototype.showSelected=function(e){for(var t=0;t<this.selected.numChildren;t++)this.selected.getChildAt(t).visible=t==e},t.prototype.onFullscreen=function(){if(!(this.gp_bg.numChildren>0))for(var e=Math.ceil(App.GameWidth/this.gp_bg_Rect),t=Math.ceil(App.GameHeight/this.gp_bg_Rect),i=0;e>i;++i)for(var n=0;t>n;++n){var s=new eui.Image;s.source="bg_round_png",this.gp_bg.addChild(s),s.x=i*this.gp_bg_Rect,s.y=n*this.gp_bg_Rect}},t.canClick=!0,t}(eui.Component);__reflect(Lobby.prototype,"Lobby",["eui.UIComponent","egret.DisplayObject"]);var Login=function(e){function t(){var t=e.call(this)||this;return t.gp_bg_Rect=160,t.addMsResponseListen(),t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){this.height=this.stage.stageHeight,e.prototype.childrenCreated.call(this),this.loading=Loading.create(this),this.onFullscreen(),this.Init()},t.prototype.Init=function(){this.loading.show(),this.CheckSaoMa();mvs.MsEngine.getInstance.init(GameData.CHANNEL,GameData.DEFAULT_ENV,GameData.gameID)},t.prototype.CheckSaoMa=function(){var e=window.location.href,t=e.split("?",20);GameData.roomID=t[1],t.length>1&&(GameData.isSaoMaEnter=!0)},t.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_INIT_RSP,this.initResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_REGISTERUSER_RSP,this.registerUserResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this)},t.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_INIT_RSP,this.initResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_REGISTERUSER_RSP,this.registerUserResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this)},t.prototype.initResponse=function(e){200==e.data.status&&mvs.MsEngine.getInstance.registerUser()},t.prototype.registerUserResponse=function(e){var t=e.data;GameData.gameUser.id=t.id,GameData.gameUser.name=t.name,GameData.gameUser.avatar=t.avatar,GameData.gameUser.token=t.token,0==t.status&&mvs.MsEngine.getInstance.login(t.id,t.token,GameData.gameID,GameData.appkey,GameData.secretKey)},t.prototype.loginResponse=function(e){var t=this;mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this);var i=e.data;200!=i.status||("0"!==i.roomID?(GameData.roomID=i.roomID,GameSceneView._gameScene.reconnectView()):setTimeout(function(){t.loading.close(),0==GameData.isSaoMaEnter?GameSceneView._gameScene.lobby():GameSceneView._gameScene.match(4)},500))},t.prototype.onFullscreen=function(){if(!(this.gp_bg.numChildren>0))for(var e=Math.ceil(App.GameWidth/this.gp_bg_Rect),t=Math.ceil(App.GameHeight/this.gp_bg_Rect),i=0;e>i;++i)for(var n=0;t>n;++n){var s=new eui.Image;s.source="bg_round_png",this.gp_bg.addChild(s),s.x=i*this.gp_bg_Rect,s.y=n*this.gp_bg_Rect}},t}(eui.Component);__reflect(Login.prototype,"Login",["eui.UIComponent","egret.DisplayObject"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("loading")];case 2:return i.sent(),e=new LoadingUI,this.stage.addChild(e),[4,this.loadTheme()];case 3:return i.sent(),"iOS"==egret.Capabilities.os?(RES.createGroup("preloadAndSound",["lobby","mp3"]),App.isIOS=!0,App.BG_FROG="bg_frog_mp3",App.TIME_COMMON="time_common_mp3",App.TIME_LAST="time_last_mp3",App.JUMP_SUCCESS="jump_success_mp3",App.READYGO="readyGo_mp3",App.WIN="win_mp3",App.LOSE="lose_mp3"):(RES.createGroup("preloadAndSound",["lobby","ogg"]),App.isIOS=!1),[4,RES.loadGroup("preloadAndSound",0,e)];case 4:return i.sent(),[4,this.onResourceLoadComplete()];case 5:return i.sent(),this.stage.removeChild(e),[3,7];case 6:return t=i.sent(),console.error(t),[3,7];case 7:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.onResourceLoadComplete=function(){var e=RES.getRes("dbConfig_json");AssetManager.loadDBAnimation(e.db[0])},t.prototype.createGameScene=function(){GameData.runtimeType=egret.Capabilities.runtimeType,LocalStore_Clear(),this._scene=new GameSceneView,this._scene.graphics.beginFill(0),this._scene.graphics.drawRect(this.x,this.y,this.width,this.height),this._scene.graphics.endFill(),this.addChild(this._scene)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var match=function(e){function t(i){var n=e.call(this)||this;return n.gp_bg_Rect=160,n._isInRoom=!1,n.isOwner=!1,n.canStartGame=!1,n._roomID="",n.default_name="待加入",n.default_rect_color=5592405,n.isOnePlayAgain=!0,n.curSelect=1,n.canRigLef=!1,n.num=0,n.isRoomOwnerDuankai=!1,n.skinName="resource/mySkins/match.exml",t.joinFlag=i,App.CurrGameIsAi=!1,egret.ExternalInterface.call("sendToNative","matchCanclick"),n}return __extends(t,e),t.prototype.showBtn=function(){2==t.joinFlag||3==t.joinFlag?(this.btn_start.visible=!0,this.group_selected.visible=!0,this.wenxintishi.visible=!0,this.wenxintishi.y+this.wenxintishi.height>this.group_btns.y&&(this.group_btns.y=this.wenxintishi.y+this.wenxintishi.height,this.group_selected.y=this.wenxintishi.y+this.wenxintishi.height)):(this.btn_leave.x=this.group_btns.width/2,this.group_selected.getChildAt(0).x=this.btn_leave.x,this.btn_start.visible=!1),"runtime2"==GameData.runtimeType?this.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(this.KeyBoardMethod,this)},t.prototype.KeyBoardMethod=function(e){if(0==t.joinFlag||1==t.joinFlag)40==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode?(this.group_selected.getChildAt(0).visible=!0,this.canRigLef=!0):this.canRigLef&&13==e.keyCode&&(this.mbuttonLeaveRoom(),PcKeyBoardHelper.instance.removeListener(this));else if((2==t.joinFlag||3==t.joinFlag)&&((40==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode)&&(this.group_selected.getChildAt(this.curSelect).visible=!0,this.canRigLef=!0),this.canRigLef&&37==e.keyCode&&(this.group_selected.getChildAt(this.curSelect).visible=!1,this.curSelect=0==this.curSelect?1:0,this.group_selected.getChildAt(this.curSelect).visible=!0),this.canRigLef&&39==e.keyCode&&(this.group_selected.getChildAt(this.curSelect).visible=!1,this.curSelect=1==this.curSelect?0:1,this.group_selected.getChildAt(this.curSelect).visible=!0),this.canRigLef&&13==e.keyCode))switch(this.curSelect){case 0:this.curSelect=1,this.mbuttonLeaveRoom(),this.removePCkey();break;case 1:this.canStartGame&&(this.StartGame(),this.curSelect=1,this.removePCkey())}},t.prototype.KeyBoardMethodRuntime=function(){var e=this;egret.ExternalInterface.addCallback("sendToJS",function(i){if(0==t.joinFlag||1==t.joinFlag)"left"==i||"right"==i||"down"==i||"up"==i?(e.group_selected.getChildAt(0).visible=!0,e.canRigLef=!0):e.canRigLef&&"OK"==i&&(e.mbuttonLeaveRoom(),PcKeyBoardHelper.instance.removeListener(e));else if((2==t.joinFlag||3==t.joinFlag)&&(("left"==i||"right"==i||"down"==i||"up"==i)&&(e.group_selected.getChildAt(e.curSelect).visible=!0,e.canRigLef=!0),e.canRigLef&&"left"==i&&(e.group_selected.getChildAt(e.curSelect).visible=!1,e.curSelect=0==e.curSelect?1:0,e.group_selected.getChildAt(e.curSelect).visible=!0),e.canRigLef&&"right"==i&&(e.group_selected.getChildAt(e.curSelect).visible=!1,e.curSelect=1==e.curSelect?0:1,e.group_selected.getChildAt(e.curSelect).visible=!0),e.canRigLef&&"OK"==i))switch(e.curSelect){case 0:e.curSelect=1,e.mbuttonLeaveRoom();break;case 1:e.canStartGame&&(e.wenxintishi.visible=!1,e.StartGame(),e.curSelect=1)}})},t.prototype.removePCkey=function(){PcKeyBoardHelper.instance.removeListener(this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.onFullscreen();for(var i=GameData._playerList.length,n=0;i>n;n++)this.delPlayerList(GameData._playerList[0].id);switch(mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_GETROOMDETAIL_RSP,this.getroomDetails,this),t.joinFlag){case 0:this.joinRandRoom();break;case 1:var s={name:"paiwei",score:"score"};this.joinRoomWithPro(s);break;case 2:this.createRoom();break;case 3:GameData.roomID&&mvs.MsEngine.getInstance.getRoomDetail(GameData.roomID);break;case 4:this.joinWithRoomID(GameData.roomID)}this.initView(),this.btn_leave.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonLeaveRoom,this)},t.prototype.initView=function(){var e=this;this.player1LoadingMask.width=0,this.player2LoadingMask.width=0,this.player1Loading.mask=this.player1LoadingMask,this.player2Loading.mask=this.player2LoadingMask,this.pipeiIng_img.width=this.playerbg1_group.width,this.pipeiIng_img.height=this.playerbg1_group.height,this.StageH=this.stage.stageHeight,this.StageW=this.stage.stageWidth,this.height=this.StageH,this.vX=this.v.x,this.sX=this.s.x,this.v.x=0-this.width,this.s.x=this.width+this.s.width,this.showBtn(),this.addMsResponseListen(),this.strTXT=this.txt.text;var t=0;this.set=setInterval(function(){e.txt.text=e.strTXT.substring(0,t),t++,4==t&&(t=0)},350)},t.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINROOM_RSP,this.joinRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINROOM_NTFY,this.joinRoomNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOVER_NTFY,this.joinOverNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOVER_RSP,this.joinOverResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOPEN_RSP,this.joinOpenResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOPEN_NTFY,this.joinOpenNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_NTFY,this.leaveRoomNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_CREATEROOM_RSP,this.createRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_KICKPLAYER_RSP,this.kickPlayerResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_KICKPLAYER_NTFY,this.kickPlayerNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_RSP,this.setRoomPropertyResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_NTFY,this.setRoomPropertynotify,this)},t.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINROOM_RSP,this.joinRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINROOM_NTFY,this.joinRoomNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOVER_NTFY,this.joinOverNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOVER_RSP,this.joinOverResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOPEN_RSP,this.joinOpenResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOPEN_NTFY,this.joinOpenNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_NTFY,this.leaveRoomNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_CREATEROOM_RSP,this.createRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_KICKPLAYER_RSP,this.kickPlayerResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_KICKPLAYER_NTFY,this.kickPlayerNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_RSP,this.setRoomPropertyResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_NTFY,this.setRoomPropertynotify,this)},t.prototype.getroomDetails=function(e){console.log(e.data.owner),GameData.gameUser.id==e.data.owner?GameData.isRoomOwner=!0:GameData.isRoomOwner=!1;for(var t=0;t<e.data.userInfos.length;t++){var i=JSON.parse(e.data.userInfos[t].userProfile);2==e.data.userInfos.length&&2!=GameData._playerList.length?e.data.userInfos[t].userID==GameData.gameUser.id?this.addPlayerList(e.data.userInfos[t].userID,i.name,i.avatar,1,i.curAvatarType,GameData.isRoomOwner):this.addPlayerList(e.data.userInfos[t].userID,i.name,i.avatar,2,i.curAvatarType,GameData.isRoomOwner):1==e.data.userInfos.length&&1!=GameData._playerList.length&&this.addPlayerList(e.data.userInfos[t].userID,i.name,i.avatar,1,i.curAvatarType,GameData.isRoomOwner)}this.playAgain()},t.prototype.playAgain=function(){if(this.isOnePlayAgain){2==GameData._playerList.length?this.num++:1==GameData._playerList.length&&(this.num=0),this._isInRoom=!0,console.log("开始擦除用户信息{{{{{{{{{}}}}}}}}}"),GameData.isRoomOwner&&this.createQRCode();for(var e=0;e<GameData._playerList.length;e++)this.showPlayer(GameData._playerList[e]),console.log(GameData._playerList[e]);this.txtGroup.visible=!1,this.btn_start.visible=!0,this.wenxintishi.visible=!0,this.checkStart(),this.isOnePlayAgain=!1}},t.prototype.joinRandRoom=function(){GameData.isCreateRoom=!1;var e=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar}),t=mvs.MsEngine.getInstance.joinRandomRoom(GameData.maxPlayerNum,e);-8==t&&mvs.MsEngine.getInstance.leaveRoom("")},t.prototype.createRoom=function(){GameData.isCreateRoom=!0;var e=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.createRoom(GameData.createRoomInfo,e)},t.prototype.joinWithRoomID=function(e){var t=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.joinRoom(e,t)},t.prototype.joinRoomWithPro=function(e){GameData.isCreateRoom=!1;var t=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar}),i=new MsMatchInfo(GameData.maxPlayerNum,0,0,e),n=mvs.MsEngine.getInstance.joinRoomWithProperties(i,t);-8==n&&mvs.MsEngine.getInstance.leaveRoom("")},t.prototype.addPlayerList=function(e,t,i,n,s,r){void 0===r&&(r=!1);var o=new GameUser;return o.id=e,o.name=t,o.avatar=i,o.tableID=n,o.isOwner=r,o.curAvatarType=s,GameData._playerList.push(o),this.showPlayer(o),o},t.prototype.delPlayerList=function(e){for(var t=new GameUser,i=0;i<GameData._playerList.length;i++)GameData._playerList[i].id==e&&(t.id=GameData._playerList[i].id,t.avatar=GameData._playerList[i].avatar,t.name=GameData._playerList[i].name,t.tableID=GameData._playerList[i].tableID,GameData._playerList.splice(i,1),this.wipePlayer(t))},t.prototype.showPlayer=function(e){var t=e.tableID;e.id==GameData.gameUser.id&&(this.player2_name.text=GameData.gameUser.name,this.LoadeAvatar(e.avatar,this.playerbg2_group)),1==t||2==t&&(this.sprite&&(this.saomatip.visible=!1,this.shp.visible=!1,this.sprite.visible=!1),this.pipeiIng_img.texture=RES.getRes("bg2_png"),this.LoadeAvatar(e.avatar,this.playerbg1_group),this.player1_name.text=e.name,this.txtGroup.visible=!1)},t.prototype.wipePlayer=function(e){var t=e.tableID;1==t?(this.pipeiIng_img.texture=RES.getRes("bg1_png"),this.playerbg2_group.getChildByName("touxiang")&&this.playerbg2_group.removeChild(this.playerbg2_group.getChildByName("touxiang"))):2==t&&(this.player1_name.text="",this.pipeiIng_img.texture=RES.getRes("bg1_png"),this.playerbg1_group.getChildByName("touxiang")&&this.playerbg1_group.removeChild(this.playerbg1_group.getChildByName("touxiang")))},t.prototype.wipePlayerLocation=function(e,t){if(0==this.isRoomOwnerDuankai){this.num--,this.createQRCode(),this.isOwner=t==GameData.gameUser.id,this.delPlayerList(e);for(var i=0;i<GameData._playerList.length;i++)GameData._playerList[i].isOwner=t==GameData._playerList[i].id,GameData._playerList[i].tableID=i+1}else App.CurrGameIsAi=!0},t.prototype.mbuttonLeaveRoom=function(){GameData.isSaoMaEnter=!1,t.joinFlag=0,clearTimeout(this.ss),this._isInRoom?mvs.MsEngine.getInstance.leaveRoom("累了困了离开一下"):(this.release(),GameSceneView._gameScene.lobby())},t.prototype.btnKickPlayerClick=function(e){var t=0;"btn_kick2"==e.target.name?t=2:"btn_kick3"==e.target.name&&(t=3);var i=this.getUserForTableID(t);return null==i?void console.info("用户不存在"):void mvs.MsEngine.getInstance.kickPlayer(i.id,"我们不能一起好好的玩游戏")},t.prototype.getUserForTableID=function(e){var t=null;return GameData._playerList.forEach(function(i){i.tableID==e&&(t=i)}),t},t.prototype.leaveRoomNotify=function(e){var i=e.data;console.info("玩家离开",i);var n=i.userId;i.owner==GameData.gameUser.id?(this.isOwner=!0,GameData.isRoomOwner=!0):(this.isOwner=!1,GameData.isRoomOwner=!1),this.delPlayerList(n),this.canStartGame=!1,0==t.joinFlag||1==t.joinFlag?this.txtGroup.visible=!0:(2==t.joinFlag||3==t.joinFlag||4==t.joinFlag)&&(this.player1_name.text="",this.createQRCode());for(var s=0;s<GameData._playerList.length;s++)i.owner==GameData._playerList[s].id?GameData._playerList[s].isOwner=!0:GameData._playerList[s].isOwner=!1,GameData._playerList[s].tableID=s+1,this.showPlayer(GameData._playerList[s])},t.prototype.leaveRoomResponse=function(e){this.delPlayerList(e.data.userId);var t=e.data;200!==t.status?console.log("退出房间失败！status="+t.status):(this.release(),console.log("闯哥牛逼"),GameSceneView._gameScene.lobby())},t.prototype.createRoomResponse=function(e){var t=e.data;if(200==t.status){console.log("创建房间成功###############################");var i=1;this.addPlayerList(GameData.gameUser.id,GameData.gameUser.name,GameData.gameUser.avatar,i,GameData.gameUser.curAvatarType,this.isOwner),this._roomID=t.roomID,GameData.roomID=t.roomID,this._isInRoom=!0,this.createQRCode(),this.txtGroup.visible=!1,t.owner==GameData.gameUser.id?(this.isOwner=!0,GameData.isRoomOwner=!0):(this.isOwner=!1,GameData.isRoomOwner=!1)}else console.info("加入房间失败",t)},t.prototype.joinRoomResponse=function(e){var t=e.data,i=this;if(200==t.status){GameData.gameUser.ownerId=t.owner,t.roomInfo.ownerId==GameData.gameUser.id?(this.isOwner=!0,GameData.isRoomOwner=!0,this.ss=setTimeout(function(){0==i.num&&i.GameAI()},5e3)):this.isOwner=!1,this._roomID=t.roomInfo.roomID,GameData.roomID=t.roomInfo.roomID,this._isInRoom=!0,GameData.gameUser.isOwner=!1;var n=1;this.addPlayerList(GameData.gameUser.id,GameData.gameUser.name,GameData.gameUser.avatar,n,GameData.gameUser.curAvatarType,this.isOwner);for(var s=t.userList,r=0;r<s.length;r++)n++,this.otherJoinShowInfo(s[r].userId,n,s[r].userProfile,t.roomInfo.ownerId==s[r].userId);this.checkStart()}else console.info("加入房间失败",t)},t.prototype.checkStart=function(){var e=this;console.info("房间人数："+GameData._playerList.length),GameData._playerList.length==GameData.maxPlayerNum?(console.info("可以开始游戏"),console.log(GameData.isRoomOwner),1==GameData.isRoomOwner&&(this.sprite?(this.canStartGame=!0,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.StartGame(),e.btn_start.enabled=!1},this)):(this.canStartGame=!0,this.StartGame()))):this.canStartGame=!1},t.prototype.otherJoinShowInfo=function(e,t,i,n){if(void 0===n&&(n=!1),i&&""!==i){var s="",r="",o=JSON.parse(i);o.name&&(s=o.name),o.avatar&&(r=o.avatar),this.addPlayerList(e,s,r,t,o.curAvatarType,n)}},t.prototype.joinRoomNotify=function(e){this.num++,clearTimeout(this.ss);var t=e.data,i=(t.userId,GameData._playerList.length+1);this.otherJoinShowInfo(t.userId,i,t.userProfile,t.userId==t.owner),this.checkStart()},t.prototype.notifyGameStart=function(){this.btn_leave.visible=!1,t.canClick=!1,this.group_selected.visible=!1,this.btn_leave.enabled=!1,1==this.isOwner;var e=[];GameData._playerList.forEach(function(t){e.push({id:t.id,name:t.name,avatar:t.avatar})});var i={action:GameData.gameStartEvent,userIds:e},n=mvs.MsEngine.getInstance.sendEvent(JSON.stringify(i));return 0!==n.result?console.log("发送游戏开始通知失败，错误码"+n.result):(GameData.events[n.sequence]=i,void console.log("发起游戏开始的通知，等待回复"))},t.prototype.StartGame=function(){this.btn_start.visible=!1,this.group_selected.visible=!1,GameData._playerList.length>=GameData.maxPlayerNum?(GameData.playerUserIds=GameData._playerList,console.log("停止加入房间"),mvs.MsEngine.getInstance.joinOver("joinOver")):console.log("人不够，或者还有人没有准备！")},t.prototype.sendEventResponse=function(e){var t=e.data;if(200!==t.status)return console.log("事件发送失败,status:"+status);var i=GameData.events[t.sequence];i&&i.action===GameData.gameStartEvent&&(delete GameData.events[t.sequence],this.release(),GameSceneView._gameScene.play(),PcKeyBoardHelper.instance.removeListener(this))},t.prototype.sendEventNotify=function(e){var t=e.data;
t&&t.cpProto&&t.cpProto.indexOf(GameData.gameStartEvent)>=0&&(GameData.playerUserIds=GameData._playerList,this.release(),PcKeyBoardHelper.instance.removeListener(this),GameSceneView._gameScene.play())},t.prototype.joinOverResponse=function(e){var i=e.data;if(200===i.status){if(this.btn_leave.visible=!1,t.canClick=!1,PcKeyBoardHelper.instance.removeListener(this),this.group_selected.visible=!1,this.canStartGame&&1==this.num)return this.loadGameSource(),void(GameData.playerUserIds=GameData._playerList);1==App.CurrGameIsAi&&this.loadGameSource()}else console.log("关闭房间失败，回调通知错误码：",i.status);Toast.show(" 设置不允许房间加人 "+(200==i.status?"success":"fail"))},t.prototype.joinOverNotify=function(e){this.btn_leave.visible=!1,this.loadGameSource();var t=e.data;console.log("userID:"+t.userID+" 关闭房间："+t.roomID+" cpProto:"+t.cpProto),Toast.show(t.userID+" 设置了不允许房间加人")},t.prototype.joinOpenResponse=function(e){var t=e.data;Toast.show(" 设置允许房间加人 "+(200==t.status?"success":"fail"))},t.prototype.joinOpenNotify=function(e){var t=e.data;Toast.show(t.userID+" 设置了允许房间加人")},t.prototype.cancelStart=function(e,t){},t.prototype.kickPlayerResponse=function(e){var t=e.data;this.cancelStart(t.userID,this._roomID),this.wipePlayerLocation(t.userID,t.owner)},t.prototype.kickPlayerNotify=function(e){var t=e.data;console.info("玩家离开",t),t.userID==GameData.gameUser.id?(this.release(),GameSceneView._gameScene.lobby()):(this.cancelStart(t.userID,this._roomID),this.wipePlayerLocation(t.userID,t.owner))},t.prototype.networkStateNotify=function(e){this.isRoomOwnerDuankai=!0;var i=e.data,n=i.userID;this.cancelStart(n,i.roomID),(i.state=0!=t.joinFlag&&1!=t.joinFlag)?(console.info("玩家断开:"+n),mvs.MsEngine.getInstance.kickPlayer(n,"玩家断线踢掉")):2==i.state?console.info("玩家正在从新连接..."+n):(GameData.isRoomOwner||0!=t.joinFlag&&1!=t.joinFlag)&&(console.info("玩家离开"+n),this.wipePlayerLocation(i.userID,i.owner))},t.prototype.setRoomPropertynotify=function(e){var t=e.data;console.log("roomProperty = "+t.roomProperty),t.roomProperty===GameData.roomPropertyType.mapB?GameData.roomPropertyValue=GameData.roomPropertyType.mapB:GameData.roomPropertyValue=GameData.roomPropertyType.mapA},t.prototype.setRoomPropertyResponse=function(e){console.log("roomProperty = "+e.data.roomProperty)},t.prototype.CreateVsImg=function(){var e=this;clearInterval(this.set),egret.Tween.get(this.shandian).to({alpha:1},1e3),egret.Tween.get(this.v).to({x:this.vX},1e3,egret.Ease.quartOut),egret.Tween.get(this.s).to({x:this.sX},1e3,egret.Ease.quartOut).wait(300).call(function(){GameData.isRoomOwner?e.notifyGameStart():!GameData.isRoomOwner&&e.isRoomOwnerDuankai?(App.CurrGameIsAi=!0,e.notifyGameStart()):1==App.CurrGameIsAi&&GameSceneView._gameScene.play()})},t.prototype.loadGameSource=function(){var e=this;egret.Tween.get(this.player1LoadingMask).to({width:this.player1Loading.width},1e3),egret.Tween.get(this.player2LoadingMask).to({width:this.player1Loading.width},1e3).call(function(){e.CreateVsImg()});var t=0;setInterval(function(){100>t&&(t+=10,e.player2loadingtxt.text=t.toString()+"%",e.player1loadingtxt.text=t.toString()+"%")},100)},t.prototype.LoadeAvatar=function(e,t){var i=new egret.ImageLoader;i.crossOrigin="anonymous",i.load(e),i.once(egret.Event.COMPLETE,function(e){if(e.currentTarget.data){var i=new egret.Texture;i.bitmapData=e.currentTarget.data;var n=new egret.Bitmap(i);n.width=n.height=100,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,t.addChild(n),n.name="touxiang",n.x=t.width/2,n.y=t.height/2}},this)},t.prototype.createQRCode=function(){this.shp=new egret.Shape,this.shp.graphics.beginFill(16777215,1),this.shp.graphics.drawRect(0,0,this.playerbg1_group.height/4*3,this.playerbg1_group.height/4*3),this.shp.anchorOffsetX=this.shp.width/2,this.shp.anchorOffsetY=this.shp.height/2,this.shp.graphics.endFill(),this.shp.x=this.qrcodebg.x,this.shp.y=this.playerbg1_group.height/2-20,this.playerbg1_group.addChild(this.shp);var e=window.location.host;this.sprite=qr.QRCode.create("http://"+e+"/index.html?"+GameData.roomID,50,this.shp.width,this.shp.height),this.sprite.anchorOffsetX=this.sprite.width/2,this.sprite.anchorOffsetY=this.sprite.height/2,this.playerbg1_group.addChild(this.sprite),this.sprite.x=this.qrcodebg.x,this.sprite.y=this.shp.y,this.saomatip.y=this.shp.y+this.shp.height/2,this.saomatip.visible=!0},t.prototype.onFullscreen=function(){if(!(this.gp_bg.numChildren>0))for(var e=Math.ceil(App.GameWidth/this.gp_bg_Rect),t=Math.ceil(App.GameHeight/this.gp_bg_Rect),i=0;e>i;++i)for(var n=0;t>n;++n){var s=new eui.Image;s.source="bg_round_png",this.gp_bg.addChild(s),s.x=i*this.gp_bg_Rect,s.y=n*this.gp_bg_Rect}},t.prototype.GameAI=function(){console.log("匹配5s"),App.CurrGameIsAi=!0,mvs.MsEngine.getInstance.joinOver("joinOver");var e=new GameUser;e.id="12138",e.name="游客12138",e.avatar="resource/assets/egret_icon.png",e.tableID=2,e.isOwner=!1,GameData._playerList.push(e),this.showPlayer(e)},t.joinFlag=0,t.canClick=!0,t}(eui.Component);__reflect(match.prototype,"match",["eui.UIComponent","egret.DisplayObject"]);var PcKeyBoardHelper=function(){function e(){this.isListening=!1,this.list={}}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.add=function(){0==this.isListening&&(this.isListening=!0,document.addEventListener("keyup",e.instance.onKeyDown))},e.prototype.onKeyDown=function(t){var i;for(i in e.instance.list){var n=e.instance.list[i];n.callback.call(n.target,t)}},e.prototype.addListener=function(t,i){var n=egret.getQualifiedClassName(i);if(null==e._instance.list[n]){var s=new KeyVo(n,i,t);e._instance.list[s.name]=s}e._instance.add()},e.prototype.removeListener=function(t){var i=egret.getQualifiedClassName(t);null!=e._instance.list[i]&&delete e._instance.list[i],this.checkCount()},e.prototype.checkCount=function(){for(var t in e._instance.list)return;document.removeEventListener("keyup",e.instance.onKeyDown),this.isListening=!1},e}();__reflect(PcKeyBoardHelper.prototype,"PcKeyBoardHelper");var KeyVo=function(){function e(e,t,i){this.name="",this.name=e,this.target=t,this.callback=i}return e}();__reflect(KeyVo.prototype,"KeyVo");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var LanguageType=function(){function e(){}return e.En="_En",e.Ch="",e}();__reflect(LanguageType.prototype,"LanguageType");var App=function(){function e(){}return Object.defineProperty(e,"MessageCenter",{get:function(){return MessageCenter.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RandomUtils",{get:function(){return RandomUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RectangleUtils",{get:function(){return RectangleUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ClickAnimation",{get:function(){return ClickAnimation.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DisplayUtils",{get:function(){return DisplayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GameWidth",{get:function(){return e.StageUtils.getWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GameHeight",{get:function(){return e.StageUtils.getHeight()},enumerable:!0,configurable:!0}),e.Proto=null,e.Language=LanguageType.Ch,e.UserToken="",e.CurrChatId="",e.CurrGameId=1,e.CurrGameIsAi=!1,e.CurrGameAiLevel=3,e.CurrRoomId="",e.CurrPlatformUid="",e.isIOS=!0,e.BG_FROG="bg_frog_ogg",e.TIME_COMMON="time_common_ogg",e.TIME_LAST="time_last_ogg",e.JUMP_SUCCESS="jump_success_ogg",e.READYGO="readyGo_ogg",e.WIN="win_ogg",e.LOSE="lose_ogg",e}();__reflect(App.prototype,"App");var ClickAnimation=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.register=function(e){var t=this,i=e.$onAddToStage.bind(e);e.$onAddToStage=function(n,s){i(n,s),t.addAnimation(e)};var n=e.$onRemoveFromStage.bind(e);e.$onRemoveFromStage=function(){n(),t.ramoveAnimation(e)},e.stage&&this.addAnimation(e)},t.prototype.addAnimation=function(e){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this)},t.prototype.ramoveAnimation=function(e){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this)},t.prototype.onClickBegin=function(e){var t=e.currentTarget;egret.Tween.get(t,egret.Ease.sineOut).to({scaleX:.9,scaleY:.9},100)},t.prototype.onClickEnd=function(e){var t=e.currentTarget;egret.Tween.get(t,egret.Ease.sineOut).to({scaleX:1,scaleY:1},100)},t}(BaseClass);__reflect(ClickAnimation.prototype,"ClickAnimation");var RandomUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var i=t-e;return e+Math.random()*i},t.prototype.limitInteger=function(e,t){return Math.round(this.limit(e,t))},t.prototype.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},t}(BaseClass);__reflect(RandomUtils.prototype,"RandomUtils");var RectangleUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.intersects=function(e,t){var i=e.x,n=t.x,s=e.y,r=t.y,o=e.width,a=t.width,h=e.height,c=t.height;return n>i&&n-i>=o?!1:i>n&&i-n>=a?!1:r>s&&r-s>=h?!1:s>r&&s-r>=c?!1:!0},t}(BaseClass);__reflect(RectangleUtils.prototype,"RectangleUtils");var DBArmature=function(e){function t(t){var i=e.call(this)||this;return i._displayEvents=[],i._armature=t,i._armatureDisplay=t.display,i.dealClock(i),i.addChild(i._armatureDisplay),i}return __extends(t,e),t.prototype.dealClock=function(e){var t=this,i=e.$onAddToStage.bind(e);e.$onAddToStage=function(e,n){i(e,n),t.$addToClock()};var n=e.$onRemoveFromStage.bind(e);e.$onRemoveFromStage=function(){n(),t.$removeFromClock()}},t.prototype.addToClock=function(e){this._curClock||(this._curClock=e,this._curClock.add(this._armature))},t.prototype.$addToClock=function(){this.addToClock(dragonBones.EgretFactory.factory.clock)},t.prototype.$removeFromClock=function(){this._curClock&&(this._curClock.remove(this._armature),this._curClock=null)},t.prototype.getRunDbNum=function(){var e=dragonBones.EgretFactory.factory.clock._animatebles,t={};return e.forEach(function(e){if(e){var i=e.armatureData.name;t[i]||(t[i]=0),t[i]++}}),JSON.stringify(t)},t.prototype.gotoAndStop=function(e){this._currAction=e,this._armature.animation.gotoAndStopByFrame(e)},t.prototype.gotoAndStopByTime=function(e,t){this._currAction=e,this._armature.animation.gotoAndStopByTime(e,t)},t.prototype.gotoAndStopByProgress=function(e,t){this._currAction=e,this._armature.animation.gotoAndStopByProgress(e,t)},t.prototype.play=function(e,t){return void 0===t&&(t=0),this._currAction=e,this._armature.animation.play(e,t)},Object.defineProperty(t.prototype,"currAction",{get:function(){return this._currAction},enumerable:!0,configurable:!0}),t.prototype.stop=function(){this._armature.animation.stop()},t.prototype.replaceSlot=function(e,t){var i=this._armature.getSlot(e);i&&(i.display=t)},t.prototype.replaceTexture=function(e){this._armature.replaceTexture(e)},t.prototype.replaceSkin=function(e){AssetManager.dbFactory.replaceSkin(this._armature,e)},Object.defineProperty(t.prototype,"armatureName",{get:function(){return this._armature.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._armature.animation.timeScale},set:function(e){this._armature&&(this._armature.animation.timeScale=e)},enumerable:!0,configurable:!0}),t.prototype.getSlot=function(e){return this._armature.getSlot(e)},t.prototype.getBone=function(e){return this._armature.getBone(e)},t.prototype.once=function(e,t,i){this._armatureDisplay.once(e,t,i)},t.prototype.addDisplayEvent=function(e,t,i){this._armatureDisplay.addEvent(e,t,i),this._displayEvents.push([e,t,i])},t.prototype.removeDisplayEvent=function(e,t,i){this._armatureDisplay.removeEvent(e,t,i)},t.prototype.removeAllDisplayEvent=function(){for(;this._displayEvents.length;){var e=this._displayEvents.pop();this.removeDisplayEvent(e[0],e[1],e[2])}},t.prototype.dispose=function(){this._armature&&(AssetManager.removeCacheArmature(this),this.$removeFromClock(),this.removeAllDisplayEvent(),egret.Tween.removeTweens(this),this._armature.dispose(),this._armature=null,this._armatureDisplay=null)},t}(egret.DisplayObjectContainer);__reflect(DBArmature.prototype,"DBArmature");var DBProgress=function(e){function t(t){var i=e.call(this)||this;return i._armature=t,i._armature.gotoAndStop("progress"),i.addChild(i._armature),i}return __extends(t,e),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},set:function(e){this._progress=e,this._progress>1&&(this._progress=1),this._progress<0&&(this._progress=0),this._armature.gotoAndStopByProgress("progress",this._progress)},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(DBProgress.prototype,"DBProgress");var GameData=function(){function e(){}return e.init=function(){this.isGameOver=!0,this.isRoomOwner=!1,this.syncFrame=!1,this.number1="",this.number2="",this.number3="",this.roomID="",this.intervalList=[],this.playerUserIds=[],this.roomPropertyValue=this.roomPropertyType.mapA},e.configEnvir=function(t,i){e.CHANNEL=t,e.DEFAULT_ENV=i?e.ENVIRONMENT.dev:e.ENVIRONMENT.pro,"MatchVS"===t&&(e.gameID=201150,e.appkey="0db8550d9bd345da82b852564f59d2e6",e.secretKey="15bf7e1bc2454d21b071d67f568e257c"),"MatchVS-Test"===t&&(e.gameID=201170,e.appkey="a5b937f29a4c480bb6946093105c0565",e.secretKey="a8c5c84afde44136a5eea6f0ac09887c"),"MatchVS-Test1"===t&&(e.gameID=201078,e.appkey="938e1ee0db444a079fe0695598677ba0",e.secretKey="9b11e0eca09141a1961d49d6b6028075")},e.getBindOpenIDAddr=function(e,t){if("MatchVS"==e||"Matchvs"==e){if("release"==t)return"http://vsuser.matchvs.com/wc6/thirdBind.do?";if("alpha"==t)return"http://alphavsuser.matchvs.com/wc6/thirdBind.do?"}else if("MatchVS-Test1"==e){if("release"==t)return"http://zwuser.matchvs.com/wc6/thirdBind.do?";if("alpha"==t)return"http://alphazwuser.matchvs.com/wc6/thirdBind.do?"}},e.getSign=function(t){var i=e.appkey+"&"+t+"&"+e.secretKey,n=(new MD5).hex_md5(i);return n},e.CHANNEL="MatchVS",e.DEFAULT_ENV="alpha",e.ENVIRONMENT={dev:"alpha",pro:"release"},e.gameID=202454,e.appkey="dd7873bac741436caf328914fb72e652#E",e.secretKey="d8543bd2fc40446bb9dab90d1059dfd5",e.gameUser=new GameUser,e.playerUserIds=[],e.runtimeType="web",e.matchType=0,e.randomMatch=1,e.specialMatch=2,e.tagsMatch=3,e.maxPlayerNum=2,e.isRoomOwner=!1,e._playerList=[],e.isCreateRoom=!1,e.gameStartEvent="gameStart",e.gameOverEvent="gameOver",e.playerPositionEvent="playerPosition",e.reconnectStartEvent="gameReconnectStart",e.newStarEvent="newStar",e.changeStarEvent="changeStar",e.RenshuEvent="renshu",e.GameInitEvent="gameInit",e.gameReadyEvent="gameReady",e.reconnectReadyEvent="gameReconnectReady",e.events={},e.syncFrame=!1,e.isGameOver=!1,e.starPositionX=0,e.starPositionY=0,e.frameRate=20,e.defaultHeight=400,e.roomID="",e.isSaoMaEnter=!1,e.intervalList=[],e.number1="",e.number2="",e.number3="",e.playerTime=60,e.roomPropertyType={mapA:"mapA",mapB:"mapB"},e.roomPropertyValue="mapA",e.createRoomInfo=new MsCreateRoomInfo("MatchvsDemoEgret",2,0,0,1,"mapA"),e}();__reflect(GameData.prototype,"GameData");var gameLoading=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.img.texture=RES.getRes("loading_png"),this.addChild(this.img),this.img.scaleX=0,RES.loadGroup("preload"),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,function(){},this)},t.prototype.onProgress=function(e,t){this.scaleX=e/t},t}(egret.Sprite);__reflect(gameLoading.prototype,"gameLoading");var AnimationButton=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);return"down"==t?this.scaleX=this.scaleY=.9:"up"==t&&(this.scaleX=this.scaleY=1),t},t}(eui.Button);__reflect(AnimationButton.prototype,"AnimationButton",["eui.UIComponent","egret.DisplayObject"]);var GameResultView=function(e){function t(t){var i=e.call(this)||this;return i.particlesArr=[],i.isAgain=!1,i.curSelect=1,i.canLefRig=!1,i.isAgain=!1,0==match.joinFlag||1==match.joinFlag||GameData.isSaoMaEnter?mvs.MsEngine.getInstance.leaveRoom("bye"):GameData.isCreateRoom&&mvs.MsEngine.getInstance.joinOpen("加入吧"),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,i.leaveRoomResponse,i),i.skinName="resource/mySkins/GameResultSkin.exml",i.winNumber=t,i.addEventListener(eui.UIEvent.CREATION_COMPLETE,i.onComplete,i),egret.ExternalInterface.call("sendToNative","gameResultCanclick"),"runtime2"==GameData.runtimeType?i.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(i.KeyBoardMethod,i),i.init(),i}return __extends(t,e),t.prototype.init=function(){this.y=-App.GameHeight/2,egret.Tween.get(this).to({y:0},1e3,egret.Ease.backInOut)},t.prototype.KeyBoardMethod=function(e){if((40==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode)&&(this.canLefRig=!0,this.group_selected.getChildAt(this.curSelect).visible=!0),(this.canLefRig&&37==e.keyCode||39==e.keyCode)&&(this.group_selected.getChildAt(this.curSelect).visible=!1,this.curSelect=0==this.curSelect?1:0,this.group_selected.getChildAt(this.curSelect).visible=!0),this.canLefRig&&13==e.keyCode)switch(this.curSelect){case 0:this.onLevelClick(),this.curSelect=1,PcKeyBoardHelper.instance.removeListener(this);break;case 1:this.onAgaginClick(),PcKeyBoardHelper.instance.removeListener(this)}},t.prototype.KeyBoardMethodRuntime=function(){var e=this;egret.ExternalInterface.addCallback("sendToJS",function(t){if(("left"==t||"right"==t||"down"==t||"up"==t)&&(e.canLefRig=!0,e.group_selected.getChildAt(e.curSelect).visible=!0),(e.canLefRig&&"left"==t||"right"==t)&&(e.group_selected.getChildAt(e.curSelect).visible=!1,e.curSelect=0==e.curSelect?1:0,e.group_selected.getChildAt(e.curSelect).visible=!0),e.canLefRig&&"OK"==t)switch(e.curSelect){case 0:e.onLevelClick(),e.curSelect=1;break;case 1:e.onAgaginClick()}})},t.prototype.onComplete=function(){this.height=App.GameHeight,this.btn_again.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAgaginClick,this),this.btn_leave.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLevelClick,this),this.showResult()},t.prototype.onLevelClick=function(){egret.ExternalInterface.call("sendToNative","gameResultCanNotclick"),this.dispose(),match.joinFlag=0,t.canClick=!1,mvs.MsEngine.getInstance.leaveRoom("zoule"),GameSceneView._gameScene.lobby()},t.prototype.showResult=function(){this.lab_myName.text=GameData.gameUser.name+"(我)";for(var e=0;e<GameData._playerList.length;e++)GameData._playerList[e].id!=GameData.gameUser.id&&(this.lab_otherName.text=GameData._playerList[e].name);1==this.winNumber?(this.checkMaxScore(),this.img_result1.source="loseBG_png",this.img_result2.source="winBG_png",this.onParticleEffect(this.gp_particle.width/2+400,this.gp_particle.height/2,"hua"),this.onParticleEffect(this.gp_particle.width/2-400,this.gp_particle.height/2,"falisnow")):3==this.winNumber&&(this.img_result1.source="winBG_png",this.img_result2.source="loseBG_png",this.onParticleEffect(this.gp_particle.width/2-400,this.gp_particle.height/2,"hua"),this.onParticleEffect(this.gp_particle.width/2+400,this.gp_particle.height/2,"falisnow")),this.addPerson()},t.prototype.checkMaxScore=function(){GameData.gameUser.curscore>GameData.gameUser.maxScore&&(this.onParticleEffect(0,0,"flowers"),GameData.gameUser.maxScore=GameData.gameUser.curscore)},t.prototype.onAgaginClick=function(){this.dispose(),egret.ExternalInterface.call("sendToNative","gameResultCanNotclick"),t.canClick=!1,1==GameData.isCreateRoom?GameSceneView._gameScene.match(3):0==match.joinFlag?GameSceneView._gameScene.match(0):GameData.isSaoMaEnter?GameSceneView._gameScene.match(4):1==match.joinFlag&&GameSceneView._gameScene.match(1)},t.prototype.leaveRoomResponse=function(e){var t=e.data;200!==t.status||mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this)},t.prototype.onParticleEffect=function(e,t,i,n,s){void 0===n&&(n=-1),void 0===s&&(s=1);var r=RES.getRes(i+"_png"),o=RES.getRes(i+"_json"),a=new particle.GravityParticleSystem(r,o);if(this.particlesArr.push(a),a.y=t,a.x=e,a.scaleX=s,"flowers"==i?(this.group_flower.addChild(a),a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2):this.gp_particle.addChild(a),a.start(n),"hua"==i)for(var h=2;7>h;h++){i="hua"+h;var r=RES.getRes(i+"_png"),o=RES.getRes("hua_json"),a=new particle.GravityParticleSystem(r,o);this.particlesArr.push(a),a.y=t,a.x=e,a.scaleX=s,this.gp_particle.addChild(a),a.start(n)}},t.prototype.addPerson=function(){this.roleAvatar1=this.createAvatar(this.gp_people1,!1),this.roleAvatar2=this.createAvatar(this.gp_people2,!0);GameData.gameUser;this.addDBresult(),3==this.winNumber?(this.roleAvatar1.armature.play("win"),this.roleAvatar2.armature.play("Loser2"),App.SoundManager.playEffect(App.LOSE)):1==this.winNumber&&(this.roleAvatar2.armature.play("win"),this.roleAvatar1.armature.play("Loser2"),App.SoundManager.playEffect(App.WIN),App.SoundManager.muteBg())},t.prototype.createAvatar=function(e,t){e.removeChildren();var i,n;if(t)n=GameData.gameUser;else for(var s=0;s<GameData._playerList.length;s++)GameData._playerList[s].id!=GameData.gameUser.id&&(n=GameData._playerList[s]);return i=new RoleAvatar(n.curAvatarType,n.avatar),i.armature.x=.5*e.width,i.armature.y=e.height,e.addChild(i.armature),i},t.prototype.addDBresult=function(){this.dbResult1=AssetManager.getQuickDBArmature("winloser"),this.dbResult2=AssetManager.getQuickDBArmature("winloser"),this.gp_wenzi.addChild(this.dbResult1),this.gp_wenzi.addChild(this.dbResult2),this.dbResult1.x=this.gp_wenzi.width/2-400,this.dbResult2.x=this.gp_wenzi.width/2+400,this.dbResult1.y=this.gp_wenzi.height/2-100,this.dbResult2.y=this.gp_wenzi.height/2-100,this.dbResult1.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onPlayResultComplete,this),this.dbResult1.visible=!1,this.dbResult2.visible=!1},t.prototype.onPlayResultComplete=function(){var e=this;this.dbResult1.visible=!1,this.dbResult2.visible=!1,setTimeout(function(){for(var t=0;t<e.particlesArr.length;t++)e.particlesArr[t].stop()},5e3)},t.prototype.dispose=function(){this.dbResult1.dispose(),this.dbResult2.dispose(),this.roleAvatar1.dispose(),this.roleAvatar2.dispose()},t.canClick=!0,t}(eui.Component);__reflect(GameResultView.prototype,"GameResultView");var GameSureLeaveView=function(e){function t(){var t=e.call(this)||this;return t.rectArr=[],t.isOpen=!1,t.num=0,t.skinName="resource/mySkins/GameSureLeaveSkin.exml",t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rectArr=[this.rect_cancel,this.rect_sure],this.btn_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancel,this),this.btn_sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSure,this),"runtime2"==GameData.runtimeType?this.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(this.KeyBoardMethod,this)},t.prototype.onCancel=function(){egret.ExternalInterface.call("sendToNative","gameCanclick"),egret.ExternalInterface.call("sendToNative","CanNotExit"),egret.ExternalInterface.call("sendToNative","tuichuCanNotclick"),this.removeFunction(),this.parent.removeChild(this)},t.prototype.onSure=function(){egret.ExternalInterface.call("sendToNative","lobbyCanclick"),egret.ExternalInterface.call("sendToNative","CanExit"),egret.ExternalInterface.call("sendToNative","tuichuCanNotclick"),this.removeFunction(),this.parent.removeChild(this),App.SoundManager.stopBg();var e={action:GameData.RenshuEvent,uid:GameData.gameUser.id};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(e)),GameSceneView._gameScene.gameResult(3)},t.prototype.removeFunction=function(){PcKeyBoardHelper.instance.removeListener(this)},t.prototype.KeyBoardMethod=function(e){37==e.keyCode?(this.num=0,this.rectArr[0].visible=!0,this.rectArr[1].visible=!1):39==e.keyCode?(this.num=1,this.rectArr[0].visible=!1,this.rectArr[1].visible=!0):13==e.keyCode&&(0==this.num?this.onCancel():this.onSure())},t.prototype.KeyBoardMethodRuntime=function(){var e=this;egret.ExternalInterface.addCallback("sendToJS",function(t){"left"==t?(e.num=0,e.rectArr[0].visible=!0,e.rectArr[1].visible=!1):"right"==t?(e.num=1,e.rectArr[0].visible=!1,e.rectArr[1].visible=!0):"OK"==t&&(0==e.num?e.onCancel():e.onSure())})},t.TUICHUI="TUICHUI",t}(eui.Component);__reflect(GameSureLeaveView.prototype,"GameSureLeaveView",["eui.UIComponent","egret.DisplayObject"]);var FrogCharacter=function(e){function t(){var t=e.call(this)||this;return t.status=0,t}return __extends(t,e),t.prototype.init=function(e,t){this.roleAvatar||(this.roleAvatar=new RoleAvatar(e,"",t),this.armature=this.roleAvatar.armature,this.armature&&(this.armature.scaleX=this.armature.scaleY=.6),this.addChild(this.armature),this.validWidth=this.width,this.validHeight=Math.floor(GameLeonardFroG.IMPACT_parameter*this.height))},Object.defineProperty(t.prototype,"isEnemy",{get:function(){return-1==this.scaleY},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){egret.Tween.removeTweens(this),this.roleAvatar.dispose(),this.roleAvatar=null,this.armature=null,this.currRect=null},t}(egret.DisplayObjectContainer);__reflect(FrogCharacter.prototype,"FrogCharacter");var FrogEffect=function(e){function t(t){var i=e.call(this)||this;return i.onAddEffect(t),i}return __extends(t,e),t.prototype.onAddEffect=function(e){this.armature=this.armature,this.armature.play(e),this.addChild(this.armature)},t.prototype.dispose=function(){this.roleAvatar.dispose(),this.roleAvatar=null,this.armature=null,this.currRect=null},t}(egret.DisplayObjectContainer);__reflect(FrogEffect.prototype,"FrogEffect");var GameLeonardFroG=function(e){function t(){var t=e.call(this)||this;if(t.numScore1=0,t.numScore2=0,t.time=60,t.isCaninit=!1,t.rectangle1=new egret.Rectangle,t.rectangle2=new egret.Rectangle,t.checkFlag=0,egret.ExternalInterface.call("sendToNative","gameCanclick"),egret.ExternalInterface.call("sendToNative","CanNotExit"),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,t.networkStateNotify,t),t.tmpPoint=new egret.Point,t.arrayPlay1=[],t.arrayPlay2=[],t.dispose(),t.init(),t.show(),GameData.isRoomOwner&&!App.CurrGameIsAi)var i=setInterval(function(){if(0==t.isCaninit){var e={action:GameData.GameInitEvent};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(e))}else clearInterval(i)},20);return mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,t.KeyiKaishi,t),t}return __extends(t,e),t.prototype.KeyiKaishi=function(e){var t=e.data;if(t.cpProto.indexOf(GameData.GameInitEvent)>=0)if(GameData.isRoomOwner)this.isCaninit=!0,this.start(),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.KeyiKaishi,this);else{var i={action:GameData.GameInitEvent};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(i)),this.start(),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.KeyiKaishi,this)}},t.prototype.init=function(){var e=this;t.isNewScence=!0,this.time=60,this.numScore1=0,this.numScore2=0,this.container=new egret.DisplayObjectContainer,this.container.width=App.GameWidth,this.container.height=App.GameHeight,this.bg=App.DisplayUtils.createBitmap("bg_LeonardFrog_png"),this.bg.width=App.GameWidth,this.bg.height=App.GameHeight,this.addChild(this.bg),this.addChild(this.container);var i=App.GameWidth/t.GAME_WIDTH,n=App.GameHeight/t.GAME_HEIGHT,s=Math.min(i,n);this.container.scaleX=this.container.scaleY=s,this.container.x=.5*(App.GameWidth-t.GAME_WIDTH*s),this.container.y=.5*(App.GameHeight-t.GAME_HEIGHT*s),this.containerTop=new egret.DisplayObjectContainer,this.addChild(this.containerTop),this.containerTop.x=App.GameWidth/2-100,this.containerTop.y=0,this.img1=App.DisplayUtils.createBitmap("ti_png"),this.img1.x=0,this.img1.y=38,this.containerTop.addChild(this.img1),this.img_red=App.DisplayUtils.createBitmap("p_red_png"),this.containerTop.addChild(this.img_red),this.img_red.width=172,this.img_red.x=2,this.img_red.y=40,this.img_red.mask=new egret.Rectangle(-172,0,172,42),this.img_blue=App.DisplayUtils.createBitmap("p_blue_png"),this.containerTop.addChild(this.img_blue),this.img_blue.width=172,this.img_blue.x=180,this.img_blue.y=40,this.img_blue.mask=new egret.Rectangle(172,0,172,42),this.img_diadema=App.DisplayUtils.createBitmap("img_diadema_frog_png"),this.containerTop.addChild(this.img_diadema),this.img_diadema.x=146,this.img_diadema.y=0,this.bg_time=App.DisplayUtils.createBitmap("bg_time_png"),this.containerTop.addChild(this.bg_time),this.bg_time.x=158,this.bg_time.y=62,this.bitmaptime=new egret.TextField,this.containerTop.addChild(this.bitmaptime),this.bitmaptime.text="60",this.bitmaptime.textColor=2171169,this.bitmaptime.scaleX=this.bitmaptime.scaleY=.7,this.bitmaptime.fontFamily="Arial",this.bitmaptime.x=167,this.bitmaptime.y=71,this.roleAvatar1=new RoleAvatar(1,GameData.gameUser.avatar,"toukuang"),this.roleAvatar1.armature.play("jing"),this.roleAvatar1.armature.x=this.containerTop.x,this.roleAvatar1.armature.y=.8*this.containerTop.height,this.roleAvatar1.armature.scaleX=this.roleAvatar1.armature.scaleY=.6,this.roleAvatar1.armature.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.roleAvatarPlayEnd,this),this.addChild(this.roleAvatar1.armature),this.roleAvatar2=new RoleAvatar(1,GameData._playerList[1].avatar,"toukuang"),this.roleAvatar2.armature.play("jing"),this.roleAvatar2.armature.x=this.containerTop.x+this.containerTop.width,this.roleAvatar2.armature.y=.8*this.containerTop.height,this.roleAvatar2.armature.scaleX=this.roleAvatar2.armature.scaleY=.6,this.roleAvatar2.armature.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.roleAvatarPlayEnd,this),this.addChild(this.roleAvatar2.armature),this.containerEffect=new egret.DisplayObjectContainer,this.containerEffect.x=0,this.containerEffect.y=0,this.container.addChild(this.containerEffect),this.containerEffect.mask=new egret.Rectangle(0,0,t.GAME_WIDTH,t.GAME_HEIGHT),this.addAllLotusDb(),this.containerGame=new GameLeonardFrogMap,this.containerGame.x=0,this.containerGame.y=170,this.container.addChild(this.containerGame),this.containerGame.touchChildren=!0,this.containerGame.touchEnabled=!0,this.container.touchEnabled=!0,this.container.touchChildren=!0,this.containerGame.mask=new egret.Rectangle(0,0,t.GAME_WIDTH,t.GAME_HEIGHT),this.jishiqi=new egret.Timer(1e3,0),this.jishiqi.addEventListener(egret.TimerEvent.TIMER,this.timer,this),this.containerPeople=new egret.DisplayObjectContainer,this.container.addChild(this.containerPeople),this.containerheight=new egret.DisplayObjectContainer,this.containerheight.width=this.bg.width,this.containerheight.height=this.bg.height,this.container.addChild(this.containerheight),this.readyIMG=new GameReady(function(){App.CurrGameIsAi&&e.start()
}),this.readyIMG.x=App.GameWidth/2,this.readyIMG.y=App.GameHeight/2,this.container.addChild(this.readyIMG),this.addAllRainbow(),this.goBack=App.DisplayUtils.createBitmap("goBack_png"),this.addChild(this.goBack),this.goBack.x=0,this.goBack.y=20,this.goBack.touchEnabled=!0,this.goBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goBackBtnHandler,this),this.btn_jump=App.DisplayUtils.createBitmap("beng_png"),this.btn_jump.anchorOffsetX=.5*this.btn_jump.width,this.btn_jump.anchorOffsetY=.5*this.btn_jump.height,this.btn_jump.x=App.GameWidth-this.btn_jump.width+this.btn_jump.anchorOffsetX,this.btn_jump.y=App.GameHeight-this.btn_jump.height-10+this.btn_jump.anchorOffsetY,this.addChild(this.btn_jump),App.ClickAnimation.register(this.btn_jump),this.btn_jump.touchEnabled=!1,this.containerheight.touchEnabled=!1,this.btn_jump.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJump,this),this.containerheight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJump,this),this.isjian=!1,"runtime2"==GameData.runtimeType?egret.ExternalInterface.addCallback("sendToJS",function(t){"OK"==t&&e.isjian?e.onJump():"tuichu"==t&&(e.goBackBtnHandler(),egret.ExternalInterface.call("sendToNative","gameCanNotclick"),egret.ExternalInterface.call("sendToNative","tuichuCanclick"))}):"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(function(t){13==t.keyCode&&e.isjian?e.onJump():8==t.keyCode&&e.goBackBtnHandler()},this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.onGameEventvs,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this)},t.prototype.remove=function(){if(this.roleAvatar1=null,this.roleAvatar2=null,this.arrayPlay1.length>0){for(var e=0;e<this.arrayPlay1.length;e++)this.arrayPlay1[e]=null,this.arrayPlay2[e]=null;this.arrayPlay1=[],this.arrayPlay2=[]}this.stop(),PcKeyBoardHelper.instance.removeListener(this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this)},t.prototype.networkStateNotify=function(e){App.CurrGameIsAi=!0},t.prototype.roleAvatarPlayEnd=function(e){var t=e.currentTarget.parent;"dong"==t.currAction&&t.play("jing")},t.prototype.show=function(){var e=this.containerGame.createSelfTips();if(App.CurrGameIsAi)this.containerGame.createEnemyTips(e[0],e[1]),this.containerGame.tick(0),this.createAiEnemy(),this.readyIMG.play();else{var t={key:"createRects",tips1Datas:e[0],tips2Datas:e[1]};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(t))}this.onAddNewSelf();var i=App.BG_FROG;App.SoundManager.playBg(i)},t.prototype.goBackBtnHandler=function(){GameSceneView._gameScene.tuichu()},t.prototype.onGameEventvs=function(e){var i=e.data,n=JSON.parse(i.cpProto);if("createCharacter"==n.key)this.onAddNewEnemy(n.id,t.GAME_WIDTH-n.initX);else if("jump"==n.key)this.enemyJump();else if("createRects"==n.key)this.containerGame.createEnemyTips(n.tips1Datas,n.tips2Datas),this.containerGame.tick(0),this.readyIMG.play();else if("setScore"==n.key)this.enemyJumpSuccess();else if("intoWater"==n.key)this.enemyIntoWater(this.getEnemy(n.characterID));else if("BumpOut"==n.key)this.enemybumpOut(this.getEnemy(n.characterID));else if("setRect"==n.key){var s=this.getEnemy(n.characterID),r=t.Rects[n.rectID];s.currRect=r}else"timeOver"==n.key?(this.bitmaptime.text="00",mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.onGameEventvs,this)):i.cpProto.indexOf(GameData.RenshuEvent)>=0&&n.uid!==GameData.gameUser.id&&(mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.onGameEventvs,this),this.onGameResult(1))},t.prototype.getEnemy=function(e){for(var t=0,i=this.arrayPlay2.length;i>t;t++){var n=this.arrayPlay2[t];if(n.id==e)return n}return null},t.prototype.timer=function(){if(this.time-=1,this.time<10?this.bitmaptime.text="0"+this.time.toString():this.bitmaptime.text=this.time.toString(),this.time<4&&this.time>0){var e=App.TIME_COMMON;App.SoundManager.playEffect(e)}else if(0==this.time){var e=App.TIME_LAST;App.SoundManager.playEffect(e)}if(0==this.time||this.numScore1==t.MAX_SCORE||this.numScore2==t.MAX_SCORE){if(this.stop(),!App.CurrGameIsAi){var i={key:"timeOver"};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(i))}var n;this.numScore1>this.numScore2?n=1:this.numScore1<this.numScore2?n=3:this.numScore1==this.numScore2&&(n=1),this.onGameResult(n)}},t.prototype.onGameResult=function(e){egret.ExternalInterface.call("sendToNative","gameCanNotclick"),this.stop(),PcKeyBoardHelper.instance.removeListener(this),GameSceneView._gameScene.gameResult(e),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this)},t.prototype.start=function(){this.isRuning=!0,this.btn_jump.touchEnabled=!0,this.containerheight.touchEnabled=!0,this.isjian=!0,App.TimerManager.doFrame(1,0,this.run,this),this.jishiqi.start(),App.CurrGameIsAi&&App.TimerManager.doTimer(1e3,0,this.enemyAi,this)},t.prototype.stop=function(){this.isRuning&&(this.isRuning=!1,this.btn_jump.touchEnabled=!1,this.containerheight.touchEnabled=!1,this.isjian=!1,App.TimerManager.remove(this.run,this),App.TimerManager.remove(this.timer,this),App.TimerManager.remove(this.enemyAi,this),this.jishiqi.reset(),this.jishiqi.removeEventListener(egret.TimerEvent.TIMER,this.timer,this),App.SoundManager.stopBg())},t.prototype.enemyAi=function(){this.enemyJump()},t.prototype.createAiEnemy=function(){var e=++t.Character_ID,i=App.RandomUtils.limitInteger(50,350);this.onAddNewEnemy(e,t.GAME_WIDTH-i)},t.prototype.run=function(e){this.containerGame.tick(e),!this.selfJumpFlag&&this.characterMove(e,!0),!this.enemyJumpFlag&&this.characterMove(e,!1),this.onImpact()},t.prototype.onImpact=function(){if(this.checkFlag++,10==this.checkFlag){this.checkFlag=0;for(var e=this.arrayPlay1.length,t=e-1;t>=0;t--){var i=this.arrayPlay1[t];if(0!=i.status){this.rectangle1.setTo(i.x-.5*i.validWidth,i.y-i.validHeight,i.validWidth,i.validHeight);for(var n=this.arrayPlay2.length,s=n-1;s>=0;s--){var r=this.arrayPlay2[s];if(5!=r.status&&(this.rectangle2.setTo(r.x-.5*r.validWidth,r.y,r.validWidth,r.validHeight),App.RectangleUtils.intersects(this.rectangle1,this.rectangle2))){this.enemyJumpFlag&&this.selfJumpFlag?i.startJumptime>r.startJumptime?this.onBumpOut(i):this.onBumpOut(r):this.enemyJumpFlag&&!this.selfJumpFlag?this.onBumpOut(i):!this.enemyJumpFlag&&this.selfJumpFlag&&this.onBumpOut(r);break}}}}}},t.prototype.characterMove=function(e,i){for(var n=t.MOVE_SPEED,s=n*e,r=i?this.arrayPlay1:this.arrayPlay2,o=r.length-1;o>=0;o--){var a=r[o];a.currRect&&(a.status%2==0?a.x>s&&(a.x-=s):t.GAME_WIDTH-a.x>s&&(a.x+=s),a.currRect.parent||this.intoWater(a))}},t.prototype.removeCharacter=function(e,t,i){function n(){e.alpha=1,s.recoveryCharacter(e),e&&!e.isEnemy&&0==e.status&&s.onAddNewSelf()}if(void 0===t&&(t=!1),void 0===i&&(i="fallintowater"),e){egret.Tween.removeTweens(e);var s=this;t?(this.containerPeople.removeChild(e),""!=i&&(this.onParticleEffect(e.x,e.y,i),this.containerPeople.removeChild(e))):e.isEnemy?egret.Tween.get(e).to({y:e.y-150,alpha:0},350).call(n):egret.Tween.get(e).to({y:e.y+150,alpha:0},350).call(n)}if(e){var r=e.isEnemy?this.arrayPlay2:this.arrayPlay1,o=r.indexOf(e);r.splice(o,1)}},t.prototype.enemyIntoWater=function(e){this.removeCharacter(e)},t.prototype.enemybumpOut=function(e){this.removeCharacter(e,!1)},t.prototype.intoWater=function(e){if(App.CurrGameIsAi||!e.isEnemy){var t=App.RandomUtils.limitInteger(10,100)%2+1;if(App.isIOS)var i="fallWater_"+t+"_mp3";else var i="fallWater_"+t+"_ogg";if(App.SoundManager.playEffect(i),this.removeCharacter(e),!App.CurrGameIsAi){var n={key:"intoWater",characterID:e.id};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(n))}}},t.prototype.onBumpOut=function(e){if(App.CurrGameIsAi||!e.isEnemy){var t=App.RandomUtils.limitInteger(10,100)%2+1;if(App.isIOS)var i="push_"+t+"_mp3";else var i="push_"+t+"_ogg";if(App.SoundManager.playEffect(i),this.removeCharacter(e,!1),!App.CurrGameIsAi){var n={key:"BumpOut",characterID:e.id};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(n))}}},t.prototype.onLand=function(e,t){if((App.CurrGameIsAi||!e.isEnemy)&&(e.currRect=t,!App.CurrGameIsAi)){var i={key:"setRect",characterID:e.id,rectID:t.id,offsetX:e.x-t.x};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(i))}},t.prototype.enemyJump=function(){var e=this,t=App.RandomUtils.limitInteger(10,100)%2+1;if(App.isIOS)var i="jump_"+t+"_mp3";else var i="jump_"+t+"_ogg";App.SoundManager.playEffect(i),this.enemyJumpFlag=!0;for(var n=250,s=new Date,r=0;r<this.arrayPlay2.length;++r){var o=this.arrayPlay2[r];this.arrayPlay2[r].startJumptime=s.getTime(),o.status--,o.armature.play("jump02",1),egret.Tween.get(o).to({y:o.y+200},n).call(this.onJucde.bind(this,o))}egret.setTimeout(function(){e.enemyJumpFlag=!1,App.CurrGameIsAi&&e.createAiEnemy()},this,n)},t.prototype.onJump=function(){var e=this,t=App.RandomUtils.limitInteger(10,100)%2+1;if(App.isIOS)var i="jump_"+t+"_mp3";else var i="jump_"+t+"_ogg";App.SoundManager.playEffect(i),this.selfJumpFlag=!0,this.btn_jump.touchEnabled=!1,this.containerheight.touchEnabled=!1,this.isjian=!1;for(var n=250,s=new Date,r=0;r<this.arrayPlay1.length;++r){var o=this.arrayPlay1[r];this.arrayPlay1[r].startJumptime=s.getTime(),o.status++,o.armature.play("jump02",1),egret.Tween.get(o).to({y:o.y-200},n).call(this.onJucde.bind(this,o))}if(App.TimerManager.doTimer(n,1,function(){e.onAddNewSelf(),e.selfJumpFlag=!1,e.btn_jump.touchEnabled=!0,e.containerheight.touchEnabled=!0,e.isjian=!0},this),!App.CurrGameIsAi){var a={key:"jump"};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(a))}},t.prototype.enemyJumpSuccess=function(){var e=App.JUMP_SUCCESS;App.SoundManager.playEffect(e),this.numScore2++,this.numScore2=Math.min(this.numScore2,t.MAX_SCORE);var i=t.MAX_SCORE+1,n=Math.floor((i-this.numScore2-1)/i*this.img_blue.width);egret.Tween.get(this.img_blue.mask).to({x:n},500)},t.prototype.selfJumpSuccess=function(){var e=App.JUMP_SUCCESS;App.SoundManager.playEffect(e),this.numScore1++,this.numScore1=Math.min(this.numScore1,t.MAX_SCORE);var i=t.MAX_SCORE+1,n=Math.floor((this.numScore1+1)/i*this.img_red.width-this.img_red.width);if(egret.Tween.get(this.img_red.mask).to({x:n},500),!App.CurrGameIsAi){var s={key:"setScore"};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(s))}},t.prototype.onJucde=function(e){if(e.isEnemy){if(0==e.status)return this.onParticleEffect(e.x,e.y,"win1"),this.removeCharacter(e,!0,""),void(App.CurrGameIsAi&&this.enemyJumpSuccess())}else if(5==e.status)return this.onParticleEffect(e.x,e.y,"win1"),this.removeCharacter(e,!0,""),void this.selfJumpSuccess();e.localToGlobal(0,0,this.tmpPoint);var t;1==e.status?t=this.containerGame.tip1.hitTest(this.tmpPoint.x):2==e.status?t=this.containerGame.tip2.hitTest(this.tmpPoint.x):3==e.status?t=this.containerGame.tip3.hitTest(this.tmpPoint.x):4==e.status&&(t=this.containerGame.tip4.hitTest(this.tmpPoint.x)),t?this.onLand(e,t):this.intoWater(e)},t.prototype.dispose=function(){for(var e=Object.keys(t.Rects);e.length;){var i=e.pop();t.Rects[i]=null,delete t.Rects[i]}for(;this.arrayPlay1.length;){var n=this.arrayPlay1.pop();this.recoveryCharacter(n)}for(;this.arrayPlay2.length;){var n=this.arrayPlay2.pop();this.recoveryCharacter(n)}ObjectPool.clearClass("FrogCharacterSelf","dispose"),ObjectPool.clearClass("FrogCharacterEnemy","dispose")},t.prototype.armaturePlayEnd=function(e){var t=e.currentTarget.parent,i=t.parent;"fallintowater"==t.currAction&&(this.recoveryCharacter(i),i.isEnemy||0!=i.status||this.onAddNewSelf())},t.prototype.recoveryCharacter=function(e){e.armature.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.armaturePlayEnd,this),App.DisplayUtils.removeFromParent(e),ObjectPool.push(e)},t.prototype.onAddNewSelf=function(){var e=this.arrayPlay1.length;if(!e||0!=this.arrayPlay1[e-1].status){var i=ObjectPool.pop(FrogCharacter,"FrogCharacterSelf");if(i.init(1,"dbxiaoren00_game1"),i.id=++t.Character_ID,i.x=App.RandomUtils.limitInteger(500,1300),i.y=1050,i.status=0,i.currRect=null,i.armature.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.armaturePlayEnd,this),this.onParticleEffect(i.x,i.y,"newParticle"),this.containerPeople.addChild(i),this.arrayPlay1.push(i),!App.CurrGameIsAi){var n={key:"createCharacter",id:i.id,initX:i.x};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(n))}}},t.prototype.onAddNewEnemy=function(e,t){var i=ObjectPool.pop(FrogCharacter,"FrogCharacterEnemy");i.init(1,"dbxiaoren01_game1"),i.id=e,i.x=t,i.y=90,i.scaleY=-1,i.status=5,i.currRect=null,i.armature.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.armaturePlayEnd,this),this.containerPeople.addChild(i),this.arrayPlay2.push(i)},t.prototype.addAllLotusDb=function(){this.flower1=AssetManager.getQuickDBArmature("lotus"),this.flower1.scaleX=this.flower1.scaleY=.6,this.flower1.x=400,this.flower1.y=245+this.container.y,this.container.addChild(this.flower1),this.flower1.play("lotus",0),this.flower2=AssetManager.getQuickDBArmature("lotus"),this.flower2.scaleX=this.flower2.scaleY=.7,this.flower2.x=App.GameWidth-600,this.flower2.y=409+this.container.y,this.container.addChild(this.flower2),this.flower2.play("lotus"),this.flower3=AssetManager.getQuickDBArmature("lotus"),this.flower3.x=152,this.flower3.y=815+this.container.y,this.container.addChild(this.flower3),this.flower3.play("lotus");var e=AssetManager.getQuickDBArmature("lotus");e.scaleX=e.scaleY=.8,e.x=App.GameWidth-300,e.y=600+this.container.y,this.container.addChild(e),e.play("lotus")},t.prototype.addAllRainbow=function(){var e=App.DisplayUtils.createBitmap("caihong_png");this.containerheight.addChild(e),e.x=this.containerheight.width-e.width,e.y=335;var t=App.DisplayUtils.createBitmap("caihong_png");this.containerheight.addChild(t),t.scaleX=-1,t.x=t.width,t.y=533;var i=App.DisplayUtils.createBitmap("");i.width=this.containerheight.width,i.height=this.containerheight.height,this.containerheight.addChild(i),i.x=0,i.y=0},t.prototype.onParticleEffect=function(e,t,i){var n=RES.getRes(i+"_png"),s=RES.getRes(i+"_json"),r=new particle.GravityParticleSystem(n,s);r.y=t,r.x=e,this.containerEffect.addChild(r),r.start(500)},t.MOVE_SPEED=.1,t.IMPACT_parameter=.8,t.GAME_WIDTH=1920,t.GAME_HEIGHT=1080,t.Rect_ID=0,t.Character_ID=0,t.MAX_SCORE=12,t.Rects={},t.isNewScence=!0,t}(egret.DisplayObjectContainer);__reflect(GameLeonardFroG.prototype,"GameLeonardFroG");var GameLeonardFrogMap=function(e){function t(){var t=e.call(this)||this;return t.width=App.GameWidth,t.height=App.GameHeight-400,t}return __extends(t,e),t.prototype.createSelfTips=function(){this.tip1=new MoveTips(1);var e=this.tip1.create();this.tip2=new MoveTips(2);var t=this.tip2.create();return this.tip2.scaleX=-1,this.tip2.x=this.width,this.tip2.y=400,this.tip1.y=600,this.addChild(this.tip1),this.addChild(this.tip2),[e,t]},t.prototype.createEnemyTips=function(e,t){this.tip3=new MoveTips(3),this.tip3.full(t),this.tip4=new MoveTips(4),this.tip4.full(e),this.tip4.scaleX=-1,this.tip4.x=this.width,this.tip4.y=0,this.tip3.y=200,this.addChild(this.tip3),this.addChild(this.tip4)},t.prototype.tick=function(e){this.tip1.tick(e),this.tip2.tick(e),this.tip3.tick(e),this.tip4.tick(e)},t}(egret.DisplayObjectContainer);__reflect(GameLeonardFrogMap.prototype,"GameLeonardFrogMap");var MoveRect=function(e){function t(t,i){var n=e.call(this)||this;return n.space=i,n.flower1=AssetManager.getQuickDBArmature("lotus"),n.addChild(n.flower1),n.flower1.play("wood",0),n.img1=App.DisplayUtils.createBitmap("kuai"+t+"_png"),n.addChild(n.img1),n.flower1.x=0,n.flower1.y=n.img1.height/2,n}return __extends(t,e),t.prototype.hitTest=function(e){return this.parent?(this.tmpPoint?(this.tmpPoint.x+=(this.x-this.tmpX)*this.parent.scaleX,this.tmpX=this.x):(this.tmpPoint=new egret.Point,this.tmpX=this.x,-1==this.parent.scaleX?this.localToGlobal(this.img1.width,0,this.tmpPoint):this.localToGlobal(0,0,this.tmpPoint)),e>this.tmpPoint.x&&e<this.tmpPoint.x+this.img1.width?!0:!1):!1},t}(egret.DisplayObjectContainer);__reflect(MoveRect.prototype,"MoveRect");var MoveTips=function(e){function t(t){var i=e.call(this)||this;return i.num=t,i.tickNum=0,i.width=GameLeonardFroG.GAME_WIDTH,i.height=200,i.rects=[],i.tmpPoint=new egret.Point,i}return __extends(t,e),t.prototype.create=function(){for(var e=[],t=this.width,i=0,n=t;1.5*t>i;){var s=App.RandomUtils.limitInteger(1,3),r=App.RandomUtils.limitInteger(30,100);GameLeonardFroG.Rect_ID++;var o=new MoveRect(s,r);o.id=GameLeonardFroG.Rect_ID+"",n-=o.width,i+=o.width,o.x=n,o.y=.5*(this.height-o.height),this.rects.push(o),GameLeonardFroG.Rects[o.id]=o,n-=r,i+=r,e.push({id:o.id,resId:s,space:r})}return this.rects=this.rects.reverse(),this.rectsLen=this.rects.length,e},t.prototype.full=function(e){var t=this,i=this.width,n=i;e.forEach(function(e){var i=e.resId,s=e.space,r=e.id,o=new MoveRect(i,s);o.id=r,n-=o.width,o.x=n,o.y=.5*(t.height-o.height),t.rects.push(o),GameLeonardFroG.Rects[o.id]=o,n-=s}),this.rects=this.rects.reverse(),this.rectsLen=this.rects.length},t.prototype.tick=function(e){var t=GameLeonardFroG.MOVE_SPEED,i=t*e,n=this.width,s=!1;0==this.tickNum&&(s=!0),this.tickNum++,this.tickNum>5&&(this.tickNum=0);for(var r=0,o=this.rectsLen;o>r;r++){var a=this.rects[r];a.x+=i,s&&(a.x+a.width>=0&&a.x<=n?App.DisplayUtils.quickAddChild(this,a):App.DisplayUtils.quickRemoveChild(a))}var h=this.rects[this.rectsLen-1];if(h.x>n){var c=this.rects[0];h.x=c.x-c.space-h.width,this.rects.pop(),this.rects.splice(0,0,h)}},t.prototype.hitTest=function(e){for(var t=0,i=this.rectsLen;i>t;t++){var n=this.rects[t];if(n.hitTest(e))return n}return null},t}(egret.DisplayObjectContainer);__reflect(MoveTips.prototype,"MoveTips");var mvs;!function(e){var t=function(){function t(){this._engine=null,this._response=null,this._engine=new MatchvsEngine}return Object.defineProperty(t,"getInstance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t,i,n){this._response=e.MsResponse.getInstance.getResponse();var s=this._engine.init(e.MsResponse.getInstance.getResponse(),t,i,n);return 0!==s?(console.info("[MsEngine init failed] resCode:",s),s):(console.info("[MsEngine init seccess] resCode:",s),s)},t.prototype.setRegisterHost=function(e){var t=this._engine.setRegisterHost(e);return t},t.prototype.premiseInit=function(t,i){this._response=e.MsResponse.getInstance.getResponse();var n=this._engine.premiseInit(e.MsResponse.getInstance.getResponse(),t,i);return 0!==n?(console.info("[MsEngine premiseInit failed] resCode:",n),n):(console.info("[MsEngine premiseInit seccess] resCode:",n),n)},t.prototype.login=function(e,t,i,n,s){var r=this._engine.login(e,t,i,1,n,s,"eglejjddg",0);return console.info("[MsEngine login] resCode:",r),r},t.prototype.registerUser=function(){var e=this._engine.registerUser();return 0!==e?(console.error("[MsEngine registerUser failed] resCode:",e),e):(console.info("[MsEngine registerUser seccess] resCode:",e),e)},t.prototype.joinRandomRoom=function(e,t){var i=this._engine.joinRandomRoom(e,t);return console.info("[MsEngine joinRandomRoom ] resCode:",i),i},t.prototype.joinRoomWithProperties=function(e,t){var i=this._engine.joinRoomWithProperties(e,t);return console.info("[MsEngine joinRandomRoom ] resCode:",i),i},t.prototype.joinRoom=function(e,t){var i=this._engine.joinRoom(e,t);return i},t.prototype.createRoom=function(e,t){var i=this._engine.createRoom(e,t);return console.info("[MsEngine createRoom ] resCode:",i,JSON.stringify(e),t),i},t.prototype.joinOver=function(e){var t=this._engine.joinOver(e);return console.info("[MsEngine joinOver ] resCode:",t),t},t.prototype.joinOpen=function(e){var t=this._engine.joinOpen(e);return console.info("[MsEngine joinOpen ] resCode:",t),t},t.prototype.leaveRoom=function(e){var t=this._engine.leaveRoom(e);return console.info("[MsEngine leaveRoom ] resCode:",t),t},t.prototype.sendEvent=function(e){var t=this._engine.sendEvent(e);return t},t.prototype.sendEventEx=function(e,t,i,n){var s=this._engine.sendEventEx(e,t,i,n);return s},t.prototype.sendFrameEvent=function(e){var t=this._engine.sendFrameEvent(e);return console.info("[MsEngine sendFrameEvent ] resCode:",t),t},t.prototype.setFrameSync=function(e){var t=this._engine.setFrameSync(e);return console.info("[MsEngine setFrameSync ] resCode:",t),t},t.prototype.logOut=function(){var e=this._engine.logout("退出登录");return console.info("[MsEngine setFrameSync ] resCode:",e),e},t.prototype.kickPlayer=function(e,t){var i=this._engine.kickPlayer(e,t);return console.info("[MsEngine kickPlayer ] resCode:",i),i},t.prototype.getRoomDetail=function(e){var t=this._engine.getRoomDetail(e);return console.info("[MsEngine getRoomDetail ] resCode:",t),t},t.prototype.getRoomList=function(e){var t=this._engine.getRoomList(e);return console.info("[MsEngine getRoomList ] resCode:",t),t},t.prototype.getRoomListEx=function(e){var t=this._engine.getRoomListEx(e);return console.info("[MsEngine getRoomListEx ] resCode:",t),t},t.prototype.setRoomProperty=function(e,t){var i=this._engine.setRoomProperty(e,t);return console.info("[MsEngine setRoomProperty ] resCode:",i),i},t.prototype.reconnect=function(){var e=this._engine.reconnect();return console.info("[MsEngine reconnect ]",e),e},t._instance=null,t}();e.MsEngine=t,__reflect(t.prototype,"mvs.MsEngine")}(mvs||(mvs={}));var mvs;!function(e){var t=function(){function e(){}return e.EVENT_INIT_RSP="MATCHVS_INIT_EVENT",e.EVENT_REGISTERUSER_RSP="MATCHVS_REGISTERUSER_EVENT",e.EVENT_LOGIN_RSP="MATCHVS_LOGIN_EVENT",e.EVENT_JOINROOM_RSP="MATCHVS_JOINROOM_EVENT",e.EVENT_JOINROOM_NTFY="MATCHVS_JOINROOM_NOTIFY_EVENT",e.EVENT_CREATEROOM_RSP="MATCHVS_CREATEROOM_RSP_EVENT",e.EVENT_SENDEVENT_RSP="MATCHVS_SENDEVENT_RSP_EVENT",e.EVENT_SENDEVENT_NTFY="MATCHVS_SENDEVENT_NOTIFY_EVENT",e.EVENT_SENDEVENT_CHUANG="MATCHVS_SENDEVENT_RSP_EVENT_chuang",e.EVENT_GAMESERVER_NTFY="MATCHVS_GAMESERVER_NOTIFY_EVENT",e.EVENT_LEAVEROOM_RSP="MATCHVS_LEAVEROOM_RSP_EVENT",e.EVENT_LEAVEROOM_NTFY="MATCHVS_LEAVEROOM_NTFY_EVENT",e.EVENT_JOINOVER_RSP="MATCHVS_JOINOVER_RSP_EVENT",e.EVENT_JOINOVER_NTFY="MATCHVS_LEAVEROOM_EVENT",e.EVENT_JOINOPEN_RSP="MATCHVS_JOINOPEN_RSP_EVENT",e.EVENT_JOINOPEN_NTFY="MATCHVS_JOINOPEN_NTFY_EVENT",e.EVENT_NETWORKSTATE_NTFY="MATCHVS_NETWORKSTATE_NTFY",e.EVENT_SENDFRAME_RSP="MATCHVS_SENDFRAME_RSP_EVENT",e.EVENT_SETFRAMESYNC_RSP="MATCHVS_SETFRAMESYNC_RSP_EVENT",e.EVENT_FRAMEUPDATE="MATCHVS_FRAMEUPDATE_EVENT",e.EVENT_ERROR_RSP="MATCHVS_ERROR_RSP_EVENT",e.EVENT_LOGOUT_RSP="MATCHVS_LOGOUT_RSP_EVENT",e.EVENT_SETROOMPROPERTY_RSP="MATCHVS_SETROOMPROPERTY_RSP_EVENT",e.EVENT_SETROOMPROPERTY_NTFY="MATCHVS_SETROOMPROPERTY_NTFY_EVENT",e.EVENT_KICKPLAYER_RSP="MATCHVS_KICKPLAYER_RSP_EVENT",e.EVENT_KICKPLAYER_NTFY="MATCHVS_KICKPLAYER_NTFY_EVENT",e.EVENT_GETROOMLIST_RSP="MATCHVS_GETROOMLIST_RSP_EVENT",e.EVENT_GETROOMLIST_EX_RSP="MATCHVS_GETROOMLIST_EX_RSP_EVENT",e.EVENT_GETROOMDETAIL_RSP="MATCHVS_GETROOMDETAIL_RSP_EVENT",e.EVENT_RECONNECT_RSP="MATCHVS_RECONNECT_RSP_EVENT",e}();e.MsEvent=t,__reflect(t.prototype,"mvs.MsEvent")}(mvs||(mvs={}));var mvs;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.reframe=[],e.startTime=0,e.endTime=0,e.frist=0,e.re100=0,e.re70=0,e.re200=0,e.re60=0,e.re40=0,e._response=null,e.registResponseCall(),e}return __extends(i,t),Object.defineProperty(i,"getInstance",{get:function(){return null==i._instance&&(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.release=function(){i._instance._response=null,i._instance=null},i.prototype.getResponse=function(){return null==this._response&&this.registResponseCall(),this._response},i.prototype.registResponseCall=function(){this._response=new MatchvsResponse,this._response.initResponse=this.initResponse.bind(this),this._response.registerUserResponse=this.registerUserResponse.bind(this),this._response.loginResponse=this.loginResponse.bind(this),this._response.joinRoomResponse=this.joinRoomResponse.bind(this),this._response.joinRoomNotify=this.joinRoomNotify.bind(this),this._response.createRoomResponse=this.createRoomResponse.bind(this),this._response.sendEventResponse=this.sendEventResponse.bind(this),this._response.sendEventNotify=this.sendEventNotify.bind(this),this._response.gameServerNotify=this.gameServerNotify.bind(this),this._response.joinOverResponse=this.joinOverResponse.bind(this),this._response.joinOverNotify=this.joinOverNotify.bind(this),this._response.leaveRoomResponse=this.leaveRoomResponse.bind(this),this._response.leaveRoomNotify=this.leaveRoomNotify.bind(this),this._response.networkStateNotify=this.networkStateNotify.bind(this),this._response.setFrameSyncResponse=this.setFrameSyncResponse.bind(this),this._response.frameUpdate=this.frameUpdate.bind(this),this._response.errorResponse=this.errorResponse.bind(this),this._response.logoutResponse=this.logOutResponse.bind(this),this._response.joinOpenResponse=this.joinOpenResponse.bind(this),this._response.joinOpenNotify=this.joinOpenNotify.bind(this),this._response.kickPlayerNotify=this.kickPlayerNotify.bind(this),this._response.kickPlayerResponse=this.kickPlayerResponse.bind(this),this._response.setRoomPropertyNotify=this.setRoomPropertyNotify.bind(this),this._response.setRoomPropertyResponse=this.setRoomPropertyResponse.bind(this),this._response.getRoomDetailResponse=this.getRoomDetailResponse.bind(this),this._response.getRoomListExResponse=this.getRoomListExResponse.bind(this),this._response.getRoomListResponse=this.getRoomListResponse.bind(this),this._response.reconnectResponse=this.reconnectResponse.bind(this)},i.prototype.initResponse=function(t){console.info("initResponse status：",t),this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_INIT_RSP,!1,!1,{status:t}))},i.prototype.registerUserResponse=function(t){console.info("registerUserResponse userInfo ",JSON.stringify(t)),this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_REGISTERUSER_RSP,!1,!1,t))},i.prototype.loginResponse=function(t){console.info("[loginResponse] "+JSON.stringify(t)),this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_LOGIN_RSP,!1,!1,t))},i.prototype.joinRoomResponse=function(t,i,n){if(200==t){var s={status:t,userList:i,roomInfo:n};return void this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_JOINROOM_RSP,!1,!1,s))}409==t&&GameSceneView._gameScene.lobby(),console.error("[joinRoomResponse error:]",t)},i.prototype.joinRoomNotify=function(t){console.info("[joinRoomNotify] "+t.userProfile);var i={userId:t.userId,userProfile:t.userProfile};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_JOINROOM_NTFY,!1,!1,i))},i.prototype.createRoomResponse=function(t){console.info("[sendEventResponse]"+JSON.stringify(t));var i={status:t.status,roomID:t.roomID,owner:t.owner};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_CREATEROOM_RSP,!1,!1,i))},i.prototype.sendEventResponse=function(t){var i={status:t.status,sequence:t.sequence};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_SENDEVENT_RSP,!1,!1,i))},i.prototype.sendEventNotify=function(t){var i={srcUserId:t.srcUserId,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_SENDEVENT_NTFY,!1,!1,i))},i.prototype.gameServerNotify=function(t){console.info("[gameServerNotify] ");var i={srcUserId:t.srcUserId,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_GAMESERVER_NTFY,!1,!1,i))},i.prototype.joinOverResponse=function(t){console.info("[joinOverResponse] "+JSON.stringify(t));var i={status:t.status,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_JOINOVER_RSP,!1,!1,i))},i.prototype.joinOverNotify=function(t){console.info("[joinOverNotify] ");var i={roomID:t.roomID,userID:t.srcUserID,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_JOINOVER_NTFY,!1,!1,i))},i.prototype.leaveRoomResponse=function(t){console.info("[leaveRoomResponse] status: "+t.status);var i={roomID:t.roomID,status:t.status,userId:t.userId,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_LEAVEROOM_RSP,!1,!1,i))},i.prototype.leaveRoomNotify=function(t){console.info("[leaveRoomNotify] "+t.userId);var i={roomID:t.roomID,userId:t.userId,owner:t.owner,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_LEAVEROOM_NTFY,!1,!1,i))},i.prototype.networkStateNotify=function(t){console.info("[networkStateNotify] state: "+t.state);var i={roomID:t.roomID,userID:t.userID,owner:t.owner,state:t.state};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_NETWORKSTATE_NTFY,!1,!1,i))},i.prototype.setFrameSyncResponse=function(t){var i={mStatus:t.mStatus};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_SETFRAMESYNC_RSP,!1,!1,i))},i.prototype.frameUpdate=function(t){var i={frameIndex:t.frameIndex,frameItems:t.frameItems,frameWaitCount:t.frameWaitCount};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_FRAMEUPDATE,!1,!1,i))},i.prototype.errorResponse=function(t,i){console.info("[setFrameSyncResponse] errCode:"+t+" errMsg:"+i);var n={errCode:t,errMsg:i};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_ERROR_RSP,!1,!1,n))},i.prototype.logOutResponse=function(t){console.info("[logOutResponse] status:",t);var i={status:t};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_LOGOUT_RSP,!1,!1,i))},i.prototype.joinOpenResponse=function(t){console.info("[joinOpenResponse] info:",t.status);var i={status:t.status,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_JOINOPEN_RSP,!1,!1,i))},i.prototype.joinOpenNotify=function(t){console.info("[joinOpenResponse] info:");var i={roomID:t.roomID,userID:t.userID,cpProto:t.cpProto};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_JOINOPEN_NTFY,!1,!1,i))},i.prototype.kickPlayerNotify=function(t){console.info("[kickPlayerNotify] info:");var i={cpProto:t.cpProto,owner:t.owner,srcUserId:t.srcUserId,userID:t.userID};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_KICKPLAYER_NTFY,!1,!1,i))},i.prototype.kickPlayerResponse=function(t){console.info("[kickPlayerResponse] info:"+t.status);var i={owner:t.owner,userID:t.userID,status:t.status};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_KICKPLAYER_RSP,!1,!1,i))},i.prototype.setRoomPropertyNotify=function(t){console.info("[setRoomPropertyNotify] info:");var i={roomID:t.roomID,userID:t.userID,roomProperty:t.roomProperty};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_SETROOMPROPERTY_NTFY,!1,!1,i))},i.prototype.setRoomPropertyResponse=function(t){console.info("[setRoomPropertyResponse] info:",t.status);var i={roomID:t.roomID,userID:t.userID,roomProperty:t.roomProperty,status:t.status};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_SETROOMPROPERTY_RSP,!1,!1,i))},i.prototype.getRoomDetailResponse=function(t){console.info("[getRoomDetailResponse] info:",t.status);var i={canWatch:t.canWatch,createFlag:t.createFlag,maxPlayer:t.maxPlayer,mode:t.mode,owner:t.owner,roomProperty:t.roomProperty,state:t.state,status:t.status,userInfos:t.userInfos};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_GETROOMDETAIL_RSP,!1,!1,i))},i.prototype.getRoomListExResponse=function(t){console.info("[getRoomListExResponse] info:",t.status);var i={roomAttrs:t.roomAttrs,status:t.status,total:t.total};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_GETROOMLIST_EX_RSP,!1,!1,i))},i.prototype.getRoomListResponse=function(t,i){console.info("[getRoomListResponse] info:",t);var n={status:t,roomInfos:i};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_GETROOMLIST_RSP,!1,!1,n))},i.prototype.reconnectResponse=function(t,i,n){console.info("[reconnectResponse] info:",t);var s={status:t,roomUserInfoList:i,roomInfo:n};this.dispatchEvent(new egret.Event(e.MsEvent.EVENT_RECONNECT_RSP,!1,!1,s))},i.prototype.frameUpdatequality=function(){var e=(new Date).valueOf();if(0==this.startTime?(this.startTime=e,this.frist=e):this.endTime=e,this.endTime-this.startTime>=5e5)for(var t=0,i=0;i<this.reframe.length;i++)t+=this.reframe[i];else{var n=e-this.frist;0!==this.frist&&this.reframe.push(n),n>=40&&60>=n?this.re60++:40>n?this.re40++:n>60&&100>n?this.re70++:n>100&&200>n?this.re100++:n>200&&this.re200++}this.frist=e},i._instance=null,i}(egret.EventDispatcher);e.MsResponse=t,__reflect(t.prototype,"mvs.MsResponse")
}(mvs||(mvs={}));var EventMessage=function(){function e(){}return e.GameLeave="GameLeave",e.GameGiveUp="GameGiveUp",e.gameCloseGiveUp="gameCloseGiveUp",e.GameExpress="GameExpress",e.GameSendExpress="GameSendExpress",e.ReddotChange="reddotChange",e.ChangeAvatar="changeAvatar",e.WechatAppShow="WechatAppShow",e.WechatShareSuccess="WechatShareSuccess",e.ChatListChange="ChatListChange",e.gameResultLeave="gameResultLeave",e.OpenChatRoomView="OpenChatRoomView",e.OpenHomePageView="OpenHomePageView",e.gameCloseExpress="gameCloseExpress",e.GameGetSkinView="GameGetSkinView",e.MoneyChange="MoneyChange",e.ResumeDanmu="ResumeDanmu",e.BarrageBtnPos="BarrageBtnPos",e.GameSureSelect="GameSureSelect",e.HomePageViewData="HomePageViewData",e.leaderboardSetScore="leaderboardSetScore",e.pauseMessage="pauseMessage",e.SendGameResultC2S="SendGameResultC2S",e.SendGameEventC2S="SendGameEventC2S",e.ReceiveGameEventS2C="ReceiveGameEventS2C",e.ReceiveGameResultS2C="ReceiveGameResultS2C",e.AddErrQuestionC2S="AddErrQuestionC2S",e.GetQuestionsC2S="GetQuestionsC2S",e.GetDataC2S="GetDataC2S",e}();__reflect(EventMessage.prototype,"EventMessage");var qr;!function(e){var t=function(){function t(t){this.mode=e.QRMode.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var i=0,n=this.data.length;n>i;i++){var s=[],r=this.data.charCodeAt(i);r>65536?(s[0]=240|(1835008&r)>>>18,s[1]=128|(258048&r)>>>12,s[2]=128|(4032&r)>>>6,s[3]=128|63&r):r>2048?(s[0]=224|(61440&r)>>>12,s[1]=128|(4032&r)>>>6,s[2]=128|63&r):r>128?(s[0]=192|(1984&r)>>>6,s[1]=128|63&r):s[0]=r,this.parsedData.push(s)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return t.prototype.getLength=function(e){return this.parsedData.length},t.prototype.write=function(e){for(var t=0,i=this.parsedData.length;i>t;t++)e.put(this.parsedData[t],8)},t}();e.QR8bitByte=t,__reflect(t.prototype,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){this.buffer=[],this.length=0}return e.prototype.get=function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},e.prototype.put=function(e,t){for(var i=0;t>i;i++)this.putBit(1==(e>>>t-i-1&1))},e.prototype.getLengthInBits=function(){return this.length},e.prototype.putBit=function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++},e}();e.QRBitBuffer=t,__reflect(t.prototype,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(){}return t.create=function(i,n,s,r,o){void 0===n&&(n=0),void 0===s&&(s=200),void 0===r&&(r=200),void 0===o&&(o=2);var a={width:s,height:r,correctLevel:e.QRErrorCorrectLevel.H,color:n},h=new e.QRCodeModel(e.QRUtil._getTypeNumber(i,a.correctLevel),a.correctLevel);return h.addData(i),h.make(),t.draw(h,a)},t.draw=function(e,t){var i=new egret.Sprite,t=t,n=e.getModuleCount(),s=Math.floor(t.width/n),r=Math.floor(t.height/n);i.graphics.beginFill(t.color);for(var o=0;n>o;o++)for(var a=0;n>a;a++){var h=e.isDark(o,a);h&&i.graphics.drawRect(a*s,o*r,s,r)}return i.graphics.endFill(),i},t}();e.QRCode=t,__reflect(t.prototype,"qr.QRCode")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return t.prototype.addData=function(t){var i=new e.QR8bitByte(t);this.dataList.push(i),this.dataCache=null},t.prototype.isDark=function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},t.prototype.getModuleCount=function(){return this.moduleCount},t.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},t.prototype.makeImpl=function(e,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[n][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,i),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},t.prototype.setupPositionProbePattern=function(e,t){for(var i=-1;7>=i;i++)if(!(-1>=e+i||this.moduleCount<=e+i))for(var n=-1;7>=n;n++)-1>=t+n||this.moduleCount<=t+n||(i>=0&&6>=i&&(0==n||6==n)||n>=0&&6>=n&&(0==i||6==i)||i>=2&&4>=i&&n>=2&&4>=n?this.modules[e+i][t+n]=!0:this.modules[e+i][t+n]=!1)},t.prototype.getBestMaskPattern=function(){for(var t=0,i=0,n=0;8>n;n++){this.makeImpl(!0,n);var s=e.QRUtil.getLostPoint(this);(0==n||t>s)&&(t=s,i=n)}return i},t.prototype.createMovieClip=function(e,t,i){var n=e.createEmptyMovieClip(t,i),s=1;this.make();for(var r=0;r<this.modules.length;r++)for(var o=r*s,a=0;a<this.modules[r].length;a++){var h=a*s,c=this.modules[r][a];c&&(n.beginFill(0,100),n.moveTo(h,o),n.lineTo(h+s,o),n.lineTo(h+s,o+s),n.lineTo(h,o+s),n.endFill())}return n},t.prototype.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},t.prototype.setupPositionAdjustPattern=function(){for(var t=e.QRUtil.getPatternPosition(this.typeNumber),i=0;i<t.length;i++)for(var n=0;n<t.length;n++){var s=t[i],r=t[n];if(null==this.modules[s][r])for(var o=-2;2>=o;o++)for(var a=-2;2>=a;a++)-2==o||2==o||-2==a||2==a||0==o&&0==a?this.modules[s+o][r+a]=!0:this.modules[s+o][r+a]=!1}},t.prototype.setupTypeNumber=function(t){for(var i=e.QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var s=!t&&1==(i>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=s}for(var n=0;18>n;n++){var s=!t&&1==(i>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=s}},t.prototype.setupTypeInfo=function(t,i){for(var n=this.errorCorrectLevel<<3|i,s=e.QRUtil.getBCHTypeInfo(n),r=0;15>r;r++){var o=!t&&1==(s>>r&1);6>r?this.modules[r][8]=o:8>r?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var r=0;15>r;r++){var o=!t&&1==(s>>r&1);8>r?this.modules[8][this.moduleCount-r-1]=o:9>r?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!t},t.prototype.mapData=function(t,i){for(var n=-1,s=this.moduleCount-1,r=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var h=0;2>h;h++)if(null==this.modules[s][a-h]){var c=!1;o<t.length&&(c=1==(t[o]>>>r&1));var p=e.QRUtil.getMask(i,s,a-h);p&&(c=!c),this.modules[s][a-h]=c,r--,-1==r&&(o++,r=7)}if(s+=n,0>s||this.moduleCount<=s){s-=n,n=-n;break}}},t.createData=function(i,n,s){for(var r=e.QRRSBlock.getRSBlocks(i,n),o=new e.QRBitBuffer,a=0;a<s.length;a++){var h=s[a];o.put(h.mode,4),o.put(h.getLength(),e.QRUtil.getLengthInBits(h.mode,i)),h.write(o)}for(var c=0,a=0;a<r.length;a++)c+=r[a].dataCount;if(o.getLengthInBits()>8*c)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*c+")");for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c)&&(o.put(t.PAD0,8),!(o.getLengthInBits()>=8*c));)o.put(t.PAD1,8);return t.createBytes(o,r)},t.createBytes=function(t,i){for(var n=0,s=0,r=0,o=new Array(i.length),a=new Array(i.length),h=0;h<i.length;h++){var c=i[h].dataCount,p=i[h].totalCount-c;s=Math.max(s,c),r=Math.max(r,p),o[h]=new Array(c);for(var l=0;l<o[h].length;l++)o[h][l]=255&t.buffer[l+n];n+=c;var m=e.QRUtil.getErrorCorrectPolynomial(p),u=new e.QRPolynomial(o[h],m.getLength()-1),d=u.mod(m);a[h]=new Array(m.getLength()-1);for(var l=0;l<a[h].length;l++){var g=l+d.getLength()-a[h].length;a[h][l]=g>=0?d.get(g):0}}for(var v=0,l=0;l<i.length;l++)v+=i[l].totalCount;for(var _=new Array(v),f=0,l=0;s>l;l++)for(var h=0;h<i.length;h++)l<o[h].length&&(_[f++]=o[h][l]);for(var l=0;r>l;l++)for(var h=0;h<i.length;h++)l<a[h].length&&(_[f++]=a[h][l]);return _},t.PAD0=236,t.PAD1=17,t}();e.QRCodeModel=t,__reflect(t.prototype,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.L=1,e.M=0,e.Q=3,e.H=2,e}();e.QRErrorCorrectLevel=t,__reflect(t.prototype,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var qr;!function(e){var t=function(){function e(){}return e.glog=function(t){return e.isInit||e.init(),1>t&&console.info("错误:n="+t),e.LOG_TABLE[t]},e.gexp=function(t){for(e.isInit||e.init();0>t;)t+=255;for(;t>=256;)t-=255;return e.EXP_TABLE[t]},e.init=function(){e.isInit=!0;for(var t=0;8>t;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;256>t;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;255>t;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t},e.EXP_TABLE=new Array(256),e.LOG_TABLE=new Array(256),e}();e.QRMath=t,__reflect(t.prototype,"qr.QRMath")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.MODE_NUMBER=1,e.MODE_ALPHA_NUM=2,e.MODE_8BIT_BYTE=4,e.MODE_KANJI=8,e}();e.QRMode=t,__reflect(t.prototype,"qr.QRMode")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var n=0;n<e.length-i;n++)this.num[n]=e[n+i]}return t.prototype.get=function(e){return this.num[e]},t.prototype.getLength=function(){return this.num.length},t.prototype.multiply=function(i){for(var n=new Array(this.getLength()+i.getLength()-1),s=0;s<this.getLength();s++)for(var r=0;r<i.getLength();r++)n[s+r]^=e.QRMath.gexp(e.QRMath.glog(this.get(s))+e.QRMath.glog(i.get(r)));return new t(n,0)},t.prototype.mod=function(i){if(this.getLength()-i.getLength()<0)return this;for(var n=e.QRMath.glog(this.get(0))-e.QRMath.glog(i.get(0)),s=new Array(this.getLength()),r=0;r<this.getLength();r++)s[r]=this.get(r);for(var r=0;r<i.getLength();r++)s[r]^=e.QRMath.gexp(e.QRMath.glog(i.get(r))+n);return new t(s,0).mod(i)},t}();e.QRPolynomial=t,__reflect(t.prototype,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){this.totalCount=e,this.dataCount=t}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(e,i){var n=t.getRsBlockTable(e,i);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+i);for(var s=n.length/3,r=[],o=0;s>o;o++)for(var a=n[3*o+0],h=n[3*o+1],c=n[3*o+2],p=0;a>p;p++)r.push(new t(h,c));return r},t.getRsBlockTable=function(i,n){switch(n){case e.QRErrorCorrectLevel.L:return t.RS_BLOCK_TABLE[4*(i-1)+0];case e.QRErrorCorrectLevel.M:return t.RS_BLOCK_TABLE[4*(i-1)+1];case e.QRErrorCorrectLevel.Q:return t.RS_BLOCK_TABLE[4*(i-1)+2];case e.QRErrorCorrectLevel.H:return t.RS_BLOCK_TABLE[4*(i-1)+3];default:return}},t}();e.QRRSBlock=t,__reflect(t.prototype,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(){}return t.getBCHTypeInfo=function(e){for(var i=e<<10;t.getBCHDigit(i)-t.getBCHDigit(t.G15)>=0;)i^=t.G15<<t.getBCHDigit(i)-t.getBCHDigit(t.G15);return(e<<10|i)^t.G15_MASK},t.getBCHTypeNumber=function(e){for(var i=e<<12;t.getBCHDigit(i)-t.getBCHDigit(t.G18)>=0;)i^=t.G18<<t.getBCHDigit(i)-t.getBCHDigit(t.G18);return e<<12|i},t.getBCHDigit=function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},t.getPatternPosition=function(e){return t.PATTERN_POSITION_TABLE[e-1]},t.getMask=function(t,i,n){switch(t){case e.QRMaskPattern.PATTERN000:return(i+n)%2==0;case e.QRMaskPattern.PATTERN001:return i%2==0;case e.QRMaskPattern.PATTERN010:return n%3==0;case e.QRMaskPattern.PATTERN011:return(i+n)%3==0;case e.QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case e.QRMaskPattern.PATTERN101:return i*n%2+i*n%3==0;case e.QRMaskPattern.PATTERN110:return(i*n%2+i*n%3)%2==0;case e.QRMaskPattern.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},t.getErrorCorrectPolynomial=function(t){for(var i=new e.QRPolynomial([1],0),n=0;t>n;n++)i=i.multiply(new e.QRPolynomial([1,e.QRMath.gexp(n)],0));return i},t.getLengthInBits=function(t,i){if(i>=1&&10>i)switch(t){case e.QRMode.MODE_NUMBER:return 10;case e.QRMode.MODE_ALPHA_NUM:return 9;case e.QRMode.MODE_8BIT_BYTE:return 8;case e.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>i)switch(t){case e.QRMode.MODE_NUMBER:return 12;case e.QRMode.MODE_ALPHA_NUM:return 11;case e.QRMode.MODE_8BIT_BYTE:return 16;case e.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>i))throw new Error("type:"+i);switch(t){case e.QRMode.MODE_NUMBER:return 14;case e.QRMode.MODE_ALPHA_NUM:return 13;case e.QRMode.MODE_8BIT_BYTE:return 16;case e.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},t.getLostPoint=function(e){for(var t=e.getModuleCount(),i=0,n=0;t>n;n++)for(var s=0;t>s;s++){for(var r=0,o=e.isDark(n,s),a=-1;1>=a;a++)if(!(0>n+a||n+a>=t))for(var h=-1;1>=h;h++)0>s+h||s+h>=t||(0!=a||0!=h)&&o==e.isDark(n+a,s+h)&&r++;r>5&&(i+=3+r-5)}for(var n=0;t-1>n;n++)for(var s=0;t-1>s;s++){var c=0;e.isDark(n,s)&&c++,e.isDark(n+1,s)&&c++,e.isDark(n,s+1)&&c++,e.isDark(n+1,s+1)&&c++,(0==c||4==c)&&(i+=3)}for(var n=0;t>n;n++)for(var s=0;t-6>s;s++)e.isDark(n,s)&&!e.isDark(n,s+1)&&e.isDark(n,s+2)&&e.isDark(n,s+3)&&e.isDark(n,s+4)&&!e.isDark(n,s+5)&&e.isDark(n,s+6)&&(i+=40);for(var s=0;t>s;s++)for(var n=0;t-6>n;n++)e.isDark(n,s)&&!e.isDark(n+1,s)&&e.isDark(n+2,s)&&e.isDark(n+3,s)&&e.isDark(n+4,s)&&!e.isDark(n+5,s)&&e.isDark(n+6,s)&&(i+=40);for(var p=0,s=0;t>s;s++)for(var n=0;t>n;n++)e.isDark(n,s)&&p++;var l=Math.abs(100*p/t/t-50)/5;return i+=10*l},t.prototype.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},t._getTypeNumber=function(i,n){for(var s=1,r=t._getUTF8Length(i),o=0,a=t.QRCodeLimitLength.length;a>=o;o++){var h=0;switch(n){case e.QRErrorCorrectLevel.L:h=t.QRCodeLimitLength[o][0];break;case e.QRErrorCorrectLevel.M:h=t.QRCodeLimitLength[o][1];break;case e.QRErrorCorrectLevel.Q:h=t.QRCodeLimitLength[o][2];break;case e.QRErrorCorrectLevel.H:h=t.QRCodeLimitLength[o][3]}if(h>=r)break;s++}if(s>t.QRCodeLimitLength.length)throw new Error("Too long data");return s},t._getUTF8Length=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)},t.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],t.G15=1335,t.G18=7973,t.G15_MASK=21522,t.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],t}();e.QRUtil=t,__reflect(t.prototype,"qr.QRUtil")}(qr||(qr={}));var RoleAvatar=function(){function e(e,t,i){if(void 0===i&&(i="dbxiaoren00"),this._armature=AssetManager.getDBArmature(i),null!=this._armature&&(this._headContainer=new egret.Sprite,this._head=new RoleHeadImage(t),this._head.x=.5*-this._head.width,this._head.y=.5*-this._head.height,this._headContainer.addChild(this._head),this._armature.replaceSlot("tou",this._headContainer),1!=e)){(null==e||void 0==e)&&(e=2);var n=this.getDbRes(e),s=this.getAvatarRes(e),r=function(){if(this._armature){var e=AssetManager.dbFactory.getArmatureData(n);if(e){var t=e.defaultSkin;this._armature.replaceSkin(t),this._armature.replaceSlot("tou",this._headContainer)}}}.bind(this);RES.getRes(s[0])?r():(App.ResourceUtils.createGroup(n,s),App.ResourceUtils.loadGroup(n,function(){AssetManager.loadDBAnimation([n]),r()},function(){},this))}}return Object.defineProperty(e.prototype,"avatarConfig",{get:function(){return RES.getRes("avatar_json")},enumerable:!0,configurable:!0}),e.prototype.getDbRes=function(e){var t=RES.getRes("avatar_json");return t.base[e].res},e.prototype.getAvatarRes=function(e){var t=this.getDbRes(e);return[t+"_ske_json",t+"_tex_json",t+"_tex_png"]},Object.defineProperty(e.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._armature.dispose(),this._armature=null,this._head.dispose(),this._head=null},e}();__reflect(RoleAvatar.prototype,"RoleAvatar");var RoleHeadImage=function(e){function t(t,i,n,s){void 0===i&&(i="tou_png"),void 0===n&&(n=96),void 0===s&&(s=96);var r=e.call(this)||this;return r.userBase64=!1,r.imgUrl=t,r.maskRes=i,r.bitmap=new egret.Bitmap,r.bitmap.width=n,r.bitmap.height=s,r.bitmap.texture=RES.getRes("tou_png"),r.addChild(r.bitmap),r.imgUrl&&r.imgUrl.length?(r.LoadeAvatar(r.imgUrl,r),r):r}return __extends(t,e),t.prototype.setBitmap=function(e){this.bitmap&&e&&(this.bitmap.texture=e,this.maskRes&&(this.maskBitmap=App.DisplayUtils.createBitmap(this.maskRes),this.maskBitmap.width=this.bitmap.width,this.maskBitmap.height=this.bitmap.height,this.addChild(this.maskBitmap),this.bitmap.mask=this.maskBitmap,this.cacheAsBitmap=!0))},t.prototype.LoadeAvatar=function(e,t){var i=new egret.ImageLoader;i.crossOrigin="anonymous",i.load(e),i.once(egret.Event.COMPLETE,function(e){if(e.currentTarget.data){var i=new egret.Texture;i.bitmapData=e.currentTarget.data;var n=new egret.Bitmap(i);t.addChild(n),n.width=96,n.height=96,n.name="touxiang"}},this),this.maskRes&&(this.maskBitmap=App.DisplayUtils.createBitmap(this.maskRes),this.maskBitmap.width=this.bitmap.width,this.maskBitmap.height=this.bitmap.height,this.addChild(this.maskBitmap),this.bitmap.mask=this.maskBitmap,this.cacheAsBitmap=!0)},t.prototype.dispose=function(){this.removeChildren(),this.bitmap.texture=null,this.bitmap=null,this.maskBitmap&&(this.maskBitmap.texture=null,this.maskBitmap=null),this.userBase64&&Base64BitmapDataPool.reduceUseNum(this.imgUrl),this.cacheAsBitmap=!1},t}(egret.Sprite);__reflect(RoleHeadImage.prototype,"RoleHeadImage");var ErrorNote=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),"btn_return"==t?(this.btn_return=i,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this)):"lab_content"==t||"btn_reconnect"==t&&(this.btn_reconnect=i,this.btn_reconnect.visible=!1,this.btn_reconnect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonReconnRoom,this))},t.prototype.childrenCreated=function(){for(e.prototype.childrenCreated.call(this),this.height=this.stage.stageHeight,this.lab_userID.text="用户ID："+GameData.gameUser.id;GameData.intervalList.length>0;)clearTimeout(GameData.intervalList.pop())},t.prototype.SetErrorMsg=function(e){this.errMsg=e},t.prototype.showReconnect=function(){this.btn_reconnect.visible=!0},t.prototype.mbuttonReconnRoom=function(e){GameSceneView._gameScene.reconnectView()},t.prototype.mbuttonExitRoom=function(e){GameSceneView._gameScene.login()},t}(eui.Component);__reflect(ErrorNote.prototype,"ErrorNote",["eui.UIComponent","egret.DisplayObject"]);var GameResult=function(e){function t(){var t=e.call(this)||this;return t._userList=[],t}return __extends(t,e),t.prototype.getChilds=function(e,t){"lab_userID1"==e?this.lab_userID1=t:"lab_userID2"==e?this.lab_userID2=t:"lab_userID3"==e?this.lab_userID3=t:"lab_score1"==e?this.lab_score1=t:"lab_score2"==e?this.lab_score2=t:"lab_score3"==e?this.lab_score3=t:"btn_leave"==e?(this.btn_leave=t,this.btn_leave.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this)):"lab_roomID"==e&&(this.lab_roomID=t)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.getChilds(t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.showResutl()},t.prototype.setResult=function(e,t){this.roomID=t;for(var i=0;i<e.length;i++){var n=new GameUser;n.avatar=e[i].avatar,n.id=e[i].id,n.isOwner=e[i].isOwner,n.name=e[i].name,n.tableID=e[i].tableID,n.pValue=e[i].pValue,this._userList.push(n)}},t.prototype.showResutl=function(){this.lab_roomID.text="房间号："+this.roomID;for(var e=!1,t=0;t<this._userList.length;t++)this._userList[t].isOwner?(this.lab_userID1.text=this._userList[t].id,this.lab_score1.text=this._userList[t].pValue):e?(this.lab_userID3.text=this._userList[t].id,this.lab_score3.text=this._userList[t].pValue):(this.lab_userID2.text=this._userList[t].id,this.lab_score2.text=this._userList[t].pValue,e=!0)},t.prototype.mbuttonExitRoom=function(e){mvs.MsEngine.getInstance.leaveRoom("游戏玩完一次离开"),GameSceneView._gameScene.lobby(),GameData.isRoomOwner=!1,GameData.syncFrame=!1},t}(eui.Component);__reflect(GameResult.prototype,"GameResult",["eui.UIComponent","egret.DisplayObject"]);var MatchProperty=function(e){function t(){var t=e.call(this)||this;return t._tagsType={match:"tagsA"},t}return __extends(t,e),t.prototype.getChild=function(e,t){var i=this;"rad_A"==e?(this.rad_A=t,this.rad_A.addEventListener(egret.Event.CHANGE,this.radioChangeHandler,this)):"rad_B"==e?(this.rad_B=t,this.rad_B.addEventListener(egret.Event.CHANGE,this.radioChangeHandler,this)):"btn_start"==e?(this.btn_start=t,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mButtonMatchTouch,this)):"lab_userID"==e?(this.lab_userID=t,this.lab_userID.text="用户："+GameData.gameUser.id+"\n"+GameData.gameUser.name):"img_header"==e?(this.img_header=t,this.img_header.source=GameData.gameUser.avatar):"btn_return"==e?(this.btn_return=t,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this)):"rect_proA"==e?(this.rect_proA=t,this.rect_proA.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){i.rad_A.selected=!0,i.changeInfo(0)},this)):"rect_proB"==e&&(this.rect_proB=t,this.rect_proB.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){i.rad_B.selected=!0,i.changeInfo(1)},this))},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.getChild(t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.mbuttonExitRoom=function(e){GameSceneView._gameScene.lobby()},t.prototype.changeInfo=function(e){0==e?(this.rect_proA.fillColor=3490372,this.rect_proA.strokeWeight=2,this.rect_proB.fillColor=5592405,this.rect_proB.strokeWeight=0,this.lab_A.textColor=49632,this.lab_B.textColor=13619151,this._tagsType={match:"tagsA"}):(this.rect_proB.fillColor=3490372,this.rect_proB.strokeWeight=2,this.rect_proA.fillColor=5592405,this.rect_proA.strokeWeight=0,this.lab_B.textColor=49632,this.lab_A.textColor=13619151,this._tagsType={match:"tagsB"})},t.prototype.radioChangeHandler=function(e){this.changeInfo(e.target.value)},t.prototype.mButtonMatchTouch=function(e){GameData.matchType=GameData.tagsMatch,GameData.syncFrame=!1},t}(eui.Component);__reflect(MatchProperty.prototype,"MatchProperty",["eui.UIComponent","egret.DisplayObject"]);var MatchRoomID=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getChild=function(e,t){var i=this;"lab_userID"==e?(this.lab_userID=t,this.lab_userID.text="用户："+GameData.gameUser.id+"\n"+GameData.gameUser.name):"img_header"==e?(this.img_header=t,this.img_header.source=GameData.gameUser.avatar):"lab_note"==e?(this.lab_note=t,this.lab_note.visible=!1):"btn_return"==e?(this.btn_return=t,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this)):"btn_start"==e?(this.btn_start=t,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonEnterRoom,this)):"rect_roomID"==e?this.rect_roomID=t:"edt_roomID"==e&&(this.edt_roomID=t,this.edt_roomID.addEventListener(eui.UIEvent.CHANGE,function(e){i.roomIDIsOK()},this))},t.prototype.roomIDIsOK=function(){var e=this.edt_roomID.text;return""==e?void this.showNote("",!1):void(/^[0-9]+$/.test(e)?this.showNote("",!1):this.showNote("请求输入有效的房间号",!0))},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.getChild(t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.showNote=function(e,t){this.lab_note.visible=t,this.lab_note.text=e,t?(this.rect_roomID.strokeWeight=2,this.rect_roomID.strokeColor=16275544,this.rect_roomID.fillColor=16770533):(this.rect_roomID.strokeWeight=0,this.rect_roomID.strokeColor=16777215,this.rect_roomID.fillColor=16777215)},t.prototype.mbuttonExitRoom=function(e){GameSceneView._gameScene.lobby()},t.prototype.mbuttonEnterRoom=function(e){var t=this.edt_roomID.text;if(!/^[0-9]+$/.test(t)||""==t)return void this.showNote("无效的房间号",!0);var i={name:GameData.gameUser.name,avatar:GameData.gameUser.avatar},n=(JSON.stringify(i),new MsRoomFilter(GameData.maxPlayerNum,0,0,""));mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_GETROOMLIST_RSP,this.getRoomListResponse,this),mvs.MsEngine.getInstance.getRoomList(n)},t.prototype.getRoomListResponse=function(e){var t=e.data.status,i=e.data.roomInfos;if(200!==t)return void this.showNote("房间查询错误"+t,!0);for(var n=this.edt_roomID.text,s=!1,r=0;r<i.length;r++)i[r].roomID==n.trim()&&(s=!0);return 0==s?void this.showNote("没有查找到此房间，请重新输入",!0):void mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_GETROOMLIST_RSP,this.getRoomListResponse,this)},t}(eui.Component);__reflect(MatchRoomID.prototype,"MatchRoomID",["eui.UIComponent","egret.DisplayObject"]);var MatchUI=function(e){function t(){var t=e.call(this)||this;return t.joinFlag=1,t._isInRoom=!1,t.isOwner=!1,t.canStartGame=!1,t._playerList=[],t._roomID="",t.default_name="待加入",t.default_rect_color=5592405,t.initView(),t}return __extends(t,e),t.prototype.initView=function(){this.addMsResponseListen(),GameData.roomPropertyValue=GameData.roomPropertyType.mapA},t.prototype.getChilds=function(e,t){var i=this;switch(e){case"lab_roomID":this.lab_roomID=t;break;case"group_map":this.group_map=t,this.group_map.visible=!1;break;case"lab_userID":this.lab_userID=t,this.lab_userID.text="用户："+GameData.gameUser.id+"\n"+GameData.gameUser.name;break;case"lab_lobby":this.lab_lobby=t;break;case"lab_matchmode":this.lab_matchmode=t;break;case"lab_player1":this.lab_player1=t;break;case"lab_player2":this.lab_player2=t;break;case"lab_player3":this.lab_player3=t;break;case"lab_userID1":this.lab_userID1=t;break;case"lab_userID2":this.lab_userID2=t;break;case"lab_userID3":this.lab_userID3=t;break;case"rect_player1":this.rect_player1=t;break;case"rect_player2":this.rect_player2=t;break;case"rect_player3":this.rect_player3=t;break;case"img_owner":this.img_owner=t,this.img_owner.visible=!1;break;case"btn_start":this.btn_start=t,this.btn_start.enabled=!1,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonStartGameBtn,this);break;case"btn_return":this.btn_return=t,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonLeaveRoom,this);break;case"rad_mapA":this.rad_mapA=t,this.rad_mapA.enabled=!1,this.rad_mapA.addEventListener(egret.TouchEvent.TOUCH_TAP,this.radioChangeHandler,this);break;case"rad_mapB":this.rad_mapB=t,this.rad_mapB.enabled=!1,this.rad_mapB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.radioChangeHandler,this);break;case"btn_kick2":this.btn_kick2=t,this.btn_kick2.visible=!1,this.btn_kick2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnKickPlayerClick,this);break;case"btn_kick3":this.btn_kick3=t,this.btn_kick3.visible=!1,this.btn_kick3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnKickPlayerClick,this);break;case"check_closeRoom":this.check_closeRoom=t,this.check_closeRoom.addEventListener(egret.Event.CHANGE,function(){i.check_closeRoom.label=i.check_closeRoom.selected?"允许加入":"禁止加入",i.check_closeRoom.selected?mvs.MsEngine.getInstance.joinOpen("x"):mvs.MsEngine.getInstance.joinOver("x")},this)}},t.prototype.partAdded=function(t,i){this.getChilds(t,i),e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.joinRoom(this.joinFlag,this.joinInfo)},t.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINROOM_RSP,this.joinRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINROOM_NTFY,this.joinRoomNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOVER_NTFY,this.joinOverNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOVER_RSP,this.joinOverResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOPEN_RSP,this.joinOpenResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOPEN_NTFY,this.joinOpenNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_NTFY,this.leaveRoomNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_CREATEROOM_RSP,this.createRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_KICKPLAYER_RSP,this.kickPlayerResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_KICKPLAYER_NTFY,this.kickPlayerNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_RSP,this.setRoomPropertyResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_NTFY,this.setRoomPropertynotify,this)
},t.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINROOM_RSP,this.joinRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINROOM_NTFY,this.joinRoomNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOVER_NTFY,this.joinOverNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOVER_RSP,this.joinOverResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOPEN_RSP,this.joinOpenResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOPEN_NTFY,this.joinOpenNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_NTFY,this.leaveRoomNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_CREATEROOM_RSP,this.createRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_KICKPLAYER_RSP,this.kickPlayerResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_KICKPLAYER_NTFY,this.kickPlayerNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_RSP,this.setRoomPropertyResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_NTFY,this.setRoomPropertynotify,this)},t.prototype.setJoinParame=function(e,t){this.joinFlag=e,this.joinInfo=t},t.prototype.joinRoom=function(e,t){this.joinFlag=e,1==e?(this.lab_matchmode.text="（随机匹配）",this.joinRandRoom()):2==e?this.createRoom():3==e?(this.joinWithRoomID(t),this.lab_matchmode.text=""):4==e&&(GameData.syncFrame?(this.lab_matchmode.text="（帧同步匹配）",t={match:"frameSync"}):this.lab_matchmode.text="（自定义属性匹配）",this.joinRoomWithPro(t))},t.prototype.joinRandRoom=function(){var e=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.joinRandomRoom(GameData.maxPlayerNum,e)},t.prototype.createRoom=function(){var e=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.createRoom(GameData.createRoomInfo,e)},t.prototype.joinWithRoomID=function(e){var t=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.joinRoom(e,t)},t.prototype.joinRoomWithPro=function(e){var t=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar}),i=new MsMatchInfo(GameData.maxPlayerNum,0,0,e);mvs.MsEngine.getInstance.joinRoomWithProperties(i,t)},t.prototype.addPlayerList=function(e,t,i,n,s){void 0===s&&(s=!1);var r=new GameUser;return r.id=e,r.name=t,r.avatar=i,r.tableID=n,r.isOwner=s,this._playerList.push(r),this.showPlayer(r),r},t.prototype.delPlayerList=function(e){for(var t=new GameUser,i=0;i<this._playerList.length;i++)this._playerList[i].id==e&&(t.id=this._playerList[i].id,t.avatar=this._playerList[i].avatar,t.name=this._playerList[i].name,t.tableID=this._playerList[i].tableID,this._playerList.splice(i,1),this.wipePlayer(t))},t.prototype.showPlayer=function(e){var i=e.tableID;this.joinFlag==t.JOINFLAG.CREATEROOM||this.joinFlag==t.JOINFLAG.WITHROOMID?(this.group_map.visible=!0,this.rad_mapA.enabled=this.isOwner,this.rad_mapB.enabled=this.isOwner,console.log("mapValue:",this.rad_mapA.value),console.log("mapValue:",this.rad_mapB.value),this.btn_start.visible=this.isOwner,this.img_owner.visible=this.isOwner,(2==i||3==i)&&(this["btn_kick"+i].visible=this.isOwner)):(this.btn_start.visible=!1,this.group_map.visible=!1),this.check_closeRoom.visible=!this.canStartGame,this.check_closeRoom.enabled=this.isOwner,this["lab_player"+i].text=i.toString(),this["lab_player"+i].textColor=16777215,e.id==GameData.gameUser.id&&(this["lab_player"+i].text="我"),1==i?(this.rect_player1.fillColor=9164768,this.lab_userID1.text=e.name):2==i?(this.rect_player2.fillColor=9889973,this.lab_userID2.text=e.name):3==i&&(this.rect_player3.fillColor=15257232,this.lab_userID3.text=e.name)},t.prototype.wipePlayer=function(e){var t=e.tableID;1==t?(this.lab_userID1.text=this.default_name,this.rect_player1.fillColor=this.default_rect_color,this.lab_player1.text="1",this.lab_player1.textColor=7697781,this.lab_userID2.text=this.default_name,this.rect_player2.fillColor=this.default_rect_color,this.lab_player2.text="2",this.lab_player2.textColor=7697781,this.lab_userID3.text=this.default_name,this.rect_player3.fillColor=this.default_rect_color,this.lab_player3.text="3",this.lab_player3.textColor=7697781,this.btn_kick2.visible=!1,this.btn_kick3.visible=!1):2==t?(this.lab_userID2.text=this.default_name,this.rect_player2.fillColor=this.default_rect_color,this.lab_player2.text="2",this.lab_player2.textColor=7697781,this.lab_userID3.text=this.default_name,this.rect_player3.fillColor=this.default_rect_color,this.lab_player3.text="3",this.lab_player3.textColor=7697781,this.btn_kick2.visible=!1,this.btn_kick3.visible=!1):3==t&&(this.lab_userID3.text=this.default_name,this.rect_player3.fillColor=this.default_rect_color,this.lab_player3.text="3",this.lab_player3.textColor=7697781,this.btn_kick3.visible=!1),this.img_owner.visible=!1},t.prototype.wipePlayerLocation=function(e,t){this.isOwner=t==GameData.gameUser.id,this.delPlayerList(e);for(var i=0;i<this._playerList.length;i++)this._playerList[i].isOwner=t==this._playerList[i].id,this._playerList[i].tableID=i+1,this.showPlayer(this._playerList[i])},t.prototype.radioChangeHandler=function(e){0==e.target.value?(GameData.roomPropertyValue=GameData.roomPropertyType.mapA,mvs.MsEngine.getInstance.setRoomProperty(this._roomID,GameData.roomPropertyType.mapA)):(GameData.roomPropertyValue=GameData.roomPropertyType.mapB,mvs.MsEngine.getInstance.setRoomProperty(this._roomID,GameData.roomPropertyType.mapB)),console.log("日志选择：",GameData.roomPropertyValue)},t.prototype.mbuttonStartGameBtn=function(e){this._playerList.length>=GameData.maxPlayerNum?(GameData.playerUserIds=this._playerList,mvs.MsEngine.getInstance.joinOver("joinOver")):console.log("人不够，或者还有人没有准备！")},t.prototype.mbuttonLeaveRoom=function(e){this._isInRoom?mvs.MsEngine.getInstance.leaveRoom("累了困了离开一下"):(this.release(),GameSceneView._gameScene.lobby())},t.prototype.btnKickPlayerClick=function(e){var t=0;"btn_kick2"==e.target.name?t=2:"btn_kick3"==e.target.name&&(t=3);var i=this.getUserForTableID(t);return null==i?void console.info("用户不存在"):void mvs.MsEngine.getInstance.kickPlayer(i.id,"我们不能一起好好的玩游戏")},t.prototype.getUserForTableID=function(e){var t=null;return this._playerList.forEach(function(i){i.tableID==e&&(t=i)}),t},t.prototype.leaveRoomNotify=function(e){var t=e.data;console.info("玩家离开",t);var i=t.userId;t.owner==GameData.gameUser.id?this.isOwner=!0:this.isOwner=!1,this.delPlayerList(i),this.canStartGame=!1;for(var n=0;n<this._playerList.length;n++)t.owner==this._playerList[n].id?this._playerList[n].isOwner=!0:this._playerList[n].isOwner=!1,this._playerList[n].tableID=n+1,this.showPlayer(this._playerList[n])},t.prototype.leaveRoomResponse=function(e){var t=e.data;200!==t.status?console.log("退出房间失败！status="+t.status):(this.release(),GameSceneView._gameScene.lobby())},t.prototype.createRoomResponse=function(e){var t=e.data;if(200==t.status){var i=1;t.owner==GameData.gameUser.id?this.isOwner=!0:this.isOwner=!1,this.addPlayerList(GameData.gameUser.id,GameData.gameUser.name,GameData.gameUser.avatar,i,this.isOwner),this.lab_roomID.text="房间号:"+t.roomID,this._roomID=t.roomID,GameData.roomID=t.roomID,this._isInRoom=!0}else console.info("加入房间失败",t)},t.prototype.joinRoomResponse=function(e){var t=e.data;if(200==t.status){this.lab_roomID.text="房间号:"+t.roomInfo.roomID,this._roomID=t.roomInfo.roomID,GameData.roomID=t.roomInfo.roomID,this._isInRoom=!0,GameData.gameUser.isOwner=!1,t.roomInfo.ownerId==GameData.gameUser.id?this.isOwner=!0:this.isOwner=!1,t.roomInfo.roomProperty===GameData.roomPropertyType.mapB?(GameData.roomPropertyValue=GameData.roomPropertyType.mapB,this.rad_mapB.selected=!0):(GameData.roomPropertyValue=GameData.roomPropertyType.mapA,this.rad_mapA.selected=!0);var i=1;this.addPlayerList(GameData.gameUser.id,GameData.gameUser.name,GameData.gameUser.avatar,i,this.isOwner);for(var n=t.userList,s=0;s<n.length;s++)i++,this.otherJoinShowInfo(n[s].userId,i,n[s].userProfile,t.roomInfo.ownerId==n[s].userId);this.checkStart()}else console.info("加入房间失败",t)},t.prototype.checkStart=function(){console.info("房间人数："+this._playerList.length),this._playerList.length==GameData.maxPlayerNum?(console.info("可以开始游戏"),this.canStartGame=!0,this.check_closeRoom.visible=!1,this.joinFlag==t.JOINFLAG.CREATEROOM||this.joinFlag==t.JOINFLAG.WITHROOMID?(this.btn_start.visible=this.isOwner,this.btn_start.enabled=this.isOwner):(this.isOwner&&mvs.MsEngine.getInstance.joinOver("人满开始游戏"),this.btn_start.visible=!1,this.btn_start.enabled=!1)):(this.canStartGame=!1,this.btn_start.enabled=!1,this.check_closeRoom.visible=!0)},t.prototype.otherJoinShowInfo=function(e,t,i,n){if(void 0===n&&(n=!1),i&&""!==i){var s="",r="",o=JSON.parse(i);o.name&&(s=o.name),o.avatar&&(r=o.avatar),this.addPlayerList(e,s,r,t,n)}},t.prototype.joinRoomNotify=function(e){var t=e.data,i=(t.userId,this._playerList.length+1);this.otherJoinShowInfo(t.userId,i,t.userProfile,t.userId==t.owner),this.checkStart()},t.prototype.notifyGameStart=function(){GameData.isRoomOwner=!0;var e=[];this._playerList.forEach(function(t){e.push({id:t.id,name:t.name,avatar:t.avatar})});var t={action:GameData.gameStartEvent,userIds:e},i=mvs.MsEngine.getInstance.sendEvent(JSON.stringify(t));return 0!==i.result?console.log("发送游戏开始通知失败，错误码"+i.result):(GameData.events[i.sequence]=t,void console.log("发起游戏开始的通知，等待回复"))},t.prototype.sendEventResponse=function(e){var t=e.data;if(200!==t.status)return console.log("事件发送失败,status:"+status);var i=GameData.events[t.sequence];i&&i.action===GameData.gameStartEvent&&(delete GameData.events[t.sequence],this.release(),GameSceneView._gameScene.play())},t.prototype.sendEventNotify=function(e){var t=e.data;t&&t.cpProto&&t.cpProto.indexOf(GameData.gameStartEvent)>=0&&(GameData.playerUserIds=this._playerList,this.release(),GameSceneView._gameScene.play())},t.prototype.joinOverResponse=function(e){var t=e.data;if(200===t.status){if(console.log("关闭房间成功"),this.canStartGame)return this.notifyGameStart(),void(GameData.playerUserIds=this._playerList)}else console.log("关闭房间失败，回调通知错误码：",t.status);Toast.show(" 设置不允许房间加人 "+(200==t.status?"success":"fail")),this.check_closeRoom.selected=200==t.status?!1:this.check_closeRoom.selected},t.prototype.joinOverNotify=function(e){var t=e.data;console.log("userID:"+t.userID+" 关闭房间："+t.roomID+" cpProto:"+t.cpProto),Toast.show(t.userID+" 设置了不允许房间加人"),this.check_closeRoom.selected=!1,this.check_closeRoom.label="禁止加入"},t.prototype.joinOpenResponse=function(e){var t=e.data;Toast.show(" 设置允许房间加人 "+(200==t.status?"success":"fail")),this.check_closeRoom.selected=200==t.status?!0:this.check_closeRoom.selected},t.prototype.joinOpenNotify=function(e){var t=e.data;Toast.show(t.userID+" 设置了允许房间加人"),this.check_closeRoom.selected=!0,this.check_closeRoom.label="允许加入"},t.prototype.cancelStart=function(e,t){this.btn_start.enabled=!1,this.btn_start.visible=this.isOwner,this.canStartGame=!1,this.check_closeRoom.visible=!0},t.prototype.kickPlayerResponse=function(e){var t=e.data;this.cancelStart(t.userID,this._roomID),this.wipePlayerLocation(t.userID,t.owner)},t.prototype.kickPlayerNotify=function(e){var t=e.data;console.info("玩家离开",t),t.userID==GameData.gameUser.id?(this.release(),GameSceneView._gameScene.lobby()):(this.cancelStart(t.userID,this._roomID),this.wipePlayerLocation(t.userID,t.owner))},t.prototype.networkStateNotify=function(e){var t=e.data,i=t.userID;this.cancelStart(i,t.roomID),(t.state=1)?(console.info("玩家断开:"+i),mvs.MsEngine.getInstance.kickPlayer(i,"玩家断线踢掉")):2==t.state?console.info("玩家正在从新连接..."+i):(console.info("玩家离开"+i),this.wipePlayerLocation(t.userID,t.owner))},t.prototype.setRoomPropertynotify=function(e){var t=e.data;console.log("roomProperty = "+t.roomProperty),t.roomProperty===GameData.roomPropertyType.mapB?(GameData.roomPropertyValue=GameData.roomPropertyType.mapB,this.rad_mapB.selected=!0):(GameData.roomPropertyValue=GameData.roomPropertyType.mapA,this.rad_mapA.selected=!0)},t.prototype.setRoomPropertyResponse=function(e){console.log("roomProperty = "+e.data.roomProperty)},t.JOINFLAG={RANDROOM:1,CREATEROOM:2,WITHROOMID:3,WITHPROPERTY:4},t}(eui.Component);__reflect(MatchUI.prototype,"MatchUI",["eui.UIComponent","egret.DisplayObject"]);var PremiseLoginUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.getControl(t,i)},t.prototype.getControl=function(e,t){"txt_endport"===e?(this.txt_endport=t,this.txt_endport.addEventListener(egret.Event.CHANGE,function(e){var t=e.target;/^[A-Za-z0-9\/\/.:]+$/.test(t.text)||(t.text="")},this)):"txt_gameID"===e?(this.txt_gameID=t,this.txt_gameID.addEventListener(egret.Event.CHANGE,function(e){var t=e.target;/^[0-9]+$/.test(t.text)||(t.text="")},this)):"txt_appKey"===e?(this.txt_appKey=t,this.txt_appKey.addEventListener(egret.Event.CHANGE,function(e){var t=e.target;/^[A-Za-z0-9]+$/.test(t.text)||(t.text="")},this)):"txt_secretKey"===e?(this.txt_secretKey=t,this.txt_secretKey.addEventListener(egret.Event.CHANGE,function(e){var t=e.target;/^[A-Za-z0-9]+$/.test(t.text)||(t.text="")},this)):"txt_userID"===e?(this.txt_userID=t,this.txt_userID.addEventListener(egret.Event.CHANGE,function(e){var t=e.target;/^[0-9]+$/.test(t.text)||(t.text="")},this)):"txt_token"===e?(this.txt_token=t,this.txt_token.addEventListener(egret.Event.CHANGE,function(e){var t=e.target;/^[A-Za-z0-9]+$/.test(t.text)||(t.text="")},this)):"btn_login"===e?(this.btn_login=t,this.btn_login.addEventListener(egret.TouchEvent.TOUCH_TAP,this.premiseInit,this)):"btn_return"===e&&(this.btn_return=t,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnReturn,this))},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addMsResponseListen(),this.setDefaultValue()},t.prototype.setDefaultValue=function(){this.txt_token.text="OEWIURIOJNUOGIUDSF809LJOKETGT89H",this.txt_secretKey.text="appsecret01",this.txt_userID.text="123456",this.txt_appKey.text="appkey01",this.txt_gameID.text="1",this.txt_endport.text="mt21gateway.matchvs.com"},t.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_INIT_RSP,this.initResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this)},t.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_INIT_RSP,this.initResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this)},t.prototype.premiseInit=function(e){var t=this.txt_endport.text,i=Number(this.txt_gameID.text);mvs.MsEngine.getInstance.premiseInit(t,i)},t.prototype.initResponse=function(e){var t=Number(this.txt_userID.text),i=this.txt_token.text,n=Number(this.txt_gameID.text),s=this.txt_appKey.text,r=this.txt_secretKey.text;GameData.gameUser.id=t,GameData.gameUser.token=i,mvs.MsEngine.getInstance.login(t,i,n,s,r)},t.prototype.loginResponse=function(e){var t=e.data;200!=t.status||(this.release(),"0"!==t.roomID?(GameData.roomID=t.roomID,GameSceneView._gameScene.reconnectView()):GameSceneView._gameScene.lobby())},t.prototype.btnReturn=function(e){this.release(),GameSceneView._gameScene.login()},t}(eui.Component);__reflect(PremiseLoginUI.prototype,"PremiseLoginUI",["eui.UIComponent","egret.DisplayObject"]);var ReconnectUI=function(e){function t(){var t=e.call(this)||this;return t._reconnctTimes=1,t._totalTimes=5,t.addMsResponseListen(),t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),"btn_return"==t&&(this.btn_return=i,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this))},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._timer=new egret.Timer(1e3,5),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this._timer.start()},t.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_RECONNECT_RSP,this.reconnectResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this)},t.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_RECONNECT_RSP,this.reconnectResponse,this)},t.prototype.mbuttonExitRoom=function(e){GameSceneView._gameScene.login()},t.prototype.timerFunc=function(e){var t=mvs.MsEngine.getInstance.reconnect();this._reconnctTimes++,this._reconnctTimes>this._totalTimes&&(this._timer.stop(),0===t?(mvs.MsEngine.getInstance.leaveRoom(""),GameSceneView._gameScene.lobby()):(mvs.MsEngine.getInstance.leaveRoom(""),GameSceneView._gameScene.login()),this.release())},t.prototype.reconnectResponse=function(e){var t=e.data,i=t.roomUserInfoList,n=t.roomInfo;this._timer.stop(),t.status&&200===t.status?(GameData.playerUserIds=[],GameData.playerUserIds.push(GameData.gameUser),i.forEach(function(e){if(GameData.gameUser.id!==e.userID){var t={name:"",avatar:""};""!==e.userProfile&&(t=JSON.parse(e.userProfile));var i=new GameUser;i.avatar=t.avatar,i.name=t.name,i.id=e.userID,i.isOwner=e.userID==n.ownerId,GameData.playerUserIds.push(i)}}),GameData.roomPropertyValue=n.roomProperty,GameData.roomID=n.roomID,GameData.isRoomOwner=!1,GameData.playerUserIds.length===GameData.maxPlayerNum&&2===n.state?this.sendReadyEvent():(mvs.MsEngine.getInstance.leaveRoom("leaveRoom"),this.release(),GameSceneView._gameScene.lobby())):(this.release(),GameSceneView._gameScene.lobby())},t.prototype.sendEventResponse=function(e){var t=e.data;if(200===t.status){var i=GameData.events[t.sequence];i&&i.action===GameData.reconnectReadyEvent&&(delete GameData.events[t.sequence],this.release(),GameSceneView._gameScene.play())}else this.release(),mvs.MsEngine.getInstance.leaveRoom("leaveRoom"),GameSceneView._gameScene.lobby()},t.prototype.errorResponse=function(e){this._timer.stop()},t.prototype.mbuttonCancleBtn=function(e){this._timer.stop(),this.release(),mvs.MsEngine.getInstance.leaveRoom("")},t.prototype.leaveRoomResponse=function(e){},t.prototype.sendReadyEvent=function(){var e={action:GameData.reconnectReadyEvent,userID:GameData.gameUser.id},t=mvs.MsEngine.getInstance.sendEvent(JSON.stringify(e));return t&&0===t.result?(GameData.events[t.sequence]=e,void console.log("重连发送信息成功")):(mvs.MsEngine.getInstance.leaveRoom("leaveRoom"),GameSceneView._gameScene.lobby(),void this.release())},t}(eui.Component);__reflect(ReconnectUI.prototype,"ReconnectUI",["eui.UIComponent","egret.DisplayObject"]);var RoomItem=function(e){function t(t){var i=e.call(this)||this;return i._parent=null,i.isme=!1,i._parent=t,i.skinName="RoomItemSkin",i}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.showInfo=function(e,t,i,n,s){this.lab_roomID.text="房间号："+e;var r=1==t?"待加入":"已关闭";this.lab_state.text="房间状态："+r;var o=s===GameData.roomPropertyType.mapA?"彩图":"灰图";this.lab_map.text="地图："+o,this.lab_roomNum.text="房间人数："+i+"/"+n,mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_GETROOMDETAIL_RSP,this.getRoomDetailResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_GETROOMDETAIL_RSP,this.getRoomDetailResponse,this)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btn_enter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonEnterRoom,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this._parent=this.data._parent,this.layContents(this.data._roomID,this.data._state,this.data._num,this.data._max,this.data._map),this.showInfo(this._roomID,this._state,this._num,this._max,this._map)},t.prototype.layContents=function(e,t,i,n,s){this._roomID=e,this._state=t,this._num=i,this._max=n,this._map=s},t.prototype.getRoomDetail=function(e){mvs.MsEngine.getInstance.getRoomDetail(e)},t.prototype.getRoomDetailResponse=function(e){var t=e.data;200===t.status&&1===t.state&&(this.Release(),this.isme)},t.prototype.mbuttonEnterRoom=function(e){this.isme=!0,this.getRoomDetail(this._roomID)},t.prototype.removeEventListe=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_GETROOMDETAIL_RSP,this.getRoomDetailResponse,this),this.btn_enter.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonEnterRoom,this)},t.prototype.Release=function(){this._parent.Release(),this.removeEventListe()},t}(eui.ItemRenderer);__reflect(RoomItem.prototype,"RoomItem");var RoomListUI=function(e){function t(){var t=e.call(this)||this;return t.roomItemA=new eui.ArrayCollection([]),t._roomListSprite=null,t}return __extends(t,e),t.prototype.getChild=function(e,t){"lab_userID"==e?(this.lab_userID=t,this.lab_userID.text="用户："+GameData.gameUser.id+"\n"+GameData.gameUser.name):"img_header"==e?(this.img_header=t,this.img_header.source=GameData.gameUser.avatar):"btn_return"==e?(this.btn_return=t,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this)):"data_roomList"==e?this.data_roomList=t:"lab_getInfo"==e&&(this.lab_getInfo=t)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.getChild(t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._roomListSprite=new egret.Sprite,this.addChild(this._roomListSprite),this.getRoomListEx(),this._timer=new egret.Timer(2e3,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_GETROOMLIST_EX_RSP,this.getRoomListExResponse,this),this._timer.start()},t.prototype.mbuttonExitRoom=function(e){this._timer.stop(),GameSceneView._gameScene.lobby()},t.prototype.timerFunc=function(e){this.getRoomListEx()},t.prototype.getRoomListEx=function(){var e=new MsRoomFilterEx(GameData.createRoomInfo.maxPlayer,GameData.createRoomInfo.mode,GameData.createRoomInfo.canWatch,"",0,1,1,0,0,3);mvs.MsEngine.getInstance.getRoomListEx(e)},t.prototype.getRoomListExResponse=function(e){var t=e.data;if(200!=t.status)return void(this.lab_getInfo.text="获取失败!");if(0==t.roomAttrs.length)return this.lab_getInfo.text="当前没有房间",void(this.data_roomList.dataProvider=new eui.ArrayCollection([]));this.lab_getInfo.text="",this.roomItemA.removeAll();for(var i=0;i<t.roomAttrs.length;i++){var n={_parent:this,_roomID:t.roomAttrs[i].roomID,_num:t.roomAttrs[i].gamePlayer,_state:t.roomAttrs[i].state,_map:t.roomAttrs[i].roomProperty,_max:t.roomAttrs[i].maxPlayer};this.roomItemA.addItem(n)}this.data_roomList.dataProvider=this.roomItemA,this.data_roomList.itemRenderer=RoomItem},t.prototype.Release=function(){this._timer.stop(),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_GETROOMLIST_EX_RSP,this.getRoomListExResponse,this)},t}(eui.Component);__reflect(RoomListUI.prototype,"RoomListUI",["eui.UIComponent","egret.DisplayObject"]);var GameSceneView=function(e){function t(){var i=e.call(this)||this;return t._gameScene=i,i.initView(),i}return __extends(t,e),t.prototype.errorResponse=function(e,i){console.info("错误回调：errCode="+e+" errMsg="+i),t._gameScene.errorView(0,"错误回调：errCode="+e+" errMsg="+i)},t.prototype.errorResponses=function(e){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponse,this);var i=e.data.errCode,n=e.data.errMsg;1001==i&&(""!=n&&n.indexOf("hotel")>=0?t._gameScene.errorView(1,"错误回调：errCode="+i+" errMsg="+n):t._gameScene.errorView(0,"错误回调：errCode="+i+" errMsg="+n))},t.prototype.initView=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponses,this),this.thisContainer=new egret.Sprite,this.addChild(this.thisContainer),this.login()},t.prototype.login=function(){this.removeAll();var e=new Login;this.cuntPage=e,this.thisContainer.addChild(e)},t.prototype.lobby=function(){this.removeAll();var e=new Lobby;Lobby.canClick=!0,this.cuntPage=e,this.thisContainer.addChild(e)},t.prototype.match=function(e){egret.ExternalInterface.call("sendToNative","lobbyCanNotclick"),this.removeAll();var t=new match(e);match.canClick=!0,this.cuntPage=t,this.thisContainer.addChild(t)},t.prototype.gameResult=function(e){GameResultView.canClick=!0;var t=new GameResultView(e);this.cuntPage=t,this.thisContainer.addChild(t)},t.prototype.play=function(){egret.ExternalInterface.call("sendToNative","matchCanNotclick"),this.removeAll();var e=new GameLeonardFroG;this.cuntPage=e,this.thisContainer.addChild(e)},t.prototype.reconnectView=function(){this.removeAll();var e=new ReconnectUI;this.thisContainer.addChild(e)},t.prototype.tuichu=function(){var e=new GameSureLeaveView;this.thisContainer.addChild(e)},t.prototype.errorView=function(e,t){this.removeAll(),GameData.init();var i=new ErrorNote;i.SetErrorMsg(t),this.thisContainer.addChild(i)},t.prototype.removeAll=function(){this.thisContainer.removeChildren(),this.cuntPage&&this.cuntPage.release&&(this.cuntPage.release(),this.cuntPage=null)},t}(egret.Sprite);__reflect(GameSceneView.prototype,"GameSceneView");var SoundBg=function(e){function t(){var t=e.call(this)||this;return t._currBg="",t}return __extends(t,e),t.prototype.mute=function(){this._currSoundChannel&&(this._currSoundChannel.volume=0)},t.prototype.restoreVolume=function(){this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg=""},t.prototype.play=function(e,t){if(void 0===t&&(t=0),this._currBg!=e){this.stop(),this._currBg=e,this._currPlayTime=t;var i=this.getSound(e);i&&this.playSound(i)}},t.prototype.playSound=function(e){this._currSound=e,this._currSoundChannel=this._currSound.play(this._currPlayTime,0),this._currSoundChannel.volume=this._volume},t.prototype.getPlayTime=function(){return this._currSoundChannel?this._currSoundChannel.position:0},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){this._currBg==e&&this.playSound(RES.getRes(e))},t.prototype.checkCanClear=function(e){return this._currBg!=e},t}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(e){function t(){var t=e.call(this)||this;return t._cacheSoundChannel=[],t._playingEffects={},t}return __extends(t,e),t.prototype.play=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=1),this._playTime=i,t||!this._playingEffects[e]){var n=this.getSound(e);n&&this.playSound(e,n)}},t.prototype.getSoundChannel=function(e){var t=null;return this._cacheSoundChannel.length?(t=this._cacheSoundChannel.pop(),t.isStopped=!1,t.$url=e.url,t.$loops=this._playTime,t.$audioBuffer=e.audioBuffer,t.$startTime=0,t.$play()):t=e.play(0,this._playTime),t},t.prototype.playSound=function(e,t){var i=this.getSoundChannel(t);i.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),i.volume=this._volume,i.soundName=e,this._playingEffects[e]=i},t.prototype.onSoundComplete=function(e){var t=e.currentTarget,i=t.soundName;delete this._playingEffects[i]},t.prototype.stopSound=function(e){var t=this._playingEffects[e];t&&(t.stop(),delete this._playingEffects[e])},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){this.playSound(e,RES.getRes(e))},t}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.bgOn=!0,t.effectOn=!0,t.bgVolume=.5,t.effectVolume=.7,t.bg=new SoundBg,t.bg.setVolume(t.bgVolume),t.effect=new SoundEffects,t.effect.setVolume(t.effectVolume),t}return __extends(t,e),t.prototype.playEffect=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=1),this.effectOn&&this.effect.play(e,t,i)},t.prototype.playBg=function(e){this.currBg=e,this.bgOn&&this.bg.play(e)},t.prototype.pauseBg=function(){this.bgOn&&(this.bgPlayTime=this.bg.getPlayTime(),this.bg.stop())},t.prototype.replayBg=function(){this.bgOn&&this.bg.play(this.currBg,this.bgPlayTime)},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.muteBg=function(){this.bg.mute()},t.prototype.restoreVolumeBg=function(){this.bg.restoreVolume()},t.prototype.stopEffect=function(e){this.effect.stopSound(e)},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgOn=function(e){this.bgOn!=e&&(this.bgOn=e,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg())},t.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},t.prototype.getBgVolume=function(){return this.bgVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},Object.defineProperty(t.prototype,"bgIsOn",{get:function(){return this.bgOn},enumerable:!0,configurable:!0}),t.CLEAR_TIME=18e4,t}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var State=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addToParent=function(e,t){e.addChild(this),this.isInit||this.init(),this.show(t)},t.prototype.init=function(){this.isInit=!0},t.prototype.show=function(e){},t.prototype.next=function(e,t){this.dispatchEvent(new StateEvent(StateEvent.NEXT,e,t))},t.prototype.popup=function(e,t){this.dispatchEvent(new StateEvent(StateEvent.POPUP,e,t))},t.prototype.returnToLast=function(e){this.dispatchEvent(new StateEvent(StateEvent.LAST,null,e))},t.prototype.tick=function(e){},t.prototype.close=function(){this.parent&&(this.isPopup&&this.dispatchEvent(new StateEvent(StateEvent.POPUPCLOSE,null,null)),this.parent.removeChild(this),this.dispose())},t.prototype.dispose=function(){App.MessageCenter.removeAll(this),App.TimerManager.removeAll(this)},t}(egret.DisplayObjectContainer);__reflect(State.prototype,"State",["IState","egret.IEventDispatcher"]);var StateEvent=function(e){function t(t,i,n,s,r){void 0===s&&(s=!1),void 0===r&&(r=!1);var o=e.call(this,t,s,r)||this;return o.data=i,o.paramData=n,o}return __extends(t,e),t.NEXT="NEXT",t.LAST="LAST",t.POPUP="POPUP",t.POPUPCLOSE="POPUPCLOSE",t}(egret.Event);__reflect(StateEvent.prototype,"StateEvent");var AssetManager=function(){function e(){}return e.clearCacheList=function(e){for(var t=this.cacheDbs[e]||[];t.length;){var i=t[0];i.dispose()}delete this.cacheDbs[e]},e.removeCacheArmature=function(e){var t=e.armatureName,i=this.cacheDbs[t];if(i){var n=i.indexOf(e);-1!=n&&i.splice(n,1)}this.printCacheListCount()},e.addCacheArmature=function(e){var t=e.armatureName;this.cacheDbs[t]||(this.cacheDbs[t]=[]),this.cacheDbs[t].push(e),this.printCacheListCount()},e.printCacheListCount=function(){return},e.getBitmap=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0);var n=new egret.Bitmap,s=RES.getRes(e);return n.texture=s,t&&(n.anchorOffsetX=n.width>>1),i&&(n.anchorOffsetY=n.height>>1),n},e.getSound=function(e){return RES.getRes(e)},e.loadDBAnimation=function(t){var i,n,s;
for(i=0,n=t.length;n>i;i++){s=t[i];var r=RES.getRes(s+"_ske_json"),o=RES.getRes(s+"_tex_json"),a=RES.getRes(s+"_tex_png");r&&o&&a&&(e.dbFactory.parseDragonBonesData(r),e.dbFactory.parseTextureAtlasData(o,a))}},e.removeDBAnimation=function(t){var i,n,s;for(i=0,n=t.length;n>i;i++){s=t[i];var r=RES.getRes(s+"_ske_json");if(r){var o=r.name,a=e.dbFactory.getDragonBonesData(o);e.dbFactory.removeDragonBonesData(o),e.dbFactory.removeTextureAtlasData(o);for(var h in a.armatures)this.clearCacheList(h)}}},e.getDBArmature=function(t){var i=e.dbFactory.buildArmature(t);if(!i)return null;var n=new DBArmature(i);return this.addCacheArmature(n),n},e.getQuickDBArmature=function(t){var i=e.dbFactory.buildArmature(t);if(!i)return null;i.cacheFrameRate=30;var n=new DBArmature(i);return this.addCacheArmature(n),n},e.changeTexture=function(e,t){var i=e.width,n=e.height;e.texture=RES.getRes(t),e.width=i,e.height=n},e.setText=function(e,t){e.text=t,e.anchorOffsetX=e.width>>1,e.anchorOffsetY=e.height>>1},e.dbFactory=new dragonBones.EgretFactory,e.cacheDbs={},e}();__reflect(AssetManager.prototype,"AssetManager");var Base64BitmapDataPool=function(){function e(){}return e.getData=function(e,t){var i=this,n=this.pools[e];if(n)n.useNum+=1,t(n.data);else{if(this.waitLoading[e])return void this.waitLoading[e].push(t);this.waitLoading[e]=[],this.waitLoading[e].push(t),ProxyHttp.wxImgToBase64(e,function(t){var n=t.r.data.split(",");egret.BitmapData.create("base64",n[1],function(t){var n=new egret.Texture;n._setBitmapData(t);var s={data:n,useNum:0};i.pools[e]=s;var r=i.waitLoading[e];r.forEach(function(e){s.useNum+=1,e(s.data)}),i.waitLoading[e]=null,delete i.waitLoading[e]})})}},e.reduceUseNum=function(e){var t=this.pools[e];t&&(t.useNum-=1)},e.pools={},e.waitLoading={},e}();__reflect(Base64BitmapDataPool.prototype,"Base64BitmapDataPool");var DataCenter=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SendExpressTime=0,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.initConfig=function(e){this.gameConfigs=e.games},t.prototype.getGameConfig=function(e){var t,i;for(t=0,i=this.gameConfigs.length;i>t;t++)if(this.gameConfigs[t].gameId==e)return this.gameConfigs[t];return null},t}(egret.EventDispatcher);__reflect(DataCenter.prototype,"DataCenter");var DisplayUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createBitmap=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.createEuiImage=function(e){var t=new eui.Image,i=RES.getRes(e);return t.source=i,t},t.prototype.removeFromParent=function(e){null!=e.parent&&e.parent.removeChild(e)},t.prototype.quickAddChild=function(e,t){return"true"===egret.getOption("egretnative")?void e.addChild(t):void(t.$parent!=e&&(e.$children.push(t),t.$parent=e,t instanceof DBArmature&&t.$addToClock()))},t.prototype.quickRemoveChild=function(e){if("true"===egret.getOption("egretnative"))return void this.removeFromParent(e);var t=e.$parent;if(t){var i=t.$children.indexOf(e);t.$children.splice(i,1),e.$parent=null,e instanceof DBArmature&&e.$removeFromClock()}},t}(BaseClass);__reflect(DisplayUtils.prototype,"DisplayUtils");var GameReady=function(e){function t(t,i,n){void 0===i&&(i="ready_png"),void 0===n&&(n="go_png");var s=e.call(this)||this;return s._callback=t,s.imgReady=AssetManager.getBitmap(i),s.imgGo=AssetManager.getBitmap(n),s.addChild(s.imgReady),s.addChild(s.imgGo),s.hide(),s}return __extends(t,e),t.prototype.hide=function(){this.imgReady.alpha=0,this.imgGo.alpha=0},t.prototype.play=function(){var e=this;this.hide(),App.SoundManager.playEffect(App.READYGO),this.imgReady.alpha=1,this.stepReady=setTimeout(function(){e.hide(),e.imgGo.alpha=1,e.stepGo=setTimeout(function(){e.hide(),e._callback(),clearTimeout(e.stepGo),e.stepGo=void 0},1e3),clearTimeout(e.stepReady),e.stepReady=void 0},1e3)},t.prototype.dispose=function(){this.stepReady&&(clearTimeout(this.stepReady),this.stepReady=void 0),this.stepGo&&(clearTimeout(this.stepGo),this.stepGo=void 0),this._callback=void 0,this.imgGo=void 0,this.imgReady=void 0},t}(egret.DisplayObjectContainer);__reflect(GameReady.prototype,"GameReady");var MD5=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var n=Array(16),s=Array(16),r=0;16>r;r++)n[r]=909522486^i[r],s[r]=1549556828^i[r];var o=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(s.concat(o),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",r=0;r<e.length;r++)i=e.charCodeAt(r),s+=n.charAt(i>>>4&15)+n.charAt(15&i);return s},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",s=e.length,r=0;s>r;r+=3)for(var o=e.charCodeAt(r)<<16|(s>r+1?e.charCodeAt(r+1)<<8:0)|(s>r+2?e.charCodeAt(r+2):0),a=0;4>a;a++)n+=8*r+6*a>8*e.length?this.b64pad:i.charAt(o>>>6*(3-a)&63);return n},e.prototype.rstr2any=function(e,t){var i,n,s,r,o,a=t.length,h=Array(Math.ceil(e.length/2));for(i=0;i<h.length;i++)h[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),p=Array(c);for(n=0;c>n;n++){for(o=Array(),r=0,i=0;i<h.length;i++)r=(r<<16)+h[i],s=Math.floor(r/a),r-=s*a,(o.length>0||s>0)&&(o[o.length]=s);p[n]=r,h=o}var l="";for(i=p.length-1;i>=0;i--)l+=t.charAt(p[i]);return l},e.prototype.str2rstr_utf8=function(e){for(var t,i,n="",s=-1;++s<e.length;)t=e.charCodeAt(s),i=s+1<e.length?e.charCodeAt(s+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),s++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.prototype.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},e.prototype.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,s=-1732584194,r=271733878,o=0;o<e.length;o+=16){var a=i,h=n,c=s,p=r;i=this.md5_ff(i,n,s,r,e[o+0],7,-680876936),r=this.md5_ff(r,i,n,s,e[o+1],12,-389564586),s=this.md5_ff(s,r,i,n,e[o+2],17,606105819),n=this.md5_ff(n,s,r,i,e[o+3],22,-1044525330),i=this.md5_ff(i,n,s,r,e[o+4],7,-176418897),r=this.md5_ff(r,i,n,s,e[o+5],12,1200080426),s=this.md5_ff(s,r,i,n,e[o+6],17,-1473231341),n=this.md5_ff(n,s,r,i,e[o+7],22,-45705983),i=this.md5_ff(i,n,s,r,e[o+8],7,1770035416),r=this.md5_ff(r,i,n,s,e[o+9],12,-1958414417),s=this.md5_ff(s,r,i,n,e[o+10],17,-42063),n=this.md5_ff(n,s,r,i,e[o+11],22,-1990404162),i=this.md5_ff(i,n,s,r,e[o+12],7,1804603682),r=this.md5_ff(r,i,n,s,e[o+13],12,-40341101),s=this.md5_ff(s,r,i,n,e[o+14],17,-1502002290),n=this.md5_ff(n,s,r,i,e[o+15],22,1236535329),i=this.md5_gg(i,n,s,r,e[o+1],5,-165796510),r=this.md5_gg(r,i,n,s,e[o+6],9,-1069501632),s=this.md5_gg(s,r,i,n,e[o+11],14,643717713),n=this.md5_gg(n,s,r,i,e[o+0],20,-373897302),i=this.md5_gg(i,n,s,r,e[o+5],5,-701558691),r=this.md5_gg(r,i,n,s,e[o+10],9,38016083),s=this.md5_gg(s,r,i,n,e[o+15],14,-660478335),n=this.md5_gg(n,s,r,i,e[o+4],20,-405537848),i=this.md5_gg(i,n,s,r,e[o+9],5,568446438),r=this.md5_gg(r,i,n,s,e[o+14],9,-1019803690),s=this.md5_gg(s,r,i,n,e[o+3],14,-187363961),n=this.md5_gg(n,s,r,i,e[o+8],20,1163531501),i=this.md5_gg(i,n,s,r,e[o+13],5,-1444681467),r=this.md5_gg(r,i,n,s,e[o+2],9,-51403784),s=this.md5_gg(s,r,i,n,e[o+7],14,1735328473),n=this.md5_gg(n,s,r,i,e[o+12],20,-1926607734),i=this.md5_hh(i,n,s,r,e[o+5],4,-378558),r=this.md5_hh(r,i,n,s,e[o+8],11,-2022574463),s=this.md5_hh(s,r,i,n,e[o+11],16,1839030562),n=this.md5_hh(n,s,r,i,e[o+14],23,-35309556),i=this.md5_hh(i,n,s,r,e[o+1],4,-1530992060),r=this.md5_hh(r,i,n,s,e[o+4],11,1272893353),s=this.md5_hh(s,r,i,n,e[o+7],16,-155497632),n=this.md5_hh(n,s,r,i,e[o+10],23,-1094730640),i=this.md5_hh(i,n,s,r,e[o+13],4,681279174),r=this.md5_hh(r,i,n,s,e[o+0],11,-358537222),s=this.md5_hh(s,r,i,n,e[o+3],16,-722521979),n=this.md5_hh(n,s,r,i,e[o+6],23,76029189),i=this.md5_hh(i,n,s,r,e[o+9],4,-640364487),r=this.md5_hh(r,i,n,s,e[o+12],11,-421815835),s=this.md5_hh(s,r,i,n,e[o+15],16,530742520),n=this.md5_hh(n,s,r,i,e[o+2],23,-995338651),i=this.md5_ii(i,n,s,r,e[o+0],6,-198630844),r=this.md5_ii(r,i,n,s,e[o+7],10,1126891415),s=this.md5_ii(s,r,i,n,e[o+14],15,-1416354905),n=this.md5_ii(n,s,r,i,e[o+5],21,-57434055),i=this.md5_ii(i,n,s,r,e[o+12],6,1700485571),r=this.md5_ii(r,i,n,s,e[o+3],10,-1894986606),s=this.md5_ii(s,r,i,n,e[o+10],15,-1051523),n=this.md5_ii(n,s,r,i,e[o+1],21,-2054922799),i=this.md5_ii(i,n,s,r,e[o+8],6,1873313359),r=this.md5_ii(r,i,n,s,e[o+15],10,-30611744),s=this.md5_ii(s,r,i,n,e[o+6],15,-1560198380),n=this.md5_ii(n,s,r,i,e[o+13],21,1309151649),i=this.md5_ii(i,n,s,r,e[o+4],6,-145523070),r=this.md5_ii(r,i,n,s,e[o+11],10,-1120210379),s=this.md5_ii(s,r,i,n,e[o+2],15,718787259),n=this.md5_ii(n,s,r,i,e[o+9],21,-343485551),i=this.safe_add(i,a),n=this.safe_add(n,h),s=this.safe_add(s,c),r=this.safe_add(r,p)}return[i,n,s,r]},e.prototype.md5_cmn=function(e,t,i,n,s,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,r)),s),i)},e.prototype.md5_ff=function(e,t,i,n,s,r,o){return this.md5_cmn(t&i|~t&n,e,t,s,r,o)},e.prototype.md5_gg=function(e,t,i,n,s,r,o){return this.md5_cmn(t&n|i&~n,e,t,s,r,o)},e.prototype.md5_hh=function(e,t,i,n,s,r,o){return this.md5_cmn(t^i^n,e,t,s,r,o)},e.prototype.md5_ii=function(e,t,i,n,s,r,o){return this.md5_cmn(i^(t|~n),e,t,s,r,o)},e.prototype.safe_add=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();__reflect(MD5.prototype,"MD5");var MessageCenter=function(){function e(e){this.dict=null,this.type=0,this.type=e,this.dict={},this.eVec=new Array,this.lastRunTime=0,0==this.type&&egret.startTick(this.run,this)}return e.getInstance=function(){return e._instance?e._instance:e._instance=new e(1)},e.prototype.addListener=function(e,t,i){var n=this.dict[e];null==n&&(n=new Array,this.dict[e]=n);var s=0,r=n.length;for(s;r>s;s++)if(n[s][0]==t&&n[s][1]==i)return;n.push([t,i])},e.prototype.removeListener=function(e,t,i){var n=this.dict[e];if(null!=n){var s=0,r=n.length;for(s;r>s;s++)if(n[s][0]==t&&n[s][1]==i){n.splice(s,1);break}0==n.length&&(this.dict[e]=null,delete this.dict[e])}},e.prototype.removeAll=function(e){for(var t=Object.keys(this.dict),i=0,n=t.length;n>i;i++){for(var s=t[i],r=this.dict[s],o=0;o<r.length;o++)r[o][1]==e&&(r.splice(o,1),o--);0==r.length&&(this.dict[s]=null,delete this.dict[s])}},e.prototype.dispatch=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null!=this.dict[e]){var n=new MessageVo;n.type=e,n.param=t,0==this.type?this.eVec.push(n):1==this.type&&this.dealMsg(n)}},e.prototype.run=function(e){var t=egret.getTimer(),i=t-this.lastRunTime>100;if(this.lastRunTime=t,i)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-t>5)););return!0},e.prototype.dealMsg=function(e){for(var t=this.dict[e.type],i=0,n=t.length,s=null;n>i;)s=t[i],s[0].apply(s[1],e.param),t.length!=n&&(n=t.length,i--),i++;e.dispose(),e=null},e._instance=null,e}();__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function e(){this.type=null,this.param=null}return e.prototype.dispose=function(){this.type=null,this.param=null},e}();__reflect(MessageVo.prototype,"MessageVo");var ObjectPool=function(){function e(){this._objs=new Array}return e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t,i){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];e._content[i]||(e._content[i]=[]);var r=e._content[i];if(r.length)return r.pop();var o,a=n.length;return 0==a?o=new t:1==a?o=new t(n[0]):2==a?o=new t(n[0],n[1]):3==a?o=new t(n[0],n[1],n[2]):4==a?o=new t(n[0],n[1],n[2],n[3]):5==a&&(o=new t(n[0],n[1],n[2],n[3],n[4])),o.ObjectPoolKey=i,o},e.popWithExtraKey=function(t,i){e._content[t]||(e._content[t]=[]);var n,s=e._content[t];if(s.length)for(var r=0;r<s.length;r++)if(s[r].extraKey==i){n=s[r],s.splice(r,1);break}if(!n){var o=t;n=new o(i),n.extraKey=i,n.ObjectPoolKey=t}return n},e.push=function(t){if(null==t)return!1;var i=t.ObjectPoolKey;return e._content[i]?(e._content[i].push(t),!0):!1},e.clear=function(){e._content={}},e.clearClass=function(t,i){void 0===i&&(i=null);for(var n=e._content[t];n&&n.length;){var s=n.pop();i&&s[i](),s=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,i){var n=e._content[t];if(null!=n){var s=0,r=n.length;for(s;r>s;s++)n[s][i]()}},e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var ProxyHttp=function(){function e(){}return e.wxImgToBase64=function(e,t){},e}();__reflect(ProxyHttp.prototype,"ProxyHttp");var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._groupIndex=0,t._configs=new Array,t._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,i,n,s){void 0===s&&(s=null),this._groups[e]=[t,i,n,s],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,i,n,s,r){void 0===r&&(r=null),RES.createGroup(e,t,!0),this.loadGroup(e,i,n,s,r)},t.prototype.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var i="pilferer_"+e;t||(t=[e]),RES.createGroup(i,t,!0),RES.loadGroup(i,-1)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][0],n=this._groups[t][2];null!=i&&i.apply(n,[t]),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][1],n=this._groups[t][2];null!=i&&i.call(n,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][2],n=this._groups[t][3];null!=n&&n.apply(i,[t])}},t.prototype.createGroup=function(e,t){RES.createGroup(e,t,!0)},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var RoomVO=function(){function e(e,t,i,n){this.id=e,this.gameId=t,this.player=i,this._isAi=n}return Object.defineProperty(e.prototype,"IsAI",{get:function(){return this._isAi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selfIsMaster",{get:function(){if(this._isAi)return!0;var e=App.CurrChatId.split("_");return e[0]==DataCenter.instance.user.id.toString()},enumerable:!0,configurable:!0}),e}();__reflect(RoomVO.prototype,"RoomVO");var StageUtils=function(e){function t(){var i=e.call(this)||this;return null==t._uiStage&&(t._uiStage=new eui.UILayer,t._uiStage.percentHeight=100,t._uiStage.percentWidth=100,t._uiStage.touchEnabled=!1,i.getStage().addChild(t._uiStage)),i}return __extends(t,e),t.prototype.getHeight=function(){return this.getStage().stageHeight},t.prototype.getWidth=function(){return this.getStage().stageWidth},t.prototype.setTouchChildren=function(e){this.getStage().touchChildren=e},t.prototype.setMaxTouches=function(e){this.getStage().maxTouches=e},t.prototype.setFrameRate=function(e){this.getStage().frameRate=e},t.prototype.setScaleMode=function(e){this.getStage().scaleMode=e},t.prototype.getStage=function(){return egret.MainContext.instance.stage},t.prototype.getUIStage=function(){return t._uiStage},t.prototype.startFullscreenAdaptation=function(e,t,i){this.designWidth=e,this.designHeight=t,this.resizeCallback=i,this.stageOnResize()},t.prototype.stageOnResize=function(){this.getStage().removeEventListener(egret.Event.RESIZE,this.stageOnResize,this);var e=this.designWidth,t=this.designHeight,i=window.innerWidth,n=window.innerHeight,s=i/n,r=e/t,o=s/r;if(s>r){var a=o,h=o;e=Math.floor(e*a),t=Math.floor(t*h)}this.getStage().setContentSize(e,t),this.resizeCallback&&this.resizeCallback(),this.getStage().addEventListener(egret.Event.RESIZE,this.stageOnResize,this)},t}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var TimerManager=function(e){function t(){var t=e.call(this)||this;return t._handlers=new Array,t._delHandlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._count=0,t._timeScale=1,egret.Ticker.getInstance().register(t.onEnterFrame,t),t}return __extends(t,e),t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var e=0;e<this._count;e++){var t=this._handlers[e],i=t.userFrame?this._currFrame:this._currTime;i>=t.exeTime&&(t.method.call(t.methodObj,(this._currTime-t.dealTime)*this._timeScale),t.dealTime=this._currTime,t.exeTime+=t.delay,t.repeat||(t.repeatCount>1?t.repeatCount--:(t.complateMethod&&t.complateMethod.apply(t.complateMethodObj),this._delHandlers.push(t))))}for(;this._delHandlers.length;){var t=this._delHandlers.pop();this.remove(t.method,t.methodObj)}},t.prototype.create=function(e,t,i,n,s,r,o){if(!(0>t||0>i||null==n)){this.remove(n,s);var a=ObjectPool.pop(TimerHandler,"TimerHandler");a.userFrame=e,a.repeat=0==i,a.repeatCount=i,a.delay=t,a.method=n,a.methodObj=s,a.complateMethod=r,a.complateMethodObj=o,a.exeTime=t+(e?this._currFrame:this._currTime),a.dealTime=this._currTime,this._handlers.push(a),this._count++}},t.prototype.doTimer=function(e,t,i,n,s,r){void 0===s&&(s=null),void 0===r&&(r=null),this.create(!1,e,t,i,n,s,r)},t.prototype.doFrame=function(e,t,i,n,s,r){void 0===s&&(s=null),void 0===r&&(r=null),this.create(!0,e,t,i,n,s,r)},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.remove=function(e,t){for(var i=0;i<this._count;i++){var n=this._handlers[i];if(n.method==e&&n.methodObj==t){this._handlers.splice(i,1),ObjectPool.push(n),this._count--;break}}},t.prototype.removeAll=function(e){for(var t=0;t<this._count;t++){var i=this._handlers[t];i.methodObj==e&&(this._handlers.splice(t,1),ObjectPool.push(i),this._count--,t--)}},t.prototype.isExists=function(e,t){for(var i=0;i<this._count;i++){var n=this._handlers[i];if(n.method==e&&n.methodObj==t)return!0}return!1},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},e}();__reflect(TimerHandler.prototype,"TimerHandler");var Toast=function(e){function t(i,n,s){var r=e.call(this)||this,o=new egret.Bitmap(t._txtrToastBg);r.x=.5*n,r.y=.85*s,r.addChild(o),o.$anchorOffsetX=o.width/2;var a=new egret.TextField;return a.multiline=!0,a.size=30,a.bold=!0,a.textColor=16777215,a.stroke=6,a.strokeColor=0,a.text=i,a.fontFamily="微软雅黑",a.textAlign=egret.HorizontalAlign.CENTER,a.width=1*n,a.x=o.x,a.y=o.y+a.size/10,a.anchorOffsetX=a.width/2,r.addChild(a),o.height=12+a.height,r.alpha=0,egret.Tween.get(r).to({alpha:1},800,egret.Ease.quintOut).wait(1600).to({alpha:0},1200,egret.Ease.quintIn).call(function(){r.parent&&r.parent.removeChild(r)}),r}return __extends(t,e),t.init=function(e,t){this._cont=e,this._txtrToastBg=t},t.initRes=function(e,t){this._cont=e;var i=new egret.ImageLoader;i.addEventListener(egret.Event.COMPLETE,function(e){var t=e.target,i=t.data,n=new egret.Texture;n.bitmapData=i,this._txtrToastBg=n},this),i.load(t)},t.show=function(e){if(this._cont){var i=new t(e,this._cont.stage.stageWidth,this._cont.stage.stageHeight);this._cont.addChild(i)}},t}(egret.DisplayObjectContainer);__reflect(Toast.prototype,"Toast");var User=function(e){function t(t){var i=e.call(this)||this;return i.name="",i.sex=0,i.imgUrl="",i.country="",i.province="",i.city="",i.money=0,i.exp=0,i.guide=0,i.constellatory=0,i.barrage_num=0,i.status=0,i.roomId=-1,i.gameId=-1,i.id=t,i}return __extends(t,e),t.EVENT_LOAD_COMPLETE="EVENT_LOAD_COMPLETE",t.STATUS_IDLE=0,t.STATUS_ROOM=1,t.STATUS_MATCHING=2,t.STATUS_GAME_LOADING=3,t.STATUS_GAMING=4,t.STATUS_GAME_RESULT=5,t}(egret.EventDispatcher);__reflect(User.prototype,"User");