var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function a(t){try{h(n.next(t))}catch(e){r(e)}}function o(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(a,o)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,r&&(a=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{s=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,a,o,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Bitmap;t.texture=RES.getRes("loading_bg_jpg"),t.width=640,t.height=1136,this.addChild(t),this.bg1=new egret.Bitmap,this.bg1.texture=RES.getRes("loading_json.loading_bar1_png"),this.bg1.anchorOffsetX=this.bg1.width/2,this.bg1.anchorOffsetY=this.bg1.height/2,this.bg1.x=320,this.bg1.y=568,this.addChild(this.bg1),this.bg2=new egret.Bitmap,this.bg2.texture=RES.getRes("loading_json.loading_bar2_png"),this.bg2.anchorOffsetX=this.bg2.width/2,this.bg2.anchorOffsetY=this.bg2.height/2,this.bg2.x=320,this.bg2.y=568,this.addChild(this.bg2),this.loadingicon=new egret.Bitmap,this.loadingicon.texture=RES.getRes("loading_json.loading_icon_png"),this.loadingicon.anchorOffsetX=this.loadingicon.width/2,this.loadingicon.anchorOffsetY=this.loadingicon.height/2,this.loadingicon.x=320,this.loadingicon.y=568,this.addChild(this.loadingicon);var e=this.shape=new egret.Shape;this.addChild(e),this.bg2.mask=e,this.bitmapText=new egret.BitmapText,this.bitmapText.font=RES.getRes("num_fnt"),this.bitmapText.width=640,this.bitmapText.height=1136,this.bitmapText.textAlign="center",this.bitmapText.y=548,this.addChild(this.bitmapText)},e.prototype.onProgress=function(t,e){this.changeGraphics(270*(t/e)),this.loadingicon.rotation+=5,this.bitmapText.text=Math.floor(t/e*100).toString()+"%"},e.prototype.changeGraphics=function(t){var e=this.shape;e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(320,568),e.graphics.lineTo(this.bg2.width/2,0),e.graphics.drawArc(320,568,this.bg1.width/2,-90*Math.PI/180,t*Math.PI/180,!1),e.graphics.lineTo(320,568),e.graphics.endFill()},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("loading")];case 2:return i.sent(),t=new LoadingUI,this.stage.addChild(t),[4,this.loadTheme()];case 3:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 4:return i.sent(),this.stage.removeChild(t),[3,6];case 5:return e=i.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){this.addChild(new page1)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.onButtonClick=function(t){var e=new eui.Panel;e.title="Title",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var page1=function(t){function e(){var e=t.call(this)||this;return e.UpComplete=!1,e.IsUp=!1,e.i=0,e.t=1,e.peopleH=0,e.isForeach=!0,e.isThree=!0,e.isFour=!0,e.isRandom=!0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this);var i=new egret.Timer(2e3,0);i.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),i.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),i.start(),this.FlyTween(this.btn1_light1,-147,1500),this.FlyTween(this.btn1_light2,2,1500),this.x1=this.littleHand.x,this.y1=this.littleHand.y;var n=egret.Tween.get(this.littleHand,{loop:!0});n.to({x:this.x1-5,y:this.y1-5},1e3).call(function(){var t=egret.Tween.get(e.quanquan);t.to({scaleX:2,scaleY:2,alpha:.5},600).to({scaleX:1,scaleY:1,alpha:1})});var s=egret.Tween.get(this.page4_Star,{loop:!0});s.to({alpha:.5},1e3).to({alpha:1},1e3),this.FlyTween(this.icon2,545,600,329),this.AllTween(this.icon2,this.icon2.y),this.AllTween(this.dna,this.dna.y),this.AllTween(this.page4_icon1,this.page4_icon1.y,this.page4_icon1.x),this.AllTween(this.page4_icon2,this.page4_icon2.y),this.AllTween(this.page4_icon3,this.page4_icon3.y),this.AllTween(this.page4_icon4,this.page4_icon4.y),this.AllTween(this.page4_icon5,this.page4_icon5.y,this.page4_icon5.x),this.AllTween(this.sanjiao1,this.sanjiao1.y),this.AllTween(this.icon1,this.icon1.y,this.icon1.x),this.LightTween();var r=egret.Tween.get(this.light);r.to({alpha:1},1500),this.littleHand.touchEnabled=!0,this.littleHand.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.PlayBgMusic();var t=egret.Tween.get(e.group);t.to({alpha:0},500),e.IsUp=!0,e.BaoJingTween(e.baojing.x)},this),this.quanquan.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.PlayBgMusic()},this),this.addEventListener(egret.Event.ENTER_FRAME,this.update,this),this.people.mask=this.imgMask,this.txtGroup1.mask=this.txtMask1,this.txtGroup2.mask=this.txtMask2,this.txtGroup3.mask=this.txtMask3,this.imgTest.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Test,this),this.ranshao.mask=this.ranshaoMask;var a=egret.Tween.get(this.ranshaoMask,{loop:!0});a.to({x:530},600).wait(2e3).call(function(){e.ranshaoMask.x=235})},e.prototype.Test=function(){alert("吹吧你就")},e.prototype.timerFunc=function(){this.CreateStar()},e.prototype.timerComFunc=function(){},e.prototype.PlayBgMusic=function(){var t=RES.getRes("bgmusic_mp3");t.play()},e.prototype.AllTween=function(t,e,i){if(null==i){var n=egret.Tween.get(t,{loop:!0});n.to({y:e+50},1e3).to({y:e},1e3)}else{var n=egret.Tween.get(t,{loop:!0});n.to({x:i+50,y:e-50},1e3).to({x:i,y:e},1e3)}},e.prototype.update=function(){var t=this;if(this.panel1.y<=1136&&(this.icon2.rotation+=.8,this.dna.rotation-=1,this.sanjiao1.rotation+=1),this.IsUp&&(this.panel1.y+=5,this.light_1.height+=5,this.light.y-=5),this.panel1.y>=800&&this.peopleH<=600&&(this.people.visible=!0,this.imgMask.height+=10,this.peopleH+=10),this.panel1.y>=1200&&this.p1.scaleX<1&&(this.p1.scaleX+=.06,this.p1.scaleY+=.06,this.p2.scaleX+=.06,this.p2.scaleY+=.06),this.panel1.y>=1300&&this.p3.scaleX<1&&(this.p3.scaleX+=.06,this.p3.scaleY+=.06,this.p4.scaleX+=.06,this.p4.scaleY+=.06),this.isThree&&this.panel1.y>=1600){var e=egret.Tween.get(this.three);e.to({alpha:1},1e3).call(function(){t.light.source="p1_light_2_png"}),this.isThree=!1}if(this.panel1.y>=1700&&this.txtMask1.x<0?this.txtMask1.x+=30:this.panel1.y>=1700&&this.txtMask1.x>=0&&this.txtMask2.x<0?this.txtMask2.x+=35:this.panel1.y>=1700&&this.txtMask1.x>=0&&this.txtMask2.x>=0&&this.txtMask3.x<0&&(this.txtMask3.x+=40),this.panel1.y>=2200&&this.isForeach){for(var i=function(t){var e=n.txtGroup4.getChildAt(t-1);setTimeout(function(){e.visible=!0},80*t)},n=this,s=1;s<=this.txtGroup4.numChildren;s++)i(s);this.isForeach=!1}if(this.saomiao.rotation+=5,this.page4_icon4.rotation-=.8,this.panel1.y>=2900&&this.isFour){var e=egret.Tween.get(this.imgTest);e.to({alpha:1},1e3);var r=egret.Tween.get(this.imgTest_);r.to({alpha:1},1e3),this.isFour=!1;var a=egret.Tween.get(this.wendu_81);a.to({x:422},600),this.FlyTween(this.shenzhun,140,700),this.FlyTween(this.yice,133,700)}this.panel1.y>=3408&&(this.IsUp=!1,this.imgTest.touchEnabled=!0)},e.prototype.LightTween=function(){var t=this,e=egret.Tween.get(this.light_1);e.to({height:530},1e3);var i=egret.Tween.get(this.light);i.to({y:250,alpha:1},1e3).call(function(){var e=egret.Tween.get(t.light,{loop:!0});e.to({alpha:.5},300).to({alpha:1},300)})},e.prototype.BaoJingTween=function(t){var e=egret.Tween.get(this.baojing,{loop:!0});e.to({x:t+1,alpha:.5},200).to({x:t-1,alpha:1},200)},e.prototype.CreateStar=function(){var t=this,e=new egret.Bitmap;e.texture=RES.getRes("p1_star1_png"),this.panel1.addChildAt(e,8),e.y=1136,e.x=610*Math.random();var i=egret.Tween.get(e);i.to({y:-4e3},6e3).call(function(){egret.Tween.removeTweens(e),t.panel1.removeChild(e)})},e.prototype.FlyTween=function(t,e,i,n){var s=egret.Tween.get(t);n?s.to({x:e,y:n},i):s.to({x:e},i)},e}(eui.Component);__reflect(page1.prototype,"page1",["eui.UIComponent","egret.DisplayObject"]);var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}var a=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);