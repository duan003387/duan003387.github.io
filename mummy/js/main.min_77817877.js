function onShareTimeline(){}function showShare(){wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:"快来和我在《盗墓迷城》中一起探险挖宝吧!",imageUrl:WX_SDKManager.instance.resourceAdress+"shareImg/share_bg1.jpg"}})}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{c(r.next(t))}catch(e){o(e)}}function s(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(r){n=[6,r],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},dnc;!function(t){var e;!function(t){var e=function(){function t(){this.urlLoader=new egret.URLLoader,this.urlLoader.dataFormat=egret.URLLoaderDataFormat.TEXT,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this),this.urlLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoaderError,this)}return t.prototype.getAsync=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return[2,new Promise(function(e,n){t.getCB(function(t){return e(t)},t)})]})})},t.prototype.postAsync=function(t){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(n){return[2,new Promise(function(n,r){e.postCB(function(t){return n(t)},e,t)})]})})},t.prototype.getCB=function(t,e){this.onResponseData={fun:t,self:e};var n=this.connectUrl();if(null==n)return void(this.onResponseData&&this.onResponseData.fun.call(this.onResponseData.self,this.createErrorResponse(-1,"Url Error.")));var r=new egret.URLRequest(n);r.method=egret.URLRequestMethod.GET,this.urlLoader.load(r)},t.prototype.postCB=function(t,e,n){this.onResponseData={fun:t,self:e};var r=this.connectUrl();if(null==r)return void(this.onResponseData&&this.onResponseData.fun.call(this.onResponseData.self,this.createErrorResponse(-1,"Url Error.")));var i=[];if(n)for(var o in n){var a=encodeURIComponent(n[o]);i.push(o+"="+a)}var s=i.join("&"),c=new egret.URLRequest(r);c.method=egret.URLRequestMethod.POST,c.data=new egret.URLVariables(s),this.urlLoader.load(c)},t.prototype.onLoaderComplete=function(t){var e=null;try{e=JSON.parse(this.urlLoader.data)}catch(n){return void(this.onResponseData&&this.onResponseData.fun.call(this.onResponseData.self,this.createErrorResponse(-3,"Json Error.")))}this.onResponseData&&this.onResponseData.fun.call(this.onResponseData.self,e)},t.prototype.onLoaderError=function(t){this.onResponseData&&this.onResponseData.fun.call(this.onResponseData.self,this.createErrorResponse(-2,"Request Error."))},t.prototype.createErrorResponse=function(t,e){return{code:t,msg:e}},t}();t.HttpConnection=e,__reflect(e.prototype,"dnc.net.HttpConnection")}(e=t.net||(t.net={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n._type=e?e:0,n.isDestory=!1,n.touchEnabled=!1,n.onBeforeSkin(),null!=n.getSkinPath()&&(n.skinName=n.getSkinPath()),n.once(egret.Event.ADDED_TO_STAGE,n._onCreate,n),n.once(egret.Event.REMOVED_FROM_STAGE,n._onFristRemove,n),n}return __extends(e,t),e.prototype._onCreate=function(){this.onCreate()},e.prototype._onFristRemove=function(){this.onFristRemove(),this.isDestory=!0},e.prototype.onBeforeSkin=function(){},e.prototype.getSkinPath=function(){return null},e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e.prototype.getMovieClipDataFactory=function(t){var e=RES.getRes(t+"_json"),n=RES.getRes(t+"_png"),r=new egret.MovieClipDataFactory(e,n);return r},e.prototype.getMovieClip=function(t,e){var n=RES.getRes(t+"_json"),r=RES.getRes(t+"_png"),i=new egret.MovieClipDataFactory(n,r),o=new egret.MovieClip(i.generateMovieClipData(e));return o},e}(eui.Component);t.BaseComponent=e,__reflect(e.prototype,"dnc.ui.BaseComponent")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e}(eui.UILayer);t.BaseLayer=e,__reflect(e.prototype,"dnc.ui.BaseLayer")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var mummy;!function(t){var e;!function(t){var e=function(){function t(t){var e=this;this.collectionArr=[],t&&t.treasureList&&t.treasureList.forEach(function(t){var r=new n(t);e.collectionArr.push(r)})}return Object.defineProperty(t.prototype,"CollectionList",{get:function(){return this.collectionArr},enumerable:!0,configurable:!0}),t}();t.CollectionData=e,__reflect(e.prototype,"mummy.data.CollectionData");var n=function(){function t(t){this.index=t}return Object.defineProperty(t.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),t}();t.CollectionItemData=n,__reflect(n.prototype,"mummy.data.CollectionItemData")}(e=t.data||(t.data={}))}(mummy||(mummy={}));var dnc;!function(t){var e;!function(t){var e=function(){function t(){this.dataChangeListeners=[]}return t.prototype.callListener=function(){for(var t=0,e=this.dataChangeListeners;t<e.length;t++){var n=e[t];n.callback.call(n.self,this)}},t.prototype.addDataListener=function(t,e,n){void 0===n&&(n=!0);var r={callback:t,self:e};this.dataChangeListeners.push(r),n&&r.callback.call(r.self,this)},t.prototype.removeDataListener=function(t,e){for(var n=0;n<this.dataChangeListeners.length;n++){var r=this.dataChangeListeners[n];if(r.callback==t&&r.self==e)return void this.dataChangeListeners.splice(n,1)}},t}();t.BaseCallData=e,__reflect(e.prototype,"dnc.data.BaseCallData")}(e=t.data||(t.data={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(e){var n=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getInitDisplay=function(){var t=new eui.Label;return t.right=10,t.bottom=10,t.size=20,t.textColor=16777215,t.fontFamily="SimHei",t.text="游戏初始化...",t},e.prototype.onPause=function(){},e.prototype.onResume=function(){},e}(t.ui.BaseLayer);e.BaseMainLayer=n,__reflect(n.prototype,"dnc.main.BaseMainLayer")}(e=t.main||(t.main={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e}(egret.DisplayObjectContainer);t.BaseDisplayObjectContainer=e,__reflect(e.prototype,"dnc.ui.BaseDisplayObjectContainer")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.bounces=!1,e.dataGroup=new eui.DataGroup,e.upDatas=new eui.ArrayCollection,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e.prototype.getItem=function(){return null},e.prototype.createChildren=function(){this.viewport=this.dataGroup,this.addChild(this.dataGroup),this.dataGroup.dataProvider=this.upDatas,this.dataGroup.itemRenderer=this.getItem()},e.prototype.setData=function(t){this.upDatas.replaceAll(t)},e}(eui.Scroller);t.BaseList=e,__reflect(e.prototype,"dnc.ui.BaseList");var n=function(t){function e(){var e=t.call(this)||this;return null!=e.getSkinPath()&&(e.skinName=e.getSkinPath()),e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.dataChanged=function(){this.onDataChange(this.data)},e.prototype.onDataChange=function(t){},e.prototype.getSkinPath=function(){return null},e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e.prototype.getData=function(){return this.data},e.prototype.getList=function(){return this.parent.parent},e}(eui.ItemRenderer);t.BaseListItem=n,__reflect(n.prototype,"dnc.ui.BaseListItem")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n.touchEnabled=!0,n.parentDisplay=e,n}return __extends(e,t),e.prototype.show=function(){null==this.parent&&this.parentDisplay.addChild(this)},e.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},e.prototype.onProgress=function(t,e,n){},e.prototype.onCancel=function(){},e.prototype.setInfo=function(t){},e}(t.BaseComponent);t.BaseLoadingComponent=e,__reflect(e.prototype,"dnc.ui.BaseLoadingComponent",["RES.PromiseTaskReporter"])}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.tag="BaseConnetion",t.host="https://server.9mingame.com/mummy",t}return __extends(n,e),n.prototype.connectUrl=function(){return this.host.concat(this.uri)},n.prototype._connet=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.postAsync(t)];case 1:return e=r.sent(),console.log(this.tag,t,e),null==e||null!=e.code?(MainLayer.instance.showErrorInfo("连接中断,请刷新重试...",0),[2,null]):1===e.msgType?(n=e.msgBody.showMsg+"!\ncode:"+e.msgBody.errorCode,MainLayer.instance.showErrorInfo(n,0),[2,null]):[2,e.msgBody]}})})},n.prototype._connetByUser=function(e){return __awaiter(this,void 0,void 0,function(){var n,r,i,o;return __generator(this,function(a){switch(a.label){case 0:return t.data.Context.instance.connect_error?[2]:(n=e,r=t.data.Context.instance.userInfo?t.data.Context.instance.userInfo.uid:null,r&&(n?n.uid=t.data.Context.instance.userInfo.uid:n={uid:t.data.Context.instance.userInfo.uid}),[4,this.postAsync(n)]);case 1:return i=a.sent(),console.log(this.tag,e,i),null==i?(t.data.Context.instance.connect_error=!0,MainLayer.instance.showErrorInfo("连接中断,请刷新重试...",0),[2,null]):1===i.msgType?(t.data.Context.instance.connect_error=!0,o=i.msgBody.showMsg+"!\ncode:"+i.msgBody.errorCode,MainLayer.instance.showErrorInfo(o,0),[2,null]):(null!==i.msgBody.gameInfo&&void 0!==i.msgBody.gameInfo&&t.data.Context.instance.gameInfoData.setData(i.msgBody.gameInfo),[2,i.msgBody])}})})},n}(dnc.net.HttpConnection);e.BaseConnetion=n,__reflect(n.prototype,"mummy.net.BaseConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,r){function i(t){e.call(r,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(r))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(r,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var VersionController=function(){function t(t){var e=this;this.resourceRoot="resource/",this.versionPath="",this.currentVersion="1.0.7",this.versionCacheWxgame=function(){var t=egret.localStorage.getItem("resVersion");if(t!=e.currentVersion){egret.localStorage.setItem("resVersion",e.currentVersion),console.log("版本更新");var n=wx.getFileSystemManager(),r=wx.env.USER_DATA_PATH+"/cache_crc32/assets";n.readdir({dirPath:r,success:function(t){for(var i=e.getRemoveList(t.files),o=i.length,a=0;o>a;++a)console.log("删除",r+"/"+i[a]),n.unlinkSync(r+"/"+i[a])},fail:function(t){}})}},this.versionCacheWeb=function(){var t=egret.localStorage.getItem("resVersion");t!=e.currentVersion&&(egret.localStorage.setItem("resVersion",e.currentVersion),console.log("Web版本更新"))},this.resVersion=t}return t.prototype.init=function(){var t=this;return this.versionConfigPath="./resource/version_"+this.resVersion+".json",new Promise(function(e,n){var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(t.versionConfigPath,egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,function(n){var r=n.currentTarget;t.versionConfig=JSON.parse(r.response),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?t.versionCacheWxgame():egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&t.versionCacheWeb(),e()},t),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){egret.log("post error : "+event),n()},t)})},t.prototype.getRemoveList=function(t){var e=[],n="";for(var r in this.versionConfig)n+=this.versionConfig[r]+",";for(var i=t.length,o=0;i>o;++o){var a=t[o],s=a.slice(0,a.indexOf("."));-1==n.indexOf(s)&&e.push(a)}return e},t.prototype.getVirtualUrl=function(t){return this.getResUrlByVersion(t)},t.prototype.getResUrlByVersion=function(t){if(-1==t.indexOf(this.resourceRoot))return t;if(t=t.replace(this.resourceRoot,""),this.versionConfig){var e=t.indexOf("?v=");-1!=e&&(t=t.slice(0,e));var n=t.replace(this.versionPath,"");if(this.versionConfig&&this.versionConfig[n]){var r=this.versionConfig[n],i=t.slice(t.lastIndexOf("."));t=this.versionPath+r+i}}return t=this.resourceRoot+t},t}();__reflect(VersionController.prototype,"VersionController",["RES.IVersionController"]);var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.bulbNum=0,e.advBulbNum=0,e}return __extends(e,t),e.prototype.setData=function(t){t&&(this.bulbNum=t.bulbNum,this.advBulbNum=t.advBulbNum),this.callListener()},e}(dnc.data.BaseCallData);t.GameInfoData=e,__reflect(e.prototype,"mummy.data.GameInfoData")}(e=t.data||(t.data={}))}(mummy||(mummy={}));var dnc;!function(t){var e;!function(e){var n=function(){function e(){this.isQQ=!1,this.isShortcut=!1,this.isSupport=!0,this.isShare=!0,this.isContract=!0,this.hlmysdk=window.HLMY_SDK,null==this.hlmysdk&&console.error("hlmysdk is null."),e.instance=this,console.log("Creat Plat_HLMY")}return e.prototype.init=function(t){this.hlmysdk.init(t)},e.prototype.auth=function(e){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return null==this.hlmysdk?[2]:(console.log("Plat_HLMY auth start"),n=this.hlmysdk,[4,new Promise(function(r,i){var o=t.utils.DataUtils.getUrlParam("appKey");(null==o||""==o)&&(o=e?e:"d9d20229e2c2a400a4c57d5eaec38035");var a=t.utils.DataUtils.getUrlParam("hlmy_gw");(null==a||""==a)&&(a="119_105566__");var s=t.utils.DataUtils.getUrlParam("userToken"),c=function(t){r(t)},u={appKey:o,hlmy_gw:a,userToken:s,callback:c};n.auth(u)})]);case 1:return r=i.sent(),console.log("Plat_HLMY auth end",r),[2,r]}})})},e.prototype.adaptParams=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,r,i;return __generator(this,function(o){switch(o.label){case 0:return null==this.hlmysdk?[2]:(console.log("Plat_HLMY adaptParams start"),t=this.hlmysdk,[4,new Promise(function(e,n){var r=function(t){e(t)};t.adaptParams(r)})]);case 1:if(e=o.sent(),console.log("Plat_HLMY adaptParams end",e),e)try{for(n=0,r=e.data.adaptParams;n<r.length;n++)i=r[n],"channel.info"==i.key?this.isQQ="玩吧"==i.value:"addShortcut.enable"==i.key?this.isShortcut="true"==i.value:"invite.enable"==i.key?this.isShare="true"==i.value:"qq_group.enable"==i.key?this.isSupport="true"==i.value:"protocol.enable"==i.key&&(this.isContract="true"==i.value)}catch(a){}return[2,e]}})})},e.prototype.roleInfo=function(t,e,n,r){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(a){return null==this.hlmysdk?[2]:(i=this.hlmysdk,o={serverId:"1",serverName:"主服务",isNewRole:t,roleId:e,roleName:"主角",roleLevel:1,roleCoins:n,roleCreateTime:r},i.roleInfo(o),[2])})})},e.prototype.shortcut=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return null==this.hlmysdk?[2]:(console.log("Plat_HLMY shortcut start"),t=this.hlmysdk,[4,new Promise(function(e,n){var r=function(t){e(t)},i={name:"addShortcut",callback:r};t.execute(i)})]);case 1:return e=n.sent(),console.log("Plat_HLMY shortcut end",e),[2,e]}})})},e.prototype.pay=function(t){return __awaiter(this,void 0,void 0,function(){var e,n=this;return __generator(this,function(r){switch(r.label){case 0:return null==this.hlmysdk?[2]:(console.log("Plat_HLMY pay start"),[4,new Promise(function(e,r){var i=function(t){e(t)},o={paySafecode:t,callback:i};n.hlmysdk.pay(o)})]);case 1:return e=r.sent(),console.log("Plat_HLMY pay end",e),[2,e]}})})},e.prototype.share=function(t){if(null!=this.hlmysdk){var e=!0,n=["奖励","快点领取吧"],r={state:t,tipInfo:e,reward:n};this.hlmysdk.setShareInfo(r)}},e}();e.Plat_HLMY=n,__reflect(n.prototype,"dnc.plat.Plat_HLMY")}(e=t.plat||(t.plat={}))}(dnc||(dnc={}));var mummy;!function(t){var e;!function(t){var e=function(){function t(t){var e=this;this.rankArr=[],t&&t.gameRank&&t.gameRank.forEach(function(t){var r=new n(t);e.rankArr.push(r)}),t&&(this.selfRank=t.playerRank)}return Object.defineProperty(t.prototype,"RankList",{get:function(){return this.rankArr},enumerable:!0,configurable:!0}),t}();t.RankData=e,__reflect(e.prototype,"mummy.data.RankData");var n=function(){function t(t){this.chapterNo=t.chapterNo,this.playerRank=t.playerRank,this.rankNum=t.rankNum,this.name=t.name,this.avatar=t.avatar}return Object.defineProperty(t.prototype,"ChapterNo",{get:function(){return this.chapterNo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerRank",{get:function(){return this.playerRank},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RankNum",{get:function(){return this.rankNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Avatar",{get:function(){return this.avatar},enumerable:!0,configurable:!0}),t}();t.RankItemData=n,__reflect(n.prototype,"mummy.data.RankItemData")}(e=t.data||(t.data={}))}(mummy||(mummy={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n.parentComponent=e,n.percentWidth=100,n.percentHeight=100,n}return __extends(e,t),e.prototype.show=function(){this.parentComponent&&this.parentComponent.addChild(this)},e.prototype.close=function(){this.parentComponent&&this.parentComponent.removeChild(this)},e}(t.BaseComponent);t.BaseDialog=e,__reflect(e.prototype,"dnc.ui.BaseDialog")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e}(egret.DisplayObject);t.BaseDisPlay=e,__reflect(e.prototype,"dnc.ui.BaseDisPlay")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var mummy;!function(t){var e;!function(t){var e=function(){function t(){this.dictionary="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*"}return t.prototype.encode=function(t){for(var e=[],n=21,r=0;;){var i=t.substr(r,n);if(""==i)break;e.push("1".concat(i)),r+=n}for(var o=[],a=0,s=e;a<s.length;a++){var i=s[a],c=this.baseEncode(i);o.push(c)}var u=o.join("-");return u},t.prototype.decode=function(t){for(var e=t.split("-"),n="",r=0,i=e;r<i.length;r++){var o=i[r],a=this.baseDecode(o);a=a.substr(1),n=n.concat(a)}return n},t.prototype.baseEncode=function(t){var e=this.preConvert(t,5),n=this.convert(e,this.dictionary.length);return n},t.prototype.baseDecode=function(t){var e=this.preConvert(t,this.dictionary.length),n=this.convert(e,5);return n},t.prototype.preConvert=function(t,e){for(var n=t.length,r=0,i=n-1;i>=0;i--)r+=this.dictionary.indexOf(t.charAt(i))*Math.pow(e,n-i-1);return r},t.prototype.convert=function(t,e){for(var n="",r=[];0!=t;)r.push(this.dictionary.charAt(t%e)+""),t=Math.floor(t/e);for(;r.length>0;)n=n.concat(r.pop());return 0==n.length?"0":n},t}();t.RecordCode=e,__reflect(e.prototype,"mummy.data.RecordCode")}(e=t.data||(t.data={}))}(mummy||(mummy={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e}(eui.Group);t.BaseGroup=e,__reflect(e.prototype,"dnc.ui.BaseGroup")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e}(eui.Image);t.BaseImage=e,__reflect(e.prototype,"dnc.ui.BaseImage")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var WX_SDKManager=function(){function t(){this.APP_KEY="1aaed561db707419564aa715db95c4ca",this.WYOPEN_APPID="107752",this.VERSION="1.0.1",this.AUTH_URL="https://wx.1758.com/passport/wxa/auth.json",this.resourceAdress="https://vspace.9minyouxi.com/resource/mummy_resource/20200207/",this.mHlmy_token="",this.userInfoBtnImg="res/startGame_btn.png",this.hlmy_query="",this.adObj={0:"adunit-ad88d81e06a3423d",1:"adunit-ad88d81e06a3423d",2:"adunit-ad88d81e06a3423d",3:"adunit-ad88d81e06a3423d",4:"adunit-ad88d81e06a3423d"}}return Object.defineProperty(t,"instance",{get:function(){return t.ins||(t.ins=new t),t.ins},enumerable:!0,configurable:!0}),t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(n){switch(n.label){case 0:return this.userInfoBtn&&(this.userInfoBtn.destroy(),this.userInfoBtn=null),this.checkUpdate(),[4,new Promise(function(n,r){new Promise(function(t,n){wx.login({success:function(n){var r=window.GameInterface.GetStageContentSize(),i=window.innerWidth/r.width;e.userInfoBtn=wx.createUserInfoButton({type:"image",image:"res/startGame_btn.png",style:{left:(window.innerWidth-300*i)/2,top:window.innerHeight-120*i-70,width:300*i,height:120*i}}),e.userInfoBtn.onTap(function(r){if(null!=r.userInfo){var i=new Object;i.code=n,i.userInfo=r,t(i),e.userInfoBtn.offTap(),e.userInfoBtn.destroy(),e.userInfoBtn=null}}),e.userInfoBtn.show()},fail:function(t){n(1)}})}).then(function(r){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return 1===r?(MainLayer.instance.showErrorInfo("微信登录失败，请重新登录",0),[2,null]):2===r?(MainLayer.instance.showErrorInfo("获取用户授权失败，请重试",0),[2,null]):[4,this.Auth(r)];case 1:return t=e.sent(),n(t),[2]}})})})["catch"](function(t){r(t)})})];case 1:return[2,n.sent()]}})})},t.prototype.Auth=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,r;return __generator(this,function(i){switch(i.label){case 0:return e=new Object,e.code=t.code.code,e.wyOpenAppId=this.WYOPEN_APPID,e.wyVersion=this.VERSION,e.appKey=this.APP_KEY,e.encryptedData=t.userInfo.encryptedData,e.iv=t.userInfo.iv,e.nickName=t.userInfo.userInfo.nickName,e.avatarUrl=t.userInfo.userInfo.avatarUrl,e.city=t.userInfo.userInfo.city,e.country=t.userInfo.userInfo.country,e.province=t.userInfo.userInfo.province,e.gender=t.userInfo.userInfo.gender,e.platform=systemInfo.platform,n=wx.getLaunchOptionsSync(),e.scene=n.scene,e.query=JSON.stringify(n.query),[4,this.Post(this.AUTH_URL,e,null)];case 1:return r=i.sent(),this.hlmy_query=r.data.data.hlmy_query,[2,r]}})})},t.prototype.Post=function(t,e,n){var r=this;return new Promise(function(i,o){var a=new egret.HttpRequest;a.open(t,egret.HttpMethod.POST),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),null!=n&&a.setRequestHeader("Cookie","wy_user="+r.mHlmy_token),a.send(e),a.addEventListener(egret.Event.COMPLETE,function(t){i({ret:!0,data:JSON.parse(a.response)})},r),a.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){i({ret:!1})},r)})},t.prototype.Share=function(t,e){var n="";n=""==e?this.hlmy_query:this.hlmy_query+"&"+e,console.log(n,"分享参数"),wx.shareAppMessage({title:t,imageUrl:this.resourceAdress+"shareImg/share_bg1.jpg",query:n})},t.prototype.showVideoAD=function(t,e,n){if(!mummy.data.Context.instance.adOpen)return void e.call(n,0);console.log("广告ID",this.adObj[t]);var r=wx.createRewardedVideoAd({adUnitId:this.adObj[t]});r.offClose(),r.onClose(function(t){r.offClose(),t.isEnded?e.call(n,0):e.call(n,1)}),r.offError(),r.onError(function(t){r.offError()}),r.show()["catch"](function(){r.load().then(function(){return r.show()})["catch"](function(t){e.call(n,2)})})},t.prototype.checkUpdate=function(){var t=wx.getUpdateManager();t&&(t.onCheckForUpdate(function(t){t.hasUpdate&&console.log("发现新版本")}),t.onUpdateReady(function(){wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(e){e.confirm&&t.applyUpdate()}})}),t.onUpdateFailed(function(){wx.showModal({title:"更新提示",content:"更新失败，请重新登录重试",success:function(t){t.confirm&&wx.exitMiniProgram()}})}))},t}();__reflect(WX_SDKManager.prototype,"WX_SDKManager");var ADType;!function(t){t[t.TYPE_GET_BULB=0]="TYPE_GET_BULB",t[t.TYPE_REST_GAME=1]="TYPE_REST_GAME",t[t.TYPE_BACK_STEP=2]="TYPE_BACK_STEP",t[t.TYPE_NEXT_LEVEL=3]="TYPE_NEXT_LEVEL",t[t.TYPE_MAP_ENTER=4]="TYPE_MAP_ENTER"}(ADType||(ADType={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function r(r){e.call(n,r,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?r(i):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var mummy;!function(t){var e;!function(t){var e=function(){function t(){}return t}();t.PlatformData=e,__reflect(e.prototype,"mummy.data.PlatformData");var n=function(){function t(){}return t}();t.UserData=n,__reflect(n.prototype,"mummy.data.UserData")}(e=t.data||(t.data={}))}(mummy||(mummy={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e}(egret.Sprite);t.BaseSprite=e,__reflect(e.prototype,"dnc.ui.BaseSprite")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.onCreate=function(){this.progressBar.minimum=0,this.progressBar.maximum=100,this.parent&&(this.width=this.parent.width,this.height=this.parent.height)},e.prototype.onFristRemove=function(){},e.prototype.onProgress=function(t,e,n){this.nameLab.text=n.name+"\n"+n.type+"\n"+n.root+"\n"+n.url,this.progressBar.value=t,this.progressBar.maximum=e},e.prototype.onCancel=function(){this.nameLab.text="资源加载失败..."},e.prototype.setInfo=function(t){this.show()},e.prototype.getSkinPath=function(){var t='<e:Skin xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="640" height="1136">\n    <e:Rect width="100%" height="100%" x="0" y="0" fillColor="0x000000" />\n	<e:Label id="nameLab" top="60" bottom="200" left="60" right="60" textAlign="left" size="16" lineSpacing="8" verticalAlign="bottom" text=""/>\n    <e:ProgressBar id="progressBar" width="80%" height="20" enabled="true" horizontalCenter="0" bottom="120" />\n</e:Skin>';return t},e}(t.BaseLoadingComponent);t.DebugLoadingDisplay=e,__reflect(e.prototype,"dnc.ui.DebugLoadingDisplay")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.initIndex=0,e.gap=0,e.once(egret.Event.ADDED_TO_STAGE,e.onCreate,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.onFristRemove,e),e}return __extends(e,t),e.prototype.onCreate=function(){var t=new eui.HorizontalLayout;t.gap=this.gap,this.layout=t,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.setSelect(this.initIndex)},e.prototype.onFristRemove=function(){this.listener=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onTouch=function(t){var e=t.target;e instanceof eui.ToggleButton&&e.parent==this&&(e.selected?this.setSelectToggleButton(e):e.selected=!0)},e.prototype.setSelectToggleButton=function(t){for(var e=0;e<this.numChildren;e++){var n=this.getChildAt(e);n instanceof eui.ToggleButton&&(n==t?this.index=e:n.selected=!1)}this.listener&&this.listener.callback.call(this.listener.self,this.index)},e.prototype.setSelect=function(t){if(!this.index||this.index!=t){this.index=0>t?0:t,this.index=t<this.numChildren?t:this.numChildren-1;for(var e=0;e<this.numChildren;e++){var n=this.getChildAt(e);n instanceof eui.ToggleButton&&(n.selected=e==this.index)}this.listener&&this.listener.callback.call(this.listener.self,this.index)}},e.prototype.setSelectListener=function(t,e){this.listener={callback:t,self:e}},e}(eui.Group);t.ToggleButtonGroup=e,__reflect(e.prototype,"dnc.ui.ToggleButtonGroup")}(e=t.ui||(t.ui={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(){function t(){}return t.remove=function(t,e){return t.splice(t.indexOf(e),1)},t.differentAdd=function(t,e){if(null==e)return t;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i==e)return t}return t.push(e),t},t.addString=function(t,e){if(null==e||e.length<1)return t;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i==e)return t}return t.push(e),t},t.addStrings=function(e,n){if(null==n||n.length<1)return e;for(var r=0,i=n;r<i.length;r++){var o=i[r];t.addString(e,o)}return e},t.shuffle=function(t){for(var e,n,t=t.slice(),r=t.length;0!=r;)n=Math.round(0+(r-1-0)*Math.random()),e=t[n],t[n]=t[r-1],t[r-1]=e,--r;return t},t}();t.ArrayUtils=e,__reflect(e.prototype,"dnc.utils.ArrayUtils")}(e=t.utils||(t.utils={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(){function t(){}return t.getAsyncResByUrl=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return[4,new Promise(function(n,i){RES.getResByUrl(t,function(t,e){n(t)},r,e)})];case 1:return n=i.sent(),[2,n]}})})},t.getCommandValue=function(t,e){if(t&&e&&0==t.indexOf(e)){var n=t.substr(e.length);return n}return null},t.getTextureByBase64=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return null==t?(console.error("getTextureByBase64",t),[2,null]):[4,new Promise(function(e,n){egret.BitmapData.create("base64",t,function(t){e(t)})})];case 1:return e=r.sent(),n=new egret.Texture,n.bitmapData=e,[2,n]}})})},t.getUrlParam=function(t){if(window.location){var e=location.search;if(""==e)return"";e=e.slice(1);for(var n=e.split("&"),r=n.length,i=0;r>i;i++){var o=n[i],a=o.split("=");
if(a[0]==t)return a[1]}}return""},t}();t.DataUtils=e,__reflect(e.prototype,"dnc.utils.DataUtils")}(e=t.utils||(t.utils={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(){function t(){}return t.random=function(t,e){switch(arguments.length){case 1:return Math.floor(Math.random()*t);case 2:return Math.floor(Math.random()*(e-t)+t);default:return 0}},t.toDecimal2=function(t){return Math.round(100*t)/100},t.toPercent=function(e,n){return t.toDecimal2(100*e/n)},t}();t.NumberUtils=e,__reflect(e.prototype,"dnc.utils.NumberUtils")}(e=t.utils||(t.utils={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(){function t(){}return t.delay=function(t){return new Promise(function(e,n){setTimeout(function(){return e()},t)})},t}();t.PromiseUtils=e,__reflect(e.prototype,"dnc.utils.PromiseUtils")}(e=t.utils||(t.utils={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(t){var e=function(){function t(){}return t.formatLongTime=function(t){var e=Math.ceil(t),n=Math.floor(e/60/60%60),r=Math.floor(e/60%60),i=Math.ceil(e%60);return 10>n&&(n="0"+n),10>r&&(r="0"+r),10>i&&(i="0"+i),n+":"+r+":"+i},t.formatShortTime=function(t){var e=Math.ceil(t),n=Math.floor(e/60%60),r=Math.ceil(e%60);return 10>n&&(n="0"+n),10>r&&(r="0"+r),n+":"+r},t.getDate=function(){var t=new Date,e="yyyy-MM-dd\nhh:mm:ss",n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},t}();t.StringUtils=e,__reflect(e.prototype,"dnc.utils.StringUtils")}(e=t.utils||(t.utils={}))}(dnc||(dnc={}));var dnc;!function(t){var e;!function(e){var n=function(){function e(){}return e.onShakeByXY=function(t,e,n){return void 0===n&&(n=!1),__awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return null==t?[2]:(r=t.x,i=t.y,[4,new Promise(function(a){egret.Tween.get(t).to({x:r-e,y:i+e},2e3,egret.Ease.sineOut).to({x:r+e,y:i-e},2e3,egret.Ease.sineOut).to({x:r-e,y:i+e},2e3,egret.Ease.sineOut).to({x:r+e,y:i-e},2e3,egret.Ease.sineOut).to({x:r-e,y:i+e},2e3,egret.Ease.sineOut).to({x:r+e,y:i-e},2e3,egret.Ease.sineOut).call(function(){t.x=r,t.y=i,n&&egret.Tween.removeTweens(t),a()},o)})]);case 1:return a.sent(),[2]}})})},e.onShakeByCenter=function(t,e,n){return void 0===n&&(n=!1),__awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return null==t?[2]:(r=t.horizontalCenter,i=t.verticalCenter,[4,new Promise(function(a){egret.Tween.get(t).to({horizontalCenter:r+e,verticalCenter:i-e},25,egret.Ease.sineOut).to({horizontalCenter:r-e,verticalCenter:i+e},50,egret.Ease.sineOut).to({horizontalCenter:r-e,verticalCenter:i-e},50,egret.Ease.sineOut).to({horizontalCenter:r+e,verticalCenter:i+e},50,egret.Ease.sineOut).to({horizontalCenter:r+e,verticalCenter:i-e},50,egret.Ease.sineOut).to({horizontalCenter:r,verticalCenter:i},25,egret.Ease.sineOut).call(function(){t.horizontalCenter=r,t.verticalCenter=i,n&&egret.Tween.removeTweens(t),a()},o)})]);case 1:return a.sent(),[2]}})})},e.onBlur=function(e,n,r,i,o){return __awaiter(this,void 0,void 0,function(){var a,s,c,u;return __generator(this,function(h){switch(h.label){case 0:return null==e?[2]:o?(a=new egret.BlurFilter(r,r),e.filters=[a],[3,4]):[3,1];case 1:s=n>r?-1:1,c=n,h.label=2;case 2:return c==r?[3,4]:(u=new egret.BlurFilter(c,c),e.filters=[u],c+=s,[4,t.utils.PromiseUtils.delay(i/Math.abs(n-r))]);case 3:return h.sent(),[3,2];case 4:return[2]}})})},e.getMovieClipDataFactory=function(t){var e=RES.getRes(t+"_json"),n=RES.getRes(t+"_png"),r=new egret.MovieClipDataFactory(e,n);return r},e.getMovieClip=function(t,e){var n=RES.getRes(t+"_json"),r=RES.getRes(t+"_png"),i=new egret.MovieClipDataFactory(n,r),o=new egret.MovieClip(i.generateMovieClipData(e));return o},e.isPhoneXFull=function(){var t=document.createElement("canvas"),e=t.getContext("experimental-webgl"),n=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(n.UNMASKED_RENDERER_WEBGL),i=r.indexOf("Apple")>=0,o=375==window.innerWidth&&812==window.innerHeight||414==window.innerWidth&&896==window.innerHeight;return i&&o},e}();e.UIUtils=n,__reflect(n.prototype,"dnc.utils.UIUtils")}(e=t.utils||(t.utils={}))}(dnc||(dnc={}));var mummy;!function(t){var e;!function(e){var n=function(n){function i(t){var e=n.call(this)||this;return e.infos=t,e}return __extends(i,n),i.prototype.onBeforeSkin=function(){},i.prototype.getSkinPath=function(){return"resource/skin/demo/Skin_Demo.exml"},i.prototype.onCreate=function(){this.percentWidth=100,this.percentHeight=100,this.mazePanel.hide(),this.restBtn.visible=!1,this.backBtn.visible=!1,this.showUser(),this.getMaze(),this.mazePanel.addTouchListener(this.onPanelEvent,this),this.restBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.gameLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEvent,this)},i.prototype.onFristRemove=function(){this.mazePanel.removeTouchListener(),this.restBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.gameLab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEvent,this)},i.prototype.getMazeData=function(e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,(new t.net.MazeConnetion).connet(e,n)];case 1:return r=i.sent(),[2,r]}})})},i.prototype.showUser=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e=Number(this.infos[2]),this.avatarImg.mask=this.avatarMask,0==e?[3,2]:[4,(new t.net.UserInfoConnetion).connet(e)];case 1:n=r.sent(),n&&(this.userName.text=n.name,this.avatarImg.source="https://server.9mingame.com/server/gameUser/userImageByte.json?avatar="+encodeURIComponent(n.avatar)),r.label=2;case 2:return[2]}})})},i.prototype.getMaze=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r;return __generator(this,function(i){switch(i.label){case 0:return e=Number(this.infos[3]),n=Number(this.infos[4]),r=this,[4,(new t.net.MazeConnetion).connet(e,n,!1)];case 1:return r.mazeData=i.sent(),[4,this.showMaze()];case 2:return i.sent(),[2]}})})},i.prototype.showMaze=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.maze&&(this.mazeGroup.removeChild(this.maze),this.maze.destory(),this.maze=null),this.restBtn.visible=!1,this.backBtn.visible=!1,this.mazeData?(this.maze=new e.Maze(this.mazeData),this.mazeGroup.addChildAt(this.maze,0),this.mazePanel.scaleX=this.mazePanel.scaleY=this.maze.gridStandard.scale,[4,this.maze.start(this.onMazeChange,this,!0)]):[3,2];case 1:t.sent(),this.restBtn.visible=!0,this.backBtn.visible=!0,this.setPanel(this.maze.getPlayerCoordinate()),t.label=2;case 2:return[2]}})})},i.prototype.onMazeChange=function(t,e){switch(t){case"step":break;case"time":}},i.prototype.setPanel=function(t){this.mazePanel.x=this.maze.gridStandard.side*(t.column+1.5),this.mazePanel.y=this.maze.gridStandard.side*(t.row+1.5),this.mazePanel.show()},i.prototype.onEvent=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(t.target){case this.gameLab:MainLayer.instance.startGame()}return[2]})})},i.prototype.onPanelEvent=function(t){this.onMazeEvent(t)},i.prototype.onMove=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=t.target){case this.restBtn:return[3,1];case this.backBtn:return[3,3]}return[3,5];case 1:return[4,this.onMazeEvent("reset")];case 2:return n.sent(),[3,5];case 3:return[4,this.onMazeEvent("back")];case 4:return n.sent(),[3,5];case 5:return[2]}})})},i.prototype.onMazeEvent=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(i){switch(i.label){case 0:return this.mazePanel.hide(),[4,this.maze.event(t)];case 1:switch(e=i.sent()){case"fail":new r(-1).show(this,this.endDialog,this);break;case"success":n=Number(this.infos[2]),new r(n).show(this,this.endDialog,this);break;case"continue":this.setPanel(this.maze.getPlayerCoordinate());break;case"skip":}return[2]}})})},i.prototype.endDialog=function(e,n){switch(n){case"game":e.close(),MainLayer.instance.startGame();break;case"send":var r=void 0,i=this.maze.getPlayeRecord();r=this.getSendInfo(i.code),t.data.Context.instance.currentPlatform===PlatformType.web?dnc.plat.Plat_HLMY.instance.share(r):t.data.Context.instance.currentPlatform===PlatformType.wxgame&&WX_SDKManager.instance.Share("《盗墓迷城》顺利闯关，快来查看攻略吧。","dnc="+r);break;case"replay":e.close(),this.showMaze()}},i.prototype.getSendInfo=function(t){var e="1_"+this.infos[1]+"_0_"+this.maze.mazeData.level+"_"+this.maze.mazeData.index+"_"+t;return e},i.prototype.destory=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.maze.destory(),[2]})})},i}(dnc.ui.BaseComponent);e.Demo=n,__reflect(n.prototype,"mummy.game.Demo");var r=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.getSkinPath=function(){var t=null;switch(this._type){case-1:t="resource/skin/demo/Skin_Demo_Fail.exml";break;case 0:t="resource/skin/demo/Skin_Demo_Complete.exml";break;default:t="resource/skin/demo/Skin_Demo_Success.exml"}return t},e.prototype.onCreate=function(){this.percentWidth=100,this.percentHeight=100,this.gameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),-1==this._type?this.replayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this):this._type>0&&this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onFristRemove=function(){this.gameBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),-1==this._type?this.replayBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this):this._type>0&&this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.show=function(t,e,n){t&&(this.endCall={callBack:e,self:n},t.addChild(this))},e.prototype.close=function(){this.endCall=null,this.parent&&this.parent.removeChild(this)},e.prototype.onTouch=function(t){var e=null;switch(t.target){case this.gameBtn:e="game";break;case this.sendBtn:e="send";break;case this.replayBtn:e="replay"}this.endCall.callBack.call(this.endCall.self,this,e)},e}(dnc.ui.BaseComponent);e.Demo_Dialog=r,__reflect(r.prototype,"mummy.game.Demo_Dialog")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(n){function r(t){var e=n.call(this)||this;return e.infos=t,e}return __extends(r,n),r.prototype.onBeforeSkin=function(){},r.prototype.getSkinPath=function(){return"resource/skin/demo/Skin_DemoRecord.exml"},r.prototype.onCreate=function(){this.percentWidth=100,this.percentHeight=100,this.nextBtn.visible=!1,this.backBtn.visible=!1,this.showUser(),this.getMaze(),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.gameLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEvent,this)},r.prototype.onFristRemove=function(){this.nextBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMove,this),this.gameLab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEvent,this)},r.prototype.getMazeData=function(e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,(new t.net.MazeConnetion).connet(e,n)];case 1:return r=i.sent(),[2,r]}})})},r.prototype.showUser=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.userName.text="",this.avatarImg.mask=this.avatarMask,this.avatarImg.source="demo_record_ava_png",[2]})})},r.prototype.getMaze=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r,i;return __generator(this,function(o){switch(o.label){case 0:return e=Number(this.infos[3]),n=Number(this.infos[4]),r=this,[4,(new t.net.MazeConnetion).connet(e,n,!1)];case 1:return r.mazeData=o.sent(),[4,this.showMaze()];case 2:return o.sent(),this.stepIndex=0,i=new t.data.RecordCode,this.record=i.decode(this.infos[5]),[2]}})})},r.prototype.showMaze=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.maze&&(this.mazeGroup.removeChild(this.maze),this.maze.destory(),this.maze=null),this.nextBtn.visible=!1,this.backBtn.visible=!1,this.mazeData?(this.maze=new e.Maze(this.mazeData,!1),this.mazeGroup.addChildAt(this.maze,0),[4,this.maze.start(this.onMazeChange,this)]):[3,2];case 1:t.sent(),this.nextBtn.visible=!0,this.backBtn.visible=!0,t.label=2;case 2:return[2]}})})},r.prototype.onMazeChange=function(t,e){switch(t){case"step":break;case"time":}},r.prototype.onEvent=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(t.target){case this.gameLab:MainLayer.instance.startGame()}return[2]})})},r.prototype.onMove=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=t.target){case this.nextBtn:return[3,1];case this.backBtn:return[3,4]}return[3,7];case 1:return this.stepIndex<=this.record.length-1?[4,this.onMoveEvent(this.record.charAt(this.stepIndex))]:[3,3];case 2:"continue"==n.sent()&&(this.stepIndex+=1),n.label=3;case 3:return[3,7];case 4:return this.stepIndex>0?[4,this.maze.event("back")]:[3,6];case 5:"continue"==n.sent()&&(this.stepIndex-=1),n.label=6;case 6:return[3,7];case 7:return[2]}})})},r.prototype.onMoveEvent=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=null,t){case"0":e="wait";break;case"1":e="up";break;case"2":e="down";break;case"3":e="left";break;case"4":e="right"}return e?[4,this.maze.event(e)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,"skip"]}})})},r.prototype.onMazeEvent=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.maze.event(t)];case 1:switch(e=n.sent()){case"fail":break;case"success":break;case"continue":break;case"skip":}return[2]}})})},r.prototype.destory=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.maze.destory(),[2]})})},r}(dnc.ui.BaseComponent);e.DemoRecord=n,__reflect(n.prototype,"mummy.game.DemoRecord")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/game/end/Skin_BulbDialog.exml"},n.prototype.onCreate=function(){this.percentHeight=100,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this),this.inviteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this),this.playAdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this),t.data.Context.instance.adOpen||(this.playAdBtn.enabled=!1)},n.prototype.onFristRemove=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this),this.inviteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this),this.playAdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this)},n.prototype.getBulbFunc=function(e){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(r){switch(e.target){case this.inviteBtn:t.data.Context.instance.currentPlatform===PlatformType.web?dnc.plat.Plat_HLMY.instance.share("快来帮助我吧"):WX_SDKManager.instance.Share("快来和我在《盗墓迷城》中一起探险挖宝吧！","");break;case this.playAdBtn:if(t.data.Context.instance.gameInfoData.advBulbNum>=3)return MainLayer.instance.showTipInfo("每天只有3次免费领取的机会，明天再来吧！"),[2];t.data.Context.instance.adOpen&&WX_SDKManager.instance.showVideoAD(ADType.TYPE_GET_BULB,function(e){return __awaiter(n,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return 0!==e?[3,2]:(MainLayer.instance.showTipInfo("获取奖励成功"),[4,(new t.net.AddAdvBulbConnetion).connet()]);case 1:return n=r.sent(),[3,3];case 2:1===e?MainLayer.instance.showTipInfo("观看完整视频才能获得观看券"):2===e&&MainLayer.instance.showTipInfo("广告加载失败"),r.label=3;case 3:return[2]}})})},this)}return[2]})})},n.prototype.closeFunc=function(t){this.parent&&this.parent.removeChild(this)},n}(dnc.ui.BaseComponent);e.BulbDialog=n,__reflect(n.prototype,"mummy.game.BulbDialog")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(n){function r(t,e,r,i){var o=n.call(this)||this;return o.type=t,o.data=e,o.callObj={callBack:r,self:i},o}return __extends(r,n),r.prototype.onBeforeSkin=function(){},r.prototype.getSkinPath=function(){return"resource/skin/game/end/Skin_DialogEnd.exml"},r.prototype.onCreate=function(){t.data.Context.instance.adOpen?(this.restartBtn.iconDisplay.source="ad_ResetGameBtn_png",this.nextBtn.iconDisplay.source="ad_NextGameBtn_png"):(this.restartBtn.iconDisplay.source="end_record_restart_png",this.nextBtn.iconDisplay.source="end_next_png"),this.percentHeight=100,this.recordScroller.verticalScrollBar.autoVisibility=!1,this.recordScroller.mask=this.scrollerMask,this.indexLab.text="第"+this.data.currentChapter.index+"层",this.setRecordList(this.data.chapterRecordList),this.setMine(this.data.selfChapterInfo,"success"==this.type),this.restartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},r.prototype.onFristRemove=function(){this.restartBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.nextBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},r.prototype.setRecordList=function(t){if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n],o=new e.EndRecord(i,!1,this.help,this);this.recordGroup.addChild(o)}},r.prototype.help=function(t,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){return n?this.callObj.callBack.call(this.callObj.self,this,"help",t.recordId):(r=new e.BulbDialog,this.parent.addChild(r)),[2]})})},r.prototype.setMine=function(t,n){if(n){if(this.tipLab.visible=!1,this.myGroup.visible=!0,t){var r=new e.MyEndRecord(t);this.myGroup.addChild(r)}}else this.tipLab.visible=!0,this.recordGroup.numChildren>0?this.tipLab.text='点击"查看"可以学习大神是怎么通关的!':this.tipLab.text="当前还没有人通过本关卡，加油哦!",this.myGroup.visible=!1,this.btnGroup.removeChild(this.nextBtn)},r.prototype.show=function(t){t&&t.addChild(this)},r.prototype.close=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.callObj&&(this.callObj=null),this.parent&&this.parent.removeChild(this),[2]})})},r.prototype.onTouch=function(e){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(r){switch(this.nextBtn.enabled=!1,this.restartBtn.enabled=!1,e.target){case this.nextBtn:t.data.Context.instance.currentPlatform===PlatformType.wxgame?WX_SDKManager.instance.showVideoAD(ADType.TYPE_NEXT_LEVEL,function(e){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(n){return this.nextBtn.enabled=!0,this.restartBtn.enabled=!0,0===e?this.callObj.callBack.call(this.callObj.self,this,"next",this.data.currentChapter.chapter):1===e?MainLayer.instance.showTipInfo("观看完整视频才能进入下一关"):2===e&&(MainLayer.instance.showTipInfo("广告加载失败"),1===t.data.Context.instance.configInfo.nextLevel&&this.callObj.callBack.call(this.callObj.self,this,"next",this.data.currentChapter.chapter)),[2]})})},this):t.data.Context.instance.currentPlatform===PlatformType.web&&this.callObj.callBack.call(this.callObj.self,this,"next",this.data.currentChapter.chapter);break;case this.restartBtn:t.data.Context.instance.currentPlatform===PlatformType.wxgame?WX_SDKManager.instance.showVideoAD(ADType.TYPE_REST_GAME,function(e){return __awaiter(n,void 0,void 0,function(){return __generator(this,function(n){return this.nextBtn.enabled=!0,this.restartBtn.enabled=!0,0===e?this.callObj.callBack.call(this.callObj.self,this,"restart"):1===e?MainLayer.instance.showTipInfo("观看完整视频才能重新开始"):2===e&&(MainLayer.instance.showTipInfo("广告加载失败"),1===t.data.Context.instance.configInfo.nextLevel&&this.callObj.callBack.call(this.callObj.self,this,"restart")),[2]})})},this):t.data.Context.instance.currentPlatform===PlatformType.web&&this.callObj.callBack.call(this.callObj.self,this,"restart")}return[2]})})},r}(dnc.ui.BaseComponent);e.DialogEnd=n,__reflect(n.prototype,"mummy.game.DialogEnd")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(t,n,r,i){var o=e.call(this)||this;return o.isMine=n,o.callObj={callBack:r,self:i},o.data=t,o}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/game/end/Skin_EndRecord.exml"},n.prototype.onCreate=function(){this.avatarImg.mask=this.avatarMask,this.avatarImg.source="https://server.9mingame.com/server/gameUser/userImageByte.json?avatar="+encodeURIComponent(this.data.avatar),this.bgImg.source=this.isMine?"end_record_bg_min_png":"end_record_bg_oth_png",this.nameLab.text=this.data.name,this.stepLab.text=this.data.stepNum,this.timeLab.text=dnc.utils.StringUtils.formatShortTime(this.data.useTime),this.dateLab.text=this.data.passTime,this.consumeBulbNum.text="消耗"+this.data.consumeBulbNum,this.isMine?(this.rankLab.visible=!1,this.helpBtn.visible=!1):(this.rankLab.text=this.data.playerRank,this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this))},n.prototype.onFristRemove=function(){this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},n.prototype.onTouch=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.data.Context.instance.gameInfoData.bulbNum<this.data.consumeBulbNum?this.callObj.callBack.call(this.callObj.self,this.data,!1):this.callObj.callBack.call(this.callObj.self,this.data,!0),[2]})})},n}(dnc.ui.BaseComponent);e.EndRecord=n,__reflect(n.prototype,"mummy.game.EndRecord")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n}return __extends(e,t),e.prototype.onBeforeSkin=function(){},e.prototype.getSkinPath=function(){return"resource/skin/game/end/Skin_MyEndRecord.exml"},e.prototype.onCreate=function(){this.isRank.visible=!1,this.avatarImg.mask=this.avatarMask,this.avatarImg.source="https://server.9mingame.com/server/gameUser/userImageByte.json?avatar="+encodeURIComponent(this.data.avatar),this.nameLab.text="我的记录",this.stepLab.text=this.data.stepNum,this.timeLab.text=dnc.utils.StringUtils.formatShortTime(this.data.useTime),this.dateLab.text=this.data.passTime,1===this.data.isRank?this.isRank.visible=!0:this.isRank.visible=!1},e.prototype.onFristRemove=function(){},e}(dnc.ui.BaseComponent);t.MyEndRecord=e,__reflect(e.prototype,"mummy.game.MyEndRecord")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(n){function r(){var t=n.call(this)||this;return t.timer=new egret.Timer(12e4,0),t.timer.addEventListener(egret.TimerEvent.TIMER,t.timerFunc,t),t.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t.timerComFunc,t),t.timer.start(),RES.loadGroup("elseGroup"),RES.loadGroup("soundGroup"),RES.isGroupLoaded("gameGroup")||RES.loadGroup("gameGroup"),t}return __extends(r,n),r.prototype.onBeforeSkin=function(){},r.prototype.getSkinPath=function(){return"resource/skin/game/Skin_Game.exml"},r.prototype.onCreate=function(){var e=dnc.utils.UIUtils.getMovieClip("fire","fire"),n=dnc.utils.UIUtils.getMovieClip("fire","fire");this.torchGroup.addChild(e),this.torchGroup.addChild(n),e.x=150,n.x=this.stage.stageWidth-150,e.gotoAndPlay("fire",-1),n.scaleX=-1,n.gotoAndPlay("fire",-1),this.percentWidth=100,this.percentHeight=100,this.showStartDialog(t.data.Context.instance.currentChapter),this.mapBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.collectionBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.musicBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.touchRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulb,this),t.data.Context.instance.gameInfoData.addDataListener(this.refreshGameInfo,this)},r.prototype.onFristRemove=function(){this.mapBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rankBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.collectionBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.musicBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.touchRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulb,this),t.data.Context.instance.gameInfoData.removeDataListener(this.refreshGameInfo,this),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this)},r.prototype.refreshGameInfo=function(t){this.bulbNum.text=t.bulbNum.toString()},r.prototype.showStartDialog=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){return this.currentDialog&&this.currentDialog.close(),n=new e.DialogStart(t,this.onStartDialogEvent,this),this.currentDialog=n,n.show(this),[2]})})},r.prototype.showEndDialog=function(t,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){return this.currentDialog&&this.currentDialog.close(),r=new e.DialogEnd(t,n,this.onEndDialogEvent,this),this.currentDialog=r,r.show(this),[2]})})},r.prototype.getMazeData=function(e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,(new t.net.MazeConnetion).connet(e,n)];case 1:return r=i.sent(),[2,r]}})})},r.prototype.onStartDialogEvent=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getMazeData(e,n)];case 1:return r=i.sent(),r&&(t.close(),this.showMaze(r),this.mazeData=r),[2]}})})},r.prototype.onEndDialogEvent=function(n,r,i){return __awaiter(this,void 0,void 0,function(){var o,a,s,c,u;return __generator(this,function(h){switch(h.label){case 0:switch(o=r){case"restart":return[3,1];case"next":return[3,2];case"help":return[3,6]}return[3,7];case 1:return n.close(),this.showMaze(this.mazeData),[3,7];case 2:return a=this.mazeData.index+1,15>=a?[4,this.getMazeData(this.mazeData.level,a)]:[3,4];case 3:return s=h.sent(),s&&(n.close(),this.showMaze(s),this.mazeData=s),[3,5];case 4:n.close(),this.showStartDialog(i),c=new t.map.Map(this.onMapEvent,this),this.addChild(c),h.label=5;case 5:return[3,7];case 6:return u=new e.RecordMaze(this.mazeData,i),this.addChild(u),[3,7];case 7:return[2]}})})},r.prototype.onMapEvent=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.gameMaze&&(this.gameMaze.destory(),this.mazeGroup.removeChild(this.gameMaze),this.gameMaze=null),this.showStartDialog(t),[2]})})},r.prototype.showMaze=function(t){this.gameMaze=new e.GameMaze(t),this.mazeGroup.addChild(this.gameMaze),this.gameMaze.start(this.onEndMaze,this)},r.prototype.onEndMaze=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return this.gameMaze&&(this.gameMaze.destory(),this.mazeGroup.removeChild(this.gameMaze),this.gameMaze=null),this.showEndDialog(t,e),[2]})})},r.prototype.onTouch=function(n){return __awaiter(this,void 0,void 0,function(){var r,i,o,a;return __generator(this,function(s){switch(n.target){case this.musicBtn:r=!this.musicBtn.selected,e.SoundManager.instance.setState(r);break;case this.mapBtn:i=new t.map.Map(this.onMapEvent,this),this.addChild(i);break;case this.rankBtn:o=new t.game.Rank,this.addChild(o);break;case this.collectionBtn:a=new t.game.Treasure,this.addChild(a)}return[2]})})},r.prototype.initUserInfo=function(){this.userName.text=t.data.Context.instance.userInfo.name,this.avatarImg.mask=this.avatarMask,this.avatarImg.source="https://server.9mingame.com/server/gameUser/userImageByte.json?avatar="+encodeURIComponent(t.data.Context.instance.userInfo.avatar)},r.prototype.getBulb=function(){var t=new e.GetBulb;this.addChild(t)},r.prototype.timerFunc=function(){(new t.net.HeartbeatConnetion).connet()},r.prototype.timerComFunc=function(){},r}(dnc.ui.BaseComponent);e.Game=n,__reflect(n.prototype,"mummy.game.Game")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(n){function r(r){var i=n.call(this)||this;return i.tipInfos=["躲避出现的各种怪物，到达楼梯进入下一层","宝物会出现在迷宫的最后一层","巧用机关和墙壁阻挡怪物的追击","白色僵尸会优先横向追击","红色僵尸会优先纵向追击","设法让怪物自相残杀","点击自己可以原地停留一次","有些地方你不能像怪物一样顺利通过","无法过关时,试试求助好友或者查看一下大神的记录","用最短的步数和时间完成闯关，就会登上排行榜"],i.maze=new e.Maze(r),i.isTest=r.test,i.statisticsData=new e.MazeStatisticsData(t.data.Context.instance.userInfo.uid,r),i.allowBack=!1,i.tipTimer=new egret.Timer(8e3,0),i}return __extends(r,n),r.prototype.onBeforeSkin=function(){},r.prototype.getSkinPath=function(){return"resource/skin/maze/Skin_GameMaze.exml"},r.prototype.onCreate=function(){t.data.Context.instance.adOpen?(this.backBtn.iconDisplay.source="footer_backAd_png",this.exitBtn.iconDisplay.source="maze_AD_ResetGameBtn_png"):(this.backBtn.iconDisplay.source="footer_back_png",this.exitBtn.iconDisplay.source="footer_reset_png"),this.mazeGroup.addChildAt(this.maze,0),this.titleGroup.visible=!1,this.footerGroup.visible=!1,this.mazePanel.hide(),this.mazePanel.scaleX=this.mazePanel.scaleY=this.maze.gridStandard.scale,this.indexLab.text="第"+this.maze.mazeData.index+"层",this.mazePanel.addTouchListener(this.onPanelEvent,this),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.tipTimer.addEventListener(egret.TimerEvent.TIMER,this.onTip,this)},r.prototype.onFristRemove=function(){this.mazePanel.removeTouchListener(),this.exitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.tipTimer.stop(),this.tipTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTip,this)},r.prototype.onTip=function(t){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return egret.Tween.get(this.tipLab).to({alpha:0},200,egret.Ease.sineOut).call(function(){t.tipLab.text;t.getTip(t.tipLab)},this).to({alpha:1},200,egret.Ease.sineIn),[2]})})},r.prototype.getTip=function(t){var e=null;do{var n=dnc.utils.NumberUtils.random(this.tipInfos.length);e="小提示："+this.tipInfos[n]}while(t.text==e);t.text=e},r.prototype.setPanel=function(t){var e=10==this.maze.gridStandard.size?-4:0;this.mazePanel.x=this.maze.gridStandard.side*(t.column+1.5)+e,this.mazePanel.y=this.maze.gridStandard.side*(t.row+1.5)+e,this.mazePanel.show()},r.prototype.start=function(t,e){return __awaiter(this,void 0,void 0,function(){var n;
return __generator(this,function(r){switch(r.label){case 0:return this.endMaze={callBack:t,self:e},n=1==this.maze.mazeData.level&&1==this.maze.mazeData.index,[4,this.maze.start(this.onMazeChange,this,n)];case 1:return r.sent(),this.titleGroup.visible=!0,this.footerGroup.visible=!0,this.setPanel(this.maze.getPlayerCoordinate()),this.tipTimer.start(),[2]}})})},r.prototype.onMazeChange=function(t,e){switch(t){case"step":this.stepLab.text=""+e;break;case"time":this.timeLab.text=dnc.utils.StringUtils.formatShortTime(e);break;case"backEnd":this.allowBack=!1,this.statisticsData.cancelNum+=1}},r.prototype.onTouch=function(e){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:switch(n=e.target){case this.helpBtn:return[3,1];case this.exitBtn:return[3,3];case this.backBtn:return[3,7]}return[3,11];case 1:return this.statisticsData.helpNum+=1,[4,this.onCommandEvent("help")];case 2:return i.sent(),[3,11];case 3:return t.data.Context.instance.currentPlatform!==PlatformType.wxgame?[3,4]:(WX_SDKManager.instance.showVideoAD(ADType.TYPE_REST_GAME,function(t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return 0!==t?[3,2]:(this.statisticsData.resetNum+=1,[4,this.onMoveEvent("reset")]);case 1:return e.sent(),[3,3];case 2:1===t?MainLayer.instance.showTipInfo("观看完整视频才能重新开始游戏"):2===t&&MainLayer.instance.showTipInfo("广告加载失败"),e.label=3;case 3:return[2]}})})},this),[3,6]);case 4:return this.statisticsData.resetNum+=1,[4,this.onMoveEvent("reset")];case 5:i.sent(),i.label=6;case 6:return[3,11];case 7:return t.data.Context.instance.currentPlatform!==PlatformType.web&&t.data.Context.instance.adOpen||(this.allowBack=!0),this.allowBack?[4,this.onMoveEvent("back")]:[3,9];case 8:return i.sent(),[3,10];case 9:WX_SDKManager.instance.showVideoAD(ADType.TYPE_BACK_STEP,function(e){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return 0!==e?[3,2]:(this.allowBack=!0,[4,this.onMoveEvent("back")]);case 1:return n.sent(),[3,5];case 2:return 1!==e?[3,3]:(MainLayer.instance.showTipInfo("观看完整视频才能获得撤销资格"),[3,5]);case 3:return 2!==e?[3,5]:(MainLayer.instance.showTipInfo("广告加载失败"),1!==t.data.Context.instance.configInfo.revocation?[3,5]:(this.allowBack=!0,[4,this.onMoveEvent("back")]));case 4:n.sent(),n.label=5;case 5:return[2]}})})},this),i.label=10;case 10:return[3,11];case 11:return[2]}})})},r.prototype.onPanelEvent=function(t){this.onMoveEvent(t)},r.prototype.onCommandEvent=function(e){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(e){case"help":n=this.getHelpInfo(),t.data.Context.instance.currentPlatform===PlatformType.web?dnc.plat.Plat_HLMY.instance.share(n):WX_SDKManager.instance.Share("我在《盗墓迷城》被僵尸困住了，SOS！","dnc="+n)}return[2]})})},r.prototype.getHelpInfo=function(){var e=(new Date).getTime().toString(36),n="0_"+e+"_"+t.data.Context.instance.userInfo.userId+"_"+this.maze.mazeData.level+"_"+this.maze.mazeData.index;return n},r.prototype.onMoveEvent=function(e){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s;return __generator(this,function(c){switch(c.label){case 0:return this.mazePanel.hide(),[4,this.maze.event(e)];case 1:switch(n=c.sent(),r=n){case"fail":return[3,2];case"success":return[3,4];case"continue":return[3,6];case"skip":return[3,7]}return[3,8];case 2:return i=this.maze.getPlayeRecord(),[4,(new t.net.MazeRecordConnetion).connet(i,this.isTest)];case 3:return o=c.sent(),this.endMaze.callBack.call(this.endMaze.self,"fail",o),[3,8];case 4:return a=this.maze.getPlayeRecord(),[4,(new t.net.MazeRecordConnetion).connet(a,this.isTest)];case 5:return s=c.sent(),this.onsucdess(s),[3,8];case 6:return this.setPanel(this.maze.getPlayerCoordinate()),[3,8];case 7:return[3,8];case 8:return("fail"==n||"success"==n)&&(this.statisticsData.passState="success"==n?1:0,(new t.net.StatisticsMazeConnection).connet(this.statisticsData)),[2]}})})},r.prototype.onsucdess=function(t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){return null==t?[2]:(0!=t.treasureId?(this.mazeGroup.removeChild(this.maze),n=this.maze.mazeData.size,r=t.treasureId,i=new e.BoxMaze(n,t,this.onBoxEnd,this),this.mazeGroup.addChild(i)):this.endMaze.callBack.call(this.endMaze.self,"success",t),[2])})})},r.prototype.onBoxEnd=function(t){this.endMaze.callBack.call(this.endMaze.self,"success",t)},r.prototype.destory=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.endMaze=null,this.maze.destory(),[2]})})},r}(dnc.ui.BaseComponent);e.GameMaze=n,__reflect(n.prototype,"mummy.game.GameMaze")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(){function e(){this.currentPlatform=PlatformType.web,this.adOpen=!1,this.connect_error=!1,e.instance=this,this.gameInfoData=new t.GameInfoData}return e.init=function(){new e},e}();t.Context=e,__reflect(e.prototype,"mummy.data.Context")}(e=t.data||(t.data={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(n){function r(t,r){var i=n.call(this)||this;return i.maze=new e.Maze(t,!1),i.recordId=r,i}return __extends(r,n),r.prototype.onBeforeSkin=function(){},r.prototype.getSkinPath=function(){return"resource/skin/maze/Skin_RecordMaze.exml"},r.prototype.onCreate=function(){this.avatarImg.mask=this.avatarMask,this.maze.horizontalCenter=0,this.maze.verticalCenter=0,this.maze.scaleX=this.maze.scaleY=.8125,this.mazeGroup.addChildAt(this.maze,0),this.start(),this.getRecord(),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},r.prototype.onFristRemove=function(){this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.nextBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},r.prototype.getRecord=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,(new t.net.PlayerRecordConnetion).connet(this.recordId)];case 1:return e=i.sent(),null==e||null==e.chapterRecordInfo?[2]:(n=e.chapterRecordInfo,this.avatarImg.source="https://server.9mingame.com/server/gameUser/userImageByte.json?avatar="+encodeURIComponent(n.avatar),this.nameLab.text=n.name,this.stepLab.text=n.stepNum,this.timeLab.text=dnc.utils.StringUtils.formatShortTime(n.useTime),this.dateLab.text=n.passTime,r=new t.data.RecordCode,this.record=r.decode(n.record),this.stepIndex=0,[2])}})})},r.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.backBtn.visible=!1,this.nextBtn.visible=!1,[4,this.maze.start(this.onMazeChange,this)];case 1:return t.sent(),this.backBtn.visible=!0,this.nextBtn.visible=!0,[2]}})})},r.prototype.onMazeChange=function(t,e){switch(t){case"step":break;case"time":}},r.prototype.onTouch=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=t.target){case this.backBtn:return[3,1];case this.nextBtn:return[3,4];case this.closeBtn:return[3,7]}return[3,8];case 1:return this.stepIndex>0?[4,this.maze.event("back")]:[3,3];case 2:"continue"==n.sent()&&(this.stepIndex-=1),n.label=3;case 3:return[3,8];case 4:return this.stepIndex<=this.record.length-1?[4,this.onMoveEvent(this.record.charAt(this.stepIndex))]:[3,6];case 5:"continue"==n.sent()&&(this.stepIndex+=1),n.label=6;case 6:return[3,8];case 7:return this.parent&&this.parent.removeChild(this),[3,8];case 8:return[2]}})})},r.prototype.onMoveEvent=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=null,t){case"0":e="wait";break;case"1":e="up";break;case"2":e="down";break;case"3":e="left";break;case"4":e="right"}return e?[4,this.maze.event(e)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,"skip"]}})})},r.prototype.destory=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.maze.destory(),[2]})})},r}(dnc.ui.BaseComponent);e.RecordMaze=n,__reflect(n.prototype,"mummy.game.RecordMaze")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(){function t(){t.instance=this,this.musicVolume=.3,this.soundVolume=.6}return t.prototype.onPause=function(){this.musicChannel&&this.currentMusic&&(this.currentMusic.positon=this.musicChannel.position,this.musicChannel.stop(),this.musicChannel=null)},t.prototype.onResume=function(){this.currentMusic&&this._playMusic(this.currentMusic.id,this.currentMusic.positon)},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){return t=RES.getRes("collision_mp3"),e=t.play(0,1),e.volume=0,[2]})})},t.prototype.setState=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.musicVolume=t?.3:0,this.soundVolume=t?.6:0,this.musicChannel&&(this.musicChannel.volume=this.musicVolume),[2]})})},t.prototype.playMusic=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=null,t){case"game":e="mu1";break;case"maze":e="mu2"}return[4,this._playMusic(e)];case 1:return n.sent(),[2]}})})},t.prototype.playSound=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:switch(e=null,t){case"pmove":e=Math.random()<.5?"pa_walk":"pb_walk";break;case"mmove":e=Math.random()<.5?"ma_walk":"mb_walk";break;case"smove":e=Math.random()<.5?"sa_walk":"sb_walk";break;case"gate":e="gate";break;case"trap":e="trap";break;case"death":e="death";break;case"collision":e="collision";break;case"start":e="start";break;case"success":e="success"}return[4,this._playSound(e)];case 1:return n.sent(),[2]}})})},t.prototype._playMusic=function(t,e){return void 0===e&&(e=0),__awaiter(this,void 0,void 0,function(){var n,r,i,o,a;return __generator(this,function(s){switch(s.label){case 0:return null==t?[2]:(this.musicChannel&&(this.musicChannel.stop(),this.musicChannel=null,this.currentMusic=null),n=t+"_mp3",[4,RES.getResAsync(n)]);case 1:if(r=s.sent(),null==r)return[2];i=r.play(e,0),this.musicChannel=i,this.currentMusic={id:t,positon:e},o=this.musicVolume,a=0,s.label=2;case 2:if(!(o>a))return[3,5];try{i.volume=a}catch(c){return[2]}return[4,dnc.utils.PromiseUtils.delay(100)];case 3:s.sent(),s.label=4;case 4:return a+=.05,[3,2];case 5:try{i.volume=o}catch(c){}return[2]}})})},t.prototype._playSound=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,r;return __generator(this,function(i){switch(i.label){case 0:return null==t?[2]:(e=t+"_mp3",[4,RES.getResAsync(e)]);case 1:return n=i.sent(),null==n?[2]:0==this.soundVolume?[2]:(r=n.play(0,1),r.volume=this.soundVolume,[2])}})})},t}();t.SoundManager=e,__reflect(e.prototype,"mummy.game.SoundManager")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/game/getbulb/Skin_GetBulb.exml"},n.prototype.onCreate=function(){this.percentHeight=100,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this),this.inviteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this),this.playAdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this),t.data.Context.instance.adOpen||(this.playAdBtn.enabled=!1)},n.prototype.onFristRemove=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this),this.inviteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this),this.playAdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getBulbFunc,this)},n.prototype.getBulbFunc=function(e){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(r){switch(e.target){case this.inviteBtn:t.data.Context.instance.currentPlatform===PlatformType.web?dnc.plat.Plat_HLMY.instance.share("快来帮助我吧"):WX_SDKManager.instance.Share("快来和我在《盗墓迷城》中一起探险挖宝吧！","");break;case this.playAdBtn:if(t.data.Context.instance.gameInfoData.advBulbNum>=3)return MainLayer.instance.showTipInfo("每天只有3次免费领取的机会，明天再来吧！"),[2];t.data.Context.instance.adOpen&&WX_SDKManager.instance.showVideoAD(ADType.TYPE_GET_BULB,function(e){return __awaiter(n,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return 0!==e?[3,2]:(MainLayer.instance.showTipInfo("获取奖励成功"),[4,(new t.net.AddAdvBulbConnetion).connet()]);case 1:return n=r.sent(),[3,3];case 2:1===e?MainLayer.instance.showTipInfo("观看完整视频才能获得观看券"):2===e&&MainLayer.instance.showTipInfo("广告加载失败"),r.label=3;case 3:return[2]}})})},this)}return[2]})})},n.prototype.closeFunc=function(t){this.parent&&this.parent.removeChild(this)},n}(dnc.ui.BaseComponent);e.GetBulb=n,__reflect(n.prototype,"mummy.game.GetBulb")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(e){function n(t,n,r,i){var o=e.call(this)||this;return o.size=t,o.mdata=n,o.endCall={callBack:r,self:i},o}return __extends(n,e),n.prototype.getSkinPath=function(){return"resource/skin/maze/Skin_BoxMaze.exml"},n.prototype.setGridStandard=function(){switch(this.gridStandard=new t.GridStandard,this.gridStandard.size=this.size,this.size){case 6:this.bgImg.source="maze_bg_6_jpg",this.gridStandard.side=80;break;case 8:this.bgImg.source="maze_bg_8_jpg",this.gridStandard.side=64;break;case 10:this.bgImg.source="maze_bg_10_jpg",this.gridStandard.side=54;break;default:console.error("setGridStandard",this.size)}this.gridStandard.scale=this.gridStandard.side/t.GridStandard.DefauleSide},n.prototype.initMask=function(){this.centerGroup.mask=this.centerMask,this.mazeMask=new eui.Image("maze_mask_png"),this.mazeMask.anchorOffsetX=this.mazeMask.anchorOffsetY=48,this.mazeMask.scaleX=this.mazeMask.scaleY=0,this.mazeMask.visible=!1,this.mazeMask.x=320,this.mazeMask.y=320-this.gridStandard.side,this.centerGroup.addChild(this.mazeMask),this.mazeGroup.mask=this.mazeMask},n.prototype.onCreate=function(){this.setGridStandard(),this.initMask();var e=this.gridStandard.size*this.gridStandard.side;this.staticGroup.width=this.staticGroup.height=e;var n=10==this.gridStandard.size?50:this.gridStandard.side;this.staticGroup.x=this.staticGroup.y=n;var r=new eui.Image("maze_box_png");r.scaleX=r.scaleY=this.gridStandard.scale,r.x=(this.gridStandard.size/2-1)*this.gridStandard.side,r.y=(this.gridStandard.size/2-1.5)*this.gridStandard.side,this.staticGroup.addChild(r);var i=new eui.Image("exit_bottom_png");i.scaleX=i.scaleY=this.gridStandard.scale,i.x=(this.gridStandard.size/2-1)*this.gridStandard.side,i.y=this.gridStandard.size*this.gridStandard.side,this.staticGroup.addChild(i),this.player=new t.Player(this,!1),this.player.setCoordinate(new t.Coordinate(this.gridStandard.size+1,this.gridStandard.size/2-1),"up",!1),this.staticGroup.addChild(this.player),this.play(),this.treasureGrp.scaleX=this.treasureGrp.scaleY=0,this.centerGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnd,this)},n.prototype.onFristRemove=function(){this.centerGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnd,this),egret.Tween.removeTweens(this.lightEffectImg),this.endCall=null},n.prototype.play=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return e=48,[4,new Promise(function(t){egret.Tween.get(r.mazeMask).to({scaleX:24,scaleY:24},24*e,egret.Ease.sineIn).call(function(){t(),r.mazeMask=null,r.mazeGroup.mask=null},r)})];case 1:return i.sent(),n=new t.Coordinate(this.gridStandard.size/2,this.gridStandard.size/2-1),[4,this.player.moveByCoordinate(n)];case 2:return i.sent(),this.showTreasure(this.mdata.treasureId),[2]}})})},n.prototype.showTreasure=function(t){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(n){return egret.Tween.get(this.lightEffectImg,{loop:!0}).to({rotation:360},4e3).call(function(){e.lightEffectImg.rotation=0}),egret.Tween.get(this.treasureGrp).to({scaleX:1,scaleY:1},200,egret.Ease.sineIn),this.treasureImg.source="wupin_"+t+"_png",[2]})})},n.prototype.onEnd=function(t){1==this.treasureGrp.scaleX&&this.endCall&&this.endCall.callBack.call(this.endCall.self,this.mdata)},n.prototype.canMove=function(t,e){return!0},n.prototype.getMazeMask=function(){return null},n.prototype.getMazeBMask=function(){return null},n}(dnc.ui.BaseComponent);t.BoxMaze=e,__reflect(e.prototype,"mummy.game.BoxMaze")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(){function t(){}return t}();t.MazeData=e,__reflect(e.prototype,"mummy.game.MazeData");var n=function(){function t(t,e){this.row=t,this.column=e}return t.prototype.equals=function(t){return this.row==t.row&&this.column==t.column},t.prototype.clone=function(){return new t(this.row,this.column)},t}();t.Coordinate=n,__reflect(n.prototype,"mummy.game.Coordinate");var r=function(){function t(){}return t}();t.GridData=r,__reflect(r.prototype,"mummy.game.GridData");var i=function(){function t(t,e){this.coordinate=new n(t,e)}return t}();t.PlayerData=i,__reflect(i.prototype,"mummy.game.PlayerData");var o=function(){function t(){}return t}();t.MonsterData=o,__reflect(o.prototype,"mummy.game.MonsterData");var a=function(){function t(t,e,r,i,o){void 0===i&&(i=1),void 0===o&&(o=0),this.coordinate=new n(t,e),this.id=r,this.type=i,this.state=o}return t}();t.MechanismData=a,__reflect(a.prototype,"mummy.game.MechanismData");var s=function(){function t(t,e,n,r){this.event=r,this.roleRecords=[],this.mechanismRecords=[],this.roleRecords.push(new c(t));for(var i=0,o=e;i<o.length;i++){var a=o[i];this.roleRecords.push(new c(a))}for(var s=0,h=n;s<h.length;s++){var l=h[s];this.mechanismRecords.push(new u(l))}}return t}();t.RecordData=s,__reflect(s.prototype,"mummy.game.RecordData");var c=function(){function t(t){this.role=t,this.coordinate=new n(t.coordinate.row,t.coordinate.column),this.direction=t.direction,this.parent=t.parent}return t}();t.RoleRecordData=c,__reflect(c.prototype,"mummy.game.RoleRecordData");var u=function(){function t(t){this.name=t.name,this.state=t.state}return t}();t.MechanismRecordData=u,__reflect(u.prototype,"mummy.game.MechanismRecordData");var h=function(){function t(){}return t}();t.PlayRecordData=h,__reflect(h.prototype,"mummy.game.PlayRecordData");var l=function(){function t(t,e){this.uid=t,this.chapterNo=e.level,this.chapterIndex=e.index,this.resetNum=0,this.cancelNum=0,this.helpNum=0,this.passState=0,this.advState=0,this.extInfo=""}return t}();t.MazeStatisticsData=l,__reflect(l.prototype,"mummy.game.MazeStatisticsData");var d=function(){function t(){this.extInfo=""}return t}();t.DemoStatisticsData=d,__reflect(d.prototype,"mummy.game.DemoStatisticsData");var m=function(){function t(){}return t}();t.UserData=m,__reflect(m.prototype,"mummy.game.UserData")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(n){function r(t,e){void 0===e&&(e=!0);var r=n.call(this)||this;return r.records=[],r.isPass=!1,r.durationTimer=new egret.Timer(1e3,0),r.isGame=e,r.mazeData=t,r.backNum=0,r}return __extends(r,n),r.prototype.initMask=function(){this.mazeMask=new eui.Image("maze_mask_png"),this.mazeMask.anchorOffsetX=this.mazeMask.anchorOffsetY=48,this.mazeMask.scaleX=this.mazeMask.scaleY=0,this.mazeMask.visible=!1,this.mazeBMask=new eui.Image("maze_b_mask_png"),this.mazeBMask.anchorOffsetX=this.mazeBMask.anchorOffsetY=210,this.mazeBMask.scaleX=this.mazeBMask.scaleY=3,this.mazeBMask.visible=!1},r.prototype.getSkinPath=function(){return"resource/skin/maze/Skin_Maze.exml"},r.prototype.setData=function(){switch(this.gridStandard=new e.GridStandard,this.gridStandard.size=this.mazeData.size,this.mazeData.size){case 6:this.bgImg.source="maze_bg_6_jpg",this.gridStandard.side=80;break;case 8:this.bgImg.source="maze_bg_8_jpg",this.gridStandard.side=64;break;case 10:this.bgImg.source="maze_bg_10_jpg",this.gridStandard.side=54;break;default:this.bgImg.source=null,this.gridStandard.side=0}this.gridStandard.scale=this.gridStandard.side/e.GridStandard.DefauleSide,this.grids=[];for(var t=0;t<this.gridStandard.size;t++){this.grids.push([]);for(var n=0;n<this.gridStandard.size;n++){var r=new e.Grid(this.gridStandard,t,n);this.grids[t].push(r)}}for(var i=0,o=this.mazeData.grids;i<o.length;i++){var a=o[i],s=a.coordinate.row,c=a.coordinate.column;this.grids[s][c].setData(a)}},r.prototype.getMazeMask=function(){return this.mazeMask},r.prototype.getMazeBMask=function(){return this.mazeBMask},r.prototype.onCreate=function(){this.setData(),this.initMask(),t.game.SoundManager.instance.playMusic("maze"),this.centerGroup.mask=this.centerMask,this.mazeGroup.mask=this.mazeMask,this.bMaskGroup.mask=this.mazeBMask,this.bMaskGroup.visible=!1;var n=this.gridStandard.size*this.gridStandard.side;this.staticGroup.width=this.staticGroup.height=this.dynamicGroup.width=this.dynamicGroup.height=this.bMaskGroup.width=this.bMaskGroup.height=this.topGroup.width=this.topGroup.height=n;var r=10==this.gridStandard.size?50:this.gridStandard.side;this.staticGroup.x=this.staticGroup.y=this.dynamicGroup.x=this.dynamicGroup.y=this.bMaskGroup.x=this.bMaskGroup.y=this.topGroup.x=this.topGroup.y=r;for(var i=0;i<this.gridStandard.size;i++)for(var o=0;o<this.gridStandard.size;o++)if(this.grids[i][o].setStaticGroup(this.staticGroup),this.grids[i][o].setDynamicGroup(this.dynamicGroup),this.grids[i][o].exit()&&(this.exitGrid=this.grids[i][o],1==this.mazeData.type)){var a=this.exitGrid.getExitImg(),s=this.bMaskGroup.globalToLocal(a.x,a.y);a.x=s.x,a.y=s.y,this.bMaskGroup.addChildAt(a,0)}for(var c=0,u=this.mazeData.mechanisms;c<u.length;c++){var h=u[c],l=new e.Gate(this,h.id,h.state);l.setCoordinate(h.coordinate),l.setGroup(this.staticGroup,this.dynamicGroup)}for(var d=0;d<this.mazeData.monsters.length;d++){var m=this.mazeData.monsters[d],p=new e.Monster(this,m.type,d);if(p.setCoordinate(m.coordinate),this.dynamicGroup.addChild(p),1==this.mazeData.type){var f=new e.Monster(this,m.type,d);f.setCoordinate(m.coordinate),this.bMaskGroup.addChildAt(f,0)}}this.player=this.getPlayer(this.mazeData.player.coordinate),this.topGroup.addChild(this.player),this.durationTimer.addEventListener(egret.TimerEvent.TIMER,this.onDuration,this)},r.prototype.onFristRemove=function(){this.durationTimer.stop(),this.durationTimer.removeEventListener(egret.TimerEvent.TIMER,this.onDuration,this)},r.prototype.getPlayer=function(t){var n,r,i,o=new e.Player(this,!0);return Math.random()<.5?t.column<this.gridStandard.size/2?(n=-2,r=t.row,i="right"):(n=this.gridStandard.size+1,r=t.row,i="left"):t.row<this.gridStandard.size/2?(n=t.column,r=-2,i="down"):(n=t.column,r=this.gridStandard.size+1,i="up"),o.setCoordinate(new e.Coordinate(r,n),i,!1),o},r.prototype.start=function(t,n,r){return void 0===r&&(r=!1),__awaiter(this,void 0,void 0,function(){var i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return e.SoundManager.instance.playSound("start"),this.changeCall={callBack:t,self:n},[4,this.player.moveByCoordinate(this.mazeData.player.coordinate)];case 1:return s.sent(),i=1==this.mazeData.type?3:24,o=48,[4,new Promise(function(t){egret.Tween.get(a.mazeMask).to({scaleX:1,scaleY:1},o).call(function(){a.dynamicGroup.addChild(a.player),a.player.refreshDeep()},a).to({scaleX:i,scaleY:i},o*(i-1),egret.Ease.sineIn).call(function(){t(),1!=a.mazeData.type&&(a.mazeGroup.mask=null)},a)})];case 2:return s.sent(),this.bMaskGroup.visible=1==this.mazeData.type,r?[4,this.showHelp()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.durationTimer.start(),[2]}})})},r.prototype.showHelp=function(){return __awaiter(this,void 0,void 0,function(){var t,n,t,n;return __generator(this,function(r){switch(r.label){case 0:this.helpCount=0,this.helpGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHelp,this),r.label=1;case 1:return!this.isDestory&&this.helpCount<20?[4,dnc.utils.PromiseUtils.delay(500)]:[3,3];case 2:if(r.sent(),this.helpCount+=1,this.helpCount<6)for(this.player&&(this.player.filters=this.helpCount%2!=0?[this.getGlow(0)]:null),this.exitGrid&&(this.exitGrid.gridStatic.filters=this.helpCount%2!=0?[this.getGlow(1)]:null),t=0;t<this.dynamicGroup.numChildren;t++)n=this.dynamicGroup.getChildAt(t),n instanceof e.Monster&&(n.filters=this.helpCount%2!=0?[this.getGlow(2)]:null);else this.helpGroup.visible=!0;return[3,1];case 3:for(this.player&&(this.player.filters=null),this.exitGrid&&(this.exitGrid.gridStatic.filters=null),t=0;t<this.dynamicGroup.numChildren;t++)n=this.dynamicGroup.getChildAt(t),n instanceof e.Monster&&(n.filters=null);return this.helpGroup.visible=!1,this.helpGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHelp,this),[2]}})})},r.prototype.onTouchHelp=function(){this.helpCount=20},r.prototype.getGlow=function(t){var e;switch(t){case 0:e=14012793;break;case 1:e=9107229;break;case 2:e=16214848}var n=new egret.GlowFilter(e,.5,8,8,128,3,!1,!1);return n},r.prototype.getPlayerCoordinate=function(){return this.player.coordinate},r.prototype.canMove=function(t,e){var n=!1;switch(e){case"up":return 0==t.row?!1:(n=this.grids[t.row][t.column].canMove("up"),n&&this.findGatePass(t.row,t.column));case"down":return t.row==this.gridStandard.size-1?!1:(n=this.grids[t.row+1][t.column].canMove("up"),n&&this.findGatePass(t.row+1,t.column));case"left":return 0==t.column?!1:this.grids[t.row][t.column].canMove("left");case"right":return t.column==this.gridStandard.size-1?!1:this.grids[t.row][t.column+1].canMove("left")}},r.prototype.findGatePass=function(t,n){for(var r=0;r<this.dynamicGroup.numChildren;r++){var i=this.dynamicGroup.getChildAt(r);if(i instanceof e.Gate&&i.coordinate.row==t&&i.coordinate.column==n)return 0!=i.state}for(var r=0;r<this.staticGroup.numChildren;r++){var i=this.staticGroup.getChildAt(r);if(i instanceof e.Gate&&i.coordinate.row==t&&i.coordinate.column==n)return 0!=i.state}return!0},r.prototype.onDuration=function(t){var e=t.target.currentCount;this.onChange("time",e)},r.prototype.showCollision=function(t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=dnc.utils.UIUtils.getMovieClip("collision","collision"),n.scaleX=n.scaleY=this.gridStandard.scale,n.x=this.gridStandard.side*t.column,n.y=this.gridStandard.side*t.row,this.dynamicGroup.addChild(n),e.SoundManager.instance.playSound("collision"),[4,new Promise(function(t){n.gotoAndPlay("collision"),n.once(egret.Event.COMPLETE,function(){n.parent&&n.parent.removeChild(n),t()},r)})];case 1:return i.sent(),[2]}})})},r.prototype.event=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return this.eventProcessing?[2,"skip"]:(this.eventProcessing=!0,e="continue","back"!=t?[3,2]:[4,this.back()]);case 1:return n.sent(),this.onChange("step",this.records.length),[3,6];case 2:return"reset"!=t?[3,4]:[4,this.reset()];case 3:return n.sent(),this.onChange("step",this.records.length),[3,6];case 4:return[4,this.move(t)];case 5:e=n.sent(),n.label=6;case 6:return this.eventProcessing=!1,[2,e]}})})},r.prototype.reset=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return this.records.length>0&&(t=this.records[0],this.records=[],this.setRecord(t)),[2]})})},r.prototype.back=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return this.records.length>0&&(t=this.records.pop(),this.backNum+=1,this.setRecord(t)),[2]})})},r.prototype.move=function(t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,i,o,a,i,o,i,o,s,c,u,h,l,d,m;return __generator(this,function(p){switch(p.label){case 0:for(0!=this.backNum&&(this.onChange("backEnd",this.backNum),this.backNum=0),n=this.player,r=[],i=0;i<this.dynamicGroup.numChildren;i++)o=this.dynamicGroup.getChildAt(i),o instanceof e.Monster&&r.push(o);if(1==this.mazeData.type)for(i=0;i<this.bMaskGroup.numChildren;i++)o=this.bMaskGroup.getChildAt(i),o instanceof e.Monster&&r.push(o);for(a=[],i=0;i<this.staticGroup.numChildren;i++)o=this.staticGroup.getChildAt(i),o instanceof e.Mechanism&&a.push(o);for(i=0;i<this.dynamicGroup.numChildren;i++)o=this.dynamicGroup.getChildAt(i),o instanceof e.Mechanism&&a.push(o);return s=new e.RecordData(n,r,a,t),this.records.push(s),this.onChange("step",this.records.length),[4,n.move(t)];case 1:p.sent(),c=n.coordinate,u=this.grids[c.row][c.column],h=0,l=r,p.label=2;case 2:return h<l.length?(d=l[h],[4,this.checkDeath(n,d)]):[3,5];case 3:if(p.sent())return[2,"fail"];p.label=4;case 4:return h++,[3,2];case 5:return[4,this.checkKey(c)];case 6:return p.sent(),u.isTrap()?[4,n.death("trap")]:[3,8];case 7:return p.sent(),[2,"fail"];case 8:return[4,this.monsterMove(r,n)];case 9:return p.sent()?[2,"fail"]:(m=u.exit(),m&&this.isGame?[4,n.goExit(m)]:[3,11]);case 10:return p.sent(),this.isPass=!0,[2,"success"];case 11:return[2,"continue"]}})})},r.prototype.monsterMove=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,c,i,u,h,l,d,m,p,f,g;return __generator(this,function(v){switch(v.label){case 0:for(n=0,r=t;n<r.length;n++)i=r[n],i.startMove();o=!0,v.label=1;case 1:if(!o)return[3,16];for(a=[],s=0,c=t;s<c.length;s++)i=c[s],u=i.move(e.coordinate),a.push(u);return[4,Promise.all(a)];case 2:h=v.sent(),o=!1,l=0,v.label=3;case 3:return l<h.length?(d=h[l],0==d?[3,14]:(2==d&&(o=!0),m=t[l],m.parent==this.bMaskGroup?[3,6]:[4,this.checkKey(m.coordinate)])):[3,15];case 4:return v.sent(),[4,this.checkDeath(e,m)];case 5:if(v.sent())return[2,!0];v.label=6;case 6:p=0,f=t,v.label=7;case 7:return p<f.length?(g=f[p],m.name!=g.name&&m.coordinate.equals(g.coordinate)&&m.parent&&g.parent&&m.parent==g.parent?m.parent==this.bMaskGroup?[3,9]:[4,this.showCollision(m.coordinate)]:[3,13]):[3,14];case 8:v.sent(),v.label=9;case 9:return m.type<g.type?[4,g.hide()]:[3,11];case 10:return v.sent(),[3,13];case 11:return[4,m.hide()];case 12:v.sent(),v.label=13;case 13:return p++,[3,7];case 14:return l++,[3,3];case 15:return[3,1];case 16:return[2,!1]}})})},r.prototype.checkDeath=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return t.coordinate.equals(e.coordinate)?(this.showCollision(t.coordinate),e.hide(),[4,t.death("moster_"+e.type)]):[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},r.prototype.checkKey=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,r;return __generator(this,function(i){switch(i.label){case 0:return e=this.grids[t.row][t.column],n=e.data?e.data.key:0,0==n?[3,2]:(r=this.staticGroup.getChildByName("Mec_1_"+n),null==r&&(r=this.dynamicGroup.getChildByName("Mec_1_"+n)),[4,r.change()]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},r.prototype.getPlayeRecord=function(){var n=new e.PlayRecordData;if(n.level=this.mazeData.level,n.index=this.mazeData.index,this.isPass){for(var r="",i=0,o=this.records;i<o.length;i++){var a=o[i];switch(a.event){case"wait":r=r.concat("0");continue;case"up":r=r.concat("1");continue;case"down":r=r.concat("2");continue;case"left":r=r.concat("3");continue;case"right":r=r.concat("4");continue}}n.useTime=this.durationTimer.currentCount;var s=new t.data.RecordCode;n.code=s.encode(r)}return n},r.prototype.setRecord=function(t){for(var e=0,n=t.roleRecords;e<n.length;e++){var r=n[e],i=r.role;i.setCoordinate(r.coordinate,r.direction),null==i.parent&&r.parent.addChild(i)
}for(var o=0,a=t.mechanismRecords;o<a.length;o++){var s=a[o],c=this.dynamicGroup.getChildByName(s.name);null==c&&(c=this.staticGroup.getChildByName(s.name)),c&&c.setState(s.state)}},r.prototype.destory=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.changeCall=null,e.SoundManager.instance.playMusic("game"),[2]})})},r.prototype.onChange=function(t,e){this.changeCall&&this.changeCall.callBack.call(this.changeCall.self,t,e)},r}(dnc.ui.BaseComponent);e.Maze=n,__reflect(n.prototype,"mummy.game.Maze")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.name="Mec_"+n+"_"+r,o.maze=e,o.type=n,o.state=i,o.scaleX=e.gridStandard.scale,o.scaleY=e.gridStandard.scale,o.mc=o.getMC(n),o.addChild(o.mc),o}return __extends(e,t),e.prototype.setCoordinate=function(t){this.coordinate=t},e.prototype.getMC=function(t){return null},e.prototype.onCreate=function(){this.refreshDeep()},e.prototype.refreshDeep=function(){if(null!=this.parent){var t=this.parent.getChildByName(this.coordinate.row+"-"+this.coordinate.column),e=this.parent.getChildIndex(t);this.parent.setChildIndex(this,e-1)}},e.prototype.onFristRemove=function(){},e}(dnc.ui.BaseDisplayObjectContainer);t.Mechanism=e,__reflect(e.prototype,"mummy.game.Mechanism");var n=function(e){function n(t,n,r){return e.call(this,t,1,n,r)||this}return __extends(n,e),n.prototype.getMC=function(t){return dnc.utils.UIUtils.getMovieClip("gate","gate")},n.prototype.setCoordinate=function(t){e.prototype.setCoordinate.call(this,t),this.x=this.maze.gridStandard.side*t.column-2,this.y=this.maze.gridStandard.side*t.row-18+3},n.prototype.setGroup=function(t,e){this.groupA=t,this.groupB=e,0==this.state?this.groupB.addChild(this):this.groupA.addChild(this),this.refreshDeep()},n.prototype.setState=function(t){this.state=t,0==t?(this.groupA.addChild(this),this.mc.gotoAndStop("open")):(this.groupB.addChild(this),this.mc.gotoAndStop("close")),this.refreshDeep()},n.prototype.change=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return 0==this.state?(this.groupA.addChild(this),this.refreshDeep(),this.state=1,this.mc.gotoAndPlay("open",1)):(this.groupB.addChild(this),this.refreshDeep(),this.state=0,this.mc.gotoAndPlay("close",1)),t.SoundManager.instance.playSound("gate"),[4,dnc.utils.PromiseUtils.delay(562.5)];case 1:return e.sent(),[2]}})})},n}(e);t.Gate=n,__reflect(n.prototype,"mummy.game.Gate")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(e){function n(n,r,i){var o=e.call(this)||this;return o.name=i,o.maze=n,o.type=r,o.scaleX=n.gridStandard.scale,o.scaleY=n.gridStandard.scale,o.moveMC=o.getMoveMC(r),o.addChild(o.moveMC),o.freeMC=o.getFreeMC(r),n instanceof t.Maze&&o.freeMC&&(o.freeMC.visible=!1,o.addChild(o.freeMC),o.timer=new egret.Timer(1e3,0),o.timer.addEventListener(egret.TimerEvent.TIMER,o.onDuration,o)),o.addEventListener(egret.Event.ADDED_TO_STAGE,o.addStage,o),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.removeStage,o),o}return __extends(n,e),n.prototype.getX=function(t){return this.maze.gridStandard.side*t},n.prototype.getY=function(t){return this.maze.gridStandard.side*t},n.prototype.setCoordinate=function(e,n,r){switch(void 0===n&&(n="down"),void 0===r&&(r=!0),this.coordinate=new t.Coordinate(e.row,e.column),this.x=this.getX(this.coordinate.column),this.y=this.getY(this.coordinate.row),this.direction=n,n){case"up":this.moveMC.gotoAndStop(5);break;case"down":this.moveMC.gotoAndStop(10);break;case"left":this.moveMC.gotoAndStop(15);break;case"right":this.moveMC.gotoAndStop(20)}r&&this.refreshDeep()},n.prototype.getMoveMC=function(t){return null},n.prototype.getFreeMC=function(t){return null},n.prototype.onCreate=function(){this.refreshDeep()},n.prototype.addStage=function(){this.timer&&(this.timer.start(),this.getFreeTime())},n.prototype.removeStage=function(){this.timer&&this.timer.reset()},n.prototype.onFristRemove=function(){},n.prototype.onDuration=function(t){var e=t.target.currentCount,n=dnc.utils.NumberUtils.random(6,10);e-this.freeTime>n&&this.showFree()},n.prototype.getFreeTime=function(){this.timer&&(this.freeTime=this.timer.currentCount)},n.prototype.showFree=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){return this.freeMC&&(this.getFreeTime(),this.moveMC.visible=!1,this.freeMC.visible=!0,t=dnc.utils.NumberUtils.random(2)+1,e="free"+t,this.freeMC.gotoAndPlay(e,1)),[2]})})},n.prototype.refreshDeep=function(t){if(void 0===t&&(t=1),null!=this.parent){var e=this.parent.getChildByName(this.coordinate.row+"-"+this.coordinate.column);if(e){var n=this.parent.getChildIndex(e);this.parent.setChildIndex(this,n+t)}}},n.prototype._moveByCoordinate=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return this.getFreeTime(),this.coordinate.column!=t.column?(e=Math.abs(t.column-this.coordinate.column),n=this.coordinate.column<t.column?"right":"left",this.coordinate.column=t.column):this.coordinate.row!=t.row&&(e=Math.abs(t.row-this.coordinate.row),n=this.coordinate.row<t.row?"down":"up",this.coordinate.row=t.row),r=this.getX(t.column),i=this.getY(t.row),this.moveMC.gotoAndPlay(n,2*e),[4,new Promise(function(t){egret.Tween.get(o).to({x:r,y:i},625*e).call(function(){return t()},o)})];case 1:return a.sent(),[2]}})})},n.prototype._move=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return this.getFreeTime(),this.moveMC.visible=!0,this.freeMC&&(this.freeMC.visible=!1),this.direction=t,(r=!e||this.maze.canMove(this.coordinate,t))?(this.moveMC.gotoAndPlay(t,2),i=egret.Tween.get(this),[4,new Promise(function(e){switch(t){case"up":o.coordinate.row-=1,i.to({y:o.maze.gridStandard.side*o.coordinate.row},625).call(function(){return e()},o);break;case"down":o.coordinate.row+=1,i.to({y:o.maze.gridStandard.side*o.coordinate.row},625).call(function(){return e()},o);break;case"left":o.coordinate.column-=1,i.to({x:o.maze.gridStandard.side*o.coordinate.column},625).call(function(){return e()},o);break;case"right":o.coordinate.column+=1,i.to({x:o.maze.gridStandard.side*o.coordinate.column},625).call(function(){return e()},o)}})]):[3,2];case 1:return a.sent(),this.refreshDeep(),[3,5];case 2:if(!n)return[3,3];switch(t){case"up":this.moveMC.gotoAndStop(5);break;case"down":this.moveMC.gotoAndStop(10);break;case"left":this.moveMC.gotoAndStop(15);break;case"right":this.moveMC.gotoAndStop(20)}return[3,5];case 3:return this.moveMC.gotoAndPlay(t,2),[4,dnc.utils.PromiseUtils.delay(625)];case 4:a.sent(),a.label=5;case 5:return[2,r]}})})},n}(dnc.ui.BaseDisplayObjectContainer);t.Role=e,__reflect(e.prototype,"mummy.game.Role");var n=function(e){function n(t,n){var r=e.call(this,t,0,"R_0_0")||this;if(n){var i=t.getMazeMask(),o=t.getMazeBMask();r.setMask(i),r.setMask(o)}return r}return __extends(n,e),n.prototype.setMask=function(e){e&&(e.x=e.y=t.GridStandard.DefauleSide>>1,this.addChild(e))},n.prototype.getMoveMC=function(t){var e=dnc.utils.UIUtils.getMovieClip("player_move","move");return e},n.prototype.getFreeMC=function(t){var e=dnc.utils.UIUtils.getMovieClip("player_free","mc");return e},n.prototype.setCoordinate=function(t,n,r){void 0===n&&(n="down"),void 0===r&&(r=!0),e.prototype.setCoordinate.call(this,t,n,r)},n.prototype.move=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return"wait"==e?[3,2]:(t.SoundManager.instance.playSound("pmove"),[4,this._move(e,!0,!1)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},n.prototype.moveByCoordinate=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._moveByCoordinate(t)];case 1:return e.sent(),[2]}})})},n.prototype.death=function(e){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return"trap"!==e?[3,3]:(t.SoundManager.instance.playSound("trap"),n=new eui.Image("trap_png"),this.addChildAt(n,0),r=new eui.Image("trap_mask_png"),r.visible=!1,this.addChild(r),i=dnc.utils.UIUtils.getMovieClip("player_drop","mc"),this.moveMC.visible=!1,this.addChild(i),i.mask=r,[4,new Promise(function(t){i.gotoAndPlay("drop"),i.once(egret.Event.COMPLETE,function(){t()},a)})]);case 1:return s.sent(),[4,new Promise(function(t){egret.Tween.get(i).to({y:80},1e3).call(t)})];case 2:return s.sent(),[3,5];case 3:return o=dnc.utils.UIUtils.getMovieClip("player_death","death"),this.moveMC.visible=!1,this.addChild(o),t.SoundManager.instance.playSound("death"),[4,new Promise(function(t){o.gotoAndPlay("death"),o.once(egret.Event.COMPLETE,function(){t()},a)})];case 4:s.sent(),s.label=5;case 5:return[2]}})})},n.prototype.goExit=function(e){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return e?(t.SoundManager.instance.playSound("success"),[4,this._move(e,!1,!1)]):[3,3];case 1:return i.sent(),n=egret.Tween.get(this),[4,new Promise(function(t){n.to({alpha:0},200).call(function(){r.parent.removeChild(r),t()},r)})];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n}(e);t.Player=n,__reflect(n.prototype,"mummy.game.Player");var r=function(e){function n(t,n,r){return e.call(this,t,n,"R_"+n+"_"+r)||this}return __extends(n,e),n.prototype.getMoveMC=function(t){var e="monster_"+this.type+"_move",n=dnc.utils.UIUtils.getMovieClip(e,"move");return n},n.prototype.getFreeMC=function(t){var e=null;if(3>t){var n="monster_"+this.type+"_free";e=dnc.utils.UIUtils.getMovieClip(n,"mc")}return e},n.prototype.hide=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.parent&&this.parent.removeChild(this),[2]})})},n.prototype.startMove=function(){switch(this.type){case 1:case 2:this.moveCount=2;break;case 3:case 4:this.moveCount=1}},n.prototype.move=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:if(t.equals(this.coordinate)&&this.moveCount>0&&0==this.moveCount,this.moveCount<1)return[2,0];switch(e=this.coordinate.clone(),this.moveCount-=1,n=this.type){case 1:return[3,1];case 3:return[3,1];case 2:return[3,3];case 4:return[3,3]}return[3,5];case 1:return[4,this.moveC(t)];case 2:return r.sent(),[3,5];case 3:return[4,this.moveR(t)];case 4:return r.sent(),[3,5];case 5:return e.equals(this.coordinate)?(0==this.moveCount,[2,0]):[2,this.moveCount>0?2:1]}})})},n.prototype.moveC=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e=!1,n=null,this.coordinate.column<t.column?(n="right",e=this.maze.canMove(this.coordinate,"right")):this.coordinate.column>t.column&&(n="left",e=this.maze.canMove(this.coordinate,"left")),e&&this.playSound(),[4,this._move(n,!0,!0)];case 1:return r.sent()?[2]:(this.coordinate.row<t.row?(n="down",e=this.maze.canMove(this.coordinate,"down")):this.coordinate.row>t.row&&(n="up",e=this.maze.canMove(this.coordinate,"up")),e&&this.playSound(),[4,this._move(n,!0,!0)]);case 2:return r.sent(),[2]}})})},n.prototype.moveR=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e=!1,n=null,this.coordinate.row<t.row?(n="down",e=this.maze.canMove(this.coordinate,"down")):this.coordinate.row>t.row&&(n="up",e=this.maze.canMove(this.coordinate,"up")),e&&this.playSound(),[4,this._move(n,!0,!0)];case 1:return r.sent()?[2]:(this.coordinate.column<t.column?(n="right",e=this.maze.canMove(this.coordinate,"right")):this.coordinate.column>t.column&&(n="left",e=this.maze.canMove(this.coordinate,"left")),e&&this.playSound(),[4,this._move(n,!0,!0)]);case 2:return r.sent(),[2]}})})},n.prototype.playSound=function(){1==this.type||2==this.type?t.SoundManager.instance.playSound("mmove"):t.SoundManager.instance.playSound("smove")},n}(e);t.Monster=r,__reflect(r.prototype,"mummy.game.Monster")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(){function t(){}return t.DefauleSide=80,t}();t.GridStandard=e,__reflect(e.prototype,"mummy.game.GridStandard");var n=function(){function e(e,n,o){this.standard=e,this.coordinate=new t.Coordinate(n,o),this.gridStatic=new r(this),this.gridDynamic=new i(this)}return e.prototype.setData=function(t){this.data=t},e.prototype.setStaticGroup=function(t){t.addChild(this.gridStatic)},e.prototype.setDynamicGroup=function(t){t.addChild(this.gridDynamic)},e.prototype.canMove=function(t){if(!this.data)return!0;switch(t){case"up":return 1!=this.data.wallType&&3!=this.data.wallType;case"left":return 2!=this.data.wallType&&3!=this.data.wallType}},e.prototype.exit=function(){return null!=this.data?this.data.exit:null},e.prototype.isTrap=function(){return null!=this.data&&1==this.data.trapType},e.prototype.getExitImg=function(){return this.gridStatic.getExitImg()},e}();t.Grid=n,__reflect(n.prototype,"mummy.game.Grid");var r=function(n){function r(t){var e=n.call(this)||this;return e.grid=t,e.scaleX=t.standard.scale,e.scaleY=t.standard.scale,e}return __extends(r,n),r.prototype.onCreate=function(){if(this.name=this.grid.coordinate.row+"-"+this.grid.coordinate.column,this.width=this.grid.standard.side,this.height=this.grid.standard.side,this.x=this.grid.standard.side*this.grid.coordinate.column,this.y=this.grid.standard.side*this.grid.coordinate.row,null!=this.grid.data){if(this.grid.data.exit)switch(this.exitImg=new eui.Image,this.addChild(this.exitImg),this.grid.data.exit){case"up":this.exitImg.source="exit_top_png",this.exitImg.y=-e.DefauleSide;break;case"down":this.exitImg.source="exit_bottom_png",this.exitImg.y=e.DefauleSide;break;case"left":this.exitImg.source="exit_left_png",this.exitImg.x=-e.DefauleSide;break;case"right":this.exitImg.source="exit_right_png",this.exitImg.x=e.DefauleSide}if(1==this.grid.data.trapType){var n=new t.Trap;this.addChild(n)}if(0!=this.grid.data.key){var r=new t.Key;this.addChild(r)}}},r.prototype.getExitImg=function(){var t=null;if(this.exitImg){var e=this.exitImg.source;t=new eui.Image(e);var n=this.exitImg.parent.localToGlobal(this.exitImg.x,this.exitImg.y);t.x=n.x,t.y=n.y}return t},r.prototype.onFristRemove=function(){},r}(dnc.ui.BaseDisplayObjectContainer);t.GridStatic=r,__reflect(r.prototype,"mummy.game.GridStatic");var i=function(t){function e(e){var n=t.call(this)||this;return n.grid=e,n.scaleX=e.standard.scale,n.scaleY=e.standard.scale,n}return __extends(e,t),e.prototype.onCreate=function(){if(this.name=this.grid.coordinate.row+"-"+this.grid.coordinate.column,this.width=this.grid.standard.side,this.height=this.grid.standard.side,this.x=this.grid.standard.side*this.grid.coordinate.column,this.y=this.grid.standard.side*this.grid.coordinate.row,null!=this.grid.data){if(1==this.grid.data.wallType||3==this.grid.data.wallType){var t=new eui.Image;t.source="wall_top_png",t.x=-3,t.y=-15,this.addChild(t)}if(2==this.grid.data.wallType||3==this.grid.data.wallType){var t=new eui.Image;t.source="wall_left_png",t.x=-3,t.y=-15,this.addChild(t)}}},e.prototype.onFristRemove=function(){},e}(dnc.ui.BaseDisplayObjectContainer);t.GridDynamic=i,__reflect(i.prototype,"mummy.game.GridDynamic")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.mc=dnc.utils.UIUtils.getMovieClip("grid_key","key"),e.addChild(e.mc),e}return __extends(e,t),e.prototype.onCreate=function(){this.inStage=!0,this.mc.gotoAndPlay("rotate",-1)},e.prototype.onFristRemove=function(){this.inStage=!1},e}(dnc.ui.BaseDisplayObjectContainer);t.Key=e,__reflect(e.prototype,"mummy.game.Key")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.mc=dnc.utils.UIUtils.getMovieClip("grid_trap","trap"),e.addChild(e.mc),e}return __extends(e,t),e.prototype.onCreate=function(){this.inStage=!0,this.onFlicker()},e.prototype.onFlicker=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.inStage?[4,dnc.utils.PromiseUtils.delay(2e3)]:[3,2];case 1:return t.sent(),this.mc.gotoAndPlay("flicker",1),[3,0];case 2:return[2]}})})},e.prototype.onFristRemove=function(){this.inStage=!1},e}(dnc.ui.BaseDisplayObjectContainer);t.Trap=e,__reflect(e.prototype,"mummy.game.Trap")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinPath=function(){return"resource/skin/game/rank/Skin_Rank_Item.exml"},e.prototype.onCreate=function(){this.avatarImg.mask=this.avatarMask},e.prototype.onFristRemove=function(){},e.prototype.onDataChange=function(t){1===t.PlayerRank?(this.rank_label.visible=!1,this.rank_img.visible=!0,this.rank_img.source="end_record_rank_1_png"):2===t.PlayerRank?(this.rank_label.visible=!1,this.rank_img.visible=!0,this.rank_img.source="end_record_rank_2_png"):3===t.PlayerRank?(this.rank_label.visible=!1,this.rank_img.visible=!0,this.rank_img.source="end_record_rank_3_png"):(this.rank_label.visible=!0,this.rank_img.visible=!1,this.rank_label.text=t.PlayerRank.toString()),this.userName.text=t.Name,this.totalChapterNo.text=t.ChapterNo.toString(),this.enterRankCount.text=t.RankNum.toString(),this.avatarImg.source="",this.avatarImg.source="https://server.9mingame.com/server/gameUser/userImageByte.json?avatar="+encodeURIComponent(t.Avatar)},e}(dnc.ui.BaseListItem);t.Rank_Item=e,__reflect(e.prototype,"mummy.game.Rank_Item")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/game/rank/Skin_Rank.exml"},n.prototype.onCreate=function(){this.percentHeight=100,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this),this.getData()},n.prototype.onFristRemove=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this)},n.prototype.getData=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.getRankData()];case 1:return e=r.sent(),n=new t.data.RankData(e),n.RankList.sort(function(t,e){return t.PlayerRank-e.PlayerRank}),this.list.setData(n.RankList),[2]}})})},n.prototype.closeFunc=function(t){this.parent&&this.parent.removeChild(this)},n.prototype.getRankData=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return[4,(new t.net.RankConnetion).connet()];case 1:return e=n.sent(),[2,e]}})})},n}(dnc.ui.BaseComponent);e.Rank=n,__reflect(n.prototype,"mummy.game.Rank")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.onCreate=function(){this.bounces=!0;var t=new eui.VerticalLayout;t.gap=10,t.horizontalAlign=egret.HorizontalAlign.CENTER,this.dataGroup.layout=t},n.prototype.onFristRemove=function(){},n.prototype.getItem=function(){return t.Rank_Item},n.prototype.setData=function(t){this.upDatas.replaceAll(t)},n}(dnc.ui.BaseList);t.RankList=e,__reflect(e.prototype,"mummy.game.RankList")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(t,n,r){var i=e.call(this)||this;return i.callObj={callBack:n,self:r},i.level=t,i}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/game/start/Skin_DialogStart.exml"},n.prototype.onCreate=function(){t.data.Context.instance.adOpen?this.startBtn.iconDisplay.source="ad_ContinueGameBtn_png":this.startBtn.iconDisplay.source="start_play_png",this.percentHeight=100,this.getData();for(var e=0;e<this.gridGroup.numChildren;e++){var n=this.gridGroup.getChildAt(e);n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchGrid,this)}this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this)},n.prototype.onFristRemove=function(){for(var t=0;t<this.gridGroup.numChildren;t++){var e=this.gridGroup.getChildAt(t);e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchGrid,this)}this.startBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this)},n.prototype.getData=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return[4,(new t.net.ChapterConnetion).connet(this.level)];case 1:return e=n.sent(),null==e?[2]:(this.tipLab.visible=!0,this.gridGroup.visible=!0,this.lineImg.visible=!0,this.startBtn.visible=!0,this.level=e.chapter,this.maxIndex=e.maxIndex,this.levelLab.source="level_name_"+e.chapter+"_png",this.setGridState(),[2])}})})},n.prototype.setGridState=function(){for(var t=this.maxIndex<15?this.maxIndex:14,e=0;e<this.gridGroup.numChildren;e++){var n=this.gridGroup.getChildAt(e);e<this.maxIndex?n.setState(2):e==this.maxIndex?n.setState(1):n.setState(e==this.gridGroup.numChildren-1?-1:0),e==t&&(n.selected(),this.selectGrid=n)}},n.prototype.setGridSelect=function(t){t.selected()&&(this.selectGrid&&this.selectGrid!=t&&this.selectGrid.cleanselected(),this.selectGrid=t)},n.prototype.show=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t&&t.addChild(this),[2]})})},n.prototype.close=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.callObj&&(this.callObj=null),this.parent&&this.parent.removeChild(this),[2]})})},n.prototype.onTouchGrid=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){return e=t.target,e===this.selectGrid?[2]:(this.setGridSelect(e),[2])})})},n.prototype.onTouchBtn=function(e){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(e.target){case this.startBtn:this.startBtn.enabled=!1,t.data.Context.instance.currentPlatform===PlatformType.wxgame?WX_SDKManager.instance.showVideoAD(ADType.TYPE_MAP_ENTER,function(e){return __awaiter(r,void 0,void 0,function(){var n,n;return __generator(this,function(r){return this.startBtn.enabled=!0,0===e?(n=this.gridGroup.getChildIndex(this.selectGrid)+1,this.callObj.callBack.call(this.callObj.self,this,this.level,n)):1===e?MainLayer.instance.showTipInfo("观看完整视频才能进入进入游戏"):2===e&&(MainLayer.instance.showTipInfo("广告加载失败"),1===t.data.Context.instance.configInfo.nextLevel&&(n=this.gridGroup.getChildIndex(this.selectGrid)+1,this.callObj.callBack.call(this.callObj.self,this,this.level,n))),[2]})})},this):t.data.Context.instance.currentPlatform===PlatformType.web&&(n=this.gridGroup.getChildIndex(this.selectGrid)+1,this.callObj.callBack.call(this.callObj.self,this,this.level,n))}return[2]})})},n}(dnc.ui.BaseComponent);e.DialogStart=n,__reflect(n.prototype,"mummy.game.DialogStart")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onBeforeSkin=function(){},e.prototype.getSkinPath=function(){return"resource/skin/game/start/Skin_GridStart.exml"},e.prototype.onCreate=function(){this.touchEnabled=!0,this.isFocus=!1,this.playerImg.visible=!1,this.boxImg.visible=!1,this.lightImg.visible=!1},e.prototype.onFristRemove=function(){egret.Tween.removeTweens(this.lightImg)},e.prototype.setState=function(t){switch(this.gridType=t,t){case-1:this.showBox(),this.bgImg.source="start_index_box_png";break;case 0:this.bgImg.source="start_index_dis_png";break;case 1:this.bgImg.source="start_index_cur_png";break;case 2:this.bgImg.source="start_index_pas_png"}},e.prototype.showBox=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return this.boxImg.visible=!0,this.lightImg.visible=!0,this.boxImg.source="wupin_"+this.getDialogStart().level+"_png",egret.Tween.get(this.lightImg,{loop:!0}).to({rotation:360},4e3).call(function(){t.lightImg.rotation=0}),[2]})})},e.prototype.selected=function(){return this.isFocus=this.gridType>0,this.showFocus(),this.isFocus},e.prototype.cleanselected=function(){this.isFocus=!1,this.hideFocus()},e.prototype.showFocus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.isDestory||!this.isFocus?[3,3]:(this.playerImg.visible=!0,[4,dnc.utils.PromiseUtils.delay(500)]);case 1:return t.sent(),this.playerImg.visible=!1,[4,dnc.utils.PromiseUtils.delay(500)];case 2:return t.sent(),[3,0];case 3:return[2]}})})},e.prototype.hideFocus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.playerImg.visible=!1,[2]})})},e.prototype.getDialogStart=function(){return this.parent.parent.parent},e}(dnc.ui.BaseComponent);t.GridStart=e,__reflect(e.prototype,"mummy.game.GridStart")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/game/treasure/Skin_Treasure.exml"},n.prototype.onCreate=function(){this.list.mask=this.list_mask,this.percentHeight=100,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this),this.getData()},n.prototype.onFristRemove=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFunc,this)},n.prototype.getData=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return[4,(new t.net.TreasureConnetion).connet()];case 1:return e=r.sent(),n=new t.data.CollectionData(e),this.list.setData(n.CollectionList),[2]}})})},n.prototype.closeFunc=function(t){this.parent&&this.parent.removeChild(this)},n}(dnc.ui.BaseComponent);e.Treasure=n,__reflect(n.prototype,"mummy.game.Treasure")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinPath=function(){return"resource/skin/game/treasure/Skin_TreasureItem.exml"},e.prototype.onCreate=function(){},e.prototype.onFristRemove=function(){},e.prototype.onDataChange=function(t){this.item_img.source="wupin_"+t.Index+"_png"},e}(dnc.ui.BaseListItem);t.TreasureItem=e,__reflect(e.prototype,"mummy.game.TreasureItem")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.onCreate=function(){this.bounces=!0;var t=new eui.TileLayout;t.horizontalGap=5,t.verticalGap=5,t.paddingLeft=10,t.horizontalAlign=egret.HorizontalAlign.CENTER,t.requestedColumnCount=3,this.dataGroup.layout=t},n.prototype.onFristRemove=function(){},n.prototype.getItem=function(){return t.TreasureItem},n.prototype.setData=function(t){this.upDatas.replaceAll(t)},n}(dnc.ui.BaseList);t.TreasureList=e,__reflect(e.prototype,"mummy.game.TreasureList")}(e=t.game||(t.game={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(n,r,i){var o=e.call(this)||this;return o.DEMO_RESGROUP="demoGroup",o.COMMON_RESGROUP="commonGroup",o.Game_RESGROUP="gameGroup",o.res_count=0,o.loginInit=!1,o.resInit=!1,o.countGroupError=0,o.gameInfo=n,o.callObj={callBack:r,self:i},t.data.Context.instance.currentPlatform===PlatformType.web&&(new dnc.plat.Plat_HLMY,dnc.plat.Plat_HLMY.instance.auth()),o.loginInit=!1,o.resInit=!1,o.countGroupError=0,o.res_count=0,o}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/login/Skin_LoginComponent.exml"},n.prototype.onCreate=function(){var e=this;if(this.progressbar_mask.width=0,this.progressbar.mask=this.progressbar_mask,this.percentHeight=100,this.startBtn.visible=!1,this.testPlayBtn.visible=!1,"game"==this.gameInfo)switch(t.data.Context.instance.currentPlatform){case PlatformType.web:this.webLogin(),this.totalResGroupCount=2,this.loadRes([this.Game_RESGROUP]);break;case PlatformType.wxgame:showShare(),wx.getSetting({success:function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return 1==t.authSetting["scope.userInfo"]?(console.log("授权过了"),this.totalResGroupCount=2,WX_SDKManager.instance.userInfoBtnImg="res/startGame_btn.png",this.loadRes([this.Game_RESGROUP])):(console.log("没有授权过"),this.totalResGroupCount=3,WX_SDKManager.instance.userInfoBtnImg="res/login_btn.png",this.loadRes([this.Game_RESGROUP,this.DEMO_RESGROUP])),[2]})})},fail:function(){}})}else switch(t.data.Context.instance.currentPlatform){case PlatformType.web:this.loginInit=!0,this.totalResGroupCount=2,this.loadRes([this.DEMO_RESGROUP]);break;case PlatformType.wxgame:showShare(),this.totalResGroupCount=2,this.loadRes([this.DEMO_RESGROUP])}this.version.text=WX_SDKManager.instance.VERSION,this.testPlayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.testPlay,this)},n.prototype.onFristRemove=function(){egret.Tween.removeTweens(this.startBtn),this.testPlayBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.testPlay,this),this.startBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},n.prototype.testPlay=function(){WX_SDKManager.instance.userInfoBtn&&(WX_SDKManager.instance.userInfoBtn.offTap(),WX_SDKManager.instance.userInfoBtn.destroy(),WX_SDKManager.instance.userInfoBtn=null),this.gameInfo="0_0_0_1_1",this.onTouch(null)},n.prototype.webInitComplete=function(){this.startBtn.visible=!0,egret.Tween.get(this.startBtn,{loop:!0}).to({scaleX:1.1,scaleY:1.1},600).to({scaleX:1,scaleY:1},600,egret.Ease.bounceOut),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},n.prototype.miniGameResInitComplete=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return this.resInit?"game"!==this.gameInfo?[3,4]:(e=!1,3===this.totalResGroupCount&&(this.testPlayBtn.visible=!0),[4,WX_SDKManager.instance.login()]):[3,5];case 1:return(n=r.sent())?(n.data.data.platform=2,n.data.data.appKey=WX_SDKManager.instance.APP_KEY,[4,(new t.net.LoginConnetion).releaseConnet(n.data.data)]):[3,4];case 2:return e=r.sent(),[4,(new t.net.GameInitConnetion).connet()];case 3:if(e=r.sent(),!e)return[2];r.label=4;case 4:this.onTouch(null),r.label=5;case 5:return[2]}})})},n.prototype.webLogin=function(){return __awaiter(this,void 0,void 0,function(){var e,n,n,r,i,o,a;return __generator(this,function(s){switch(s.label){case 0:return e=!1,[3,1];case 1:for(n=location.search,r={},i=n.split("&"),o=0;o<i.length;o++)a=i[o].split("="),r[a[0]]=a[1];return r.platform=2,[4,(new t.net.LoginConnetion).releaseConnet(r)];case 2:e=s.sent(),s.label=3;case 3:return this.loginInit=e,this.webInitComplete(),[2]}})})},n.prototype.loadRes=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return this.res_count=0,this.loadingPlayer=dnc.utils.UIUtils.getMovieClip("loading_playermc","loadingPlayer"),this.loadingGroup.addChild(this.loadingPlayer),this.loadingPlayer.y=-15,this.loadingPlayer.gotoAndPlay("loadingPlayer",-1),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this),[4,RES.loadGroup(this.COMMON_RESGROUP)];
case 1:r.sent(),e=t.length,n=0,r.label=2;case 2:return e>n?[4,RES.loadGroup(t[n])]:[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2]}})})},n.prototype.onResourceLoadComplete=function(e){this.res_count++,this.res_count>=this.totalResGroupCount&&(this.loadingGroup.visible=!1,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this),this.loadingPlayer.parent&&(this.loadingPlayer.stop(),this.loadingPlayer.parent.removeChild(this.loadingPlayer)),this.resInit=!0,t.data.Context.instance.currentPlatform===PlatformType.web?(this.webInitComplete(),console.log("%%%%%%%%")):this.miniGameResInitComplete())},n.prototype.onResourceProgress=function(t){this.progressbar_mask.width=t.itemsLoaded/t.itemsTotal*419,this.loadingPlayer.x=this.progressbar_mask.width-10},n.prototype.onResourceLoadErr=function(e){++this.countGroupError<3?RES.loadGroup(e.groupName):t.data.Context.instance.currentPlatform===PlatformType.web&&alert("资源加载错误，请刷新")},n.prototype.onTouch=function(e){t.game.SoundManager.instance.init(),this.callObj.callBack.call(this.callObj.self,this.gameInfo),this.callObj=null,this.parent.removeChild(this)},n}(dnc.ui.BaseComponent);e.LoginComponent=n,__reflect(n.prototype,"mummy.login.LoginComponent")}(e=t.login||(t.login={}))}(mummy||(mummy={}));var PlatformType;!function(t){t[t.web=0]="web",t[t.wxgame=1]="wxgame",t[t.qqgame=2]="qqgame"}(PlatformType||(PlatformType={}));var GameDialog=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinPath=function(){return"resource/skin/game/Skin_GameDialog.exml"},e.prototype.setInfo=function(t,e){return this.info=t,this.type=e,this},e.prototype.show=function(t){t&&t.addChild(this)},e.prototype.onCreate=function(){this.percentWidth=100,this.percentHeight=100,this.infoLab.text=this.info,this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginFunc,this)},e.prototype.onFristRemove=function(){this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginFunc,this)},e.prototype.loginFunc=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return mummy.data.Context.instance.currentPlatform!==PlatformType.wxgame?[3,4]:(mummy.data.Context.instance.connect_error=!1,t=!1,[4,WX_SDKManager.instance.login()]);case 1:return e=n.sent(),e.data.data.platform=2,e.data.data.appKey=WX_SDKManager.instance.APP_KEY,[4,(new mummy.net.LoginConnetion).releaseConnet(e.data.data)];case 2:return t=n.sent(),[4,(new mummy.net.GameInitConnetion).connet()];case 3:if(t=n.sent(),!t)return[2];t&&this.parent&&this.parent.removeChild(this),n.label=4;case 4:return[2]}})})},e}(dnc.ui.BaseComponent);__reflect(GameDialog.prototype,"GameDialog");var MainLayer=function(t){function e(){var n=t.call(this)||this;return e.instance=n,mummy.data.Context.instance.adOpen=!1,n}return __extends(e,t),e.prototype.getInitDisplay=function(){return t.prototype.getInitDisplay.call(this)},e.prototype.onCreate=function(){var t,e=this;if(mummy.data.Context.instance.currentPlatform===PlatformType.web)t=egret.getOption("state"),""===t?t="game":null;else{systemInfo=wx.getSystemInfoSync();var n=wx.getLaunchOptionsSync().query;console.log(n,"启动参数"),n.dnc&&(t=n.dnc),wx.onShow(function(n){console.log(n.scene,"场景值"),n.query.dnc&&1007===n.scene&&(t=n.query.dnc,e.startGame(t))})}this.soundManager=new mummy.game.SoundManager,this.startGame(t)},e.prototype.onPause=function(){egret.ticker.pause(),this.soundManager&&this.soundManager.onPause()},e.prototype.onResume=function(){egret.ticker.resume(),this.soundManager&&this.soundManager.onResume()},e.prototype.startGame=function(t){void 0===t&&(t="game"),this.removeChildren();var e=new mummy.login.LoginComponent(t,this.onStart,this);this.addChild(e)},e.prototype.onStart=function(t){if(mummy.game.SoundManager.instance.playMusic("game"),"game"==t){var e=new mummy.game.Game;this.addChild(e)}else{var n=t.split("_");if(this.sendDemoStatistics(n),"1"==n[0]){var r=new mummy.game.DemoRecord(n);this.addChild(r)}else{var i=new mummy.game.Demo(n);this.addChild(i)}}},e.prototype.sendDemoStatistics=function(t){var e=new mummy.game.DemoStatisticsData;e.type=Number(t[0]),e.shareId=t[1],e.userId=Number(t[2]),e.chapterNo=Number(t[3]),e.chapterIndex=Number(t[4]),(new mummy.net.StatisticsDemoConnection).connet(e)},e.prototype.showErrorInfo=function(t,e){(new GameDialog).setInfo(t,e).show(this)},e.prototype.showTipInfo=function(t){var e=new TipDialog(t);e.horizontalCenter=0,this.addChild(e)},e}(dnc.main.BaseMainLayer);__reflect(MainLayer.prototype,"MainLayer");var systemInfo;window.MainLayer=MainLayer;var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var GameInterface=function(){function t(){}return t.prototype.GetStageContentSize=function(){return{width:MainLayer.instance.stage.stageWidth,height:MainLayer.instance.stage.stageHeight}},t}();__reflect(GameInterface.prototype,"GameInterface"),window.GameInterface=new GameInterface;var TipDialog=function(t){function e(e){var n=t.call(this)||this;return n.info=e,n}return __extends(e,t),e.prototype.onCreate=function(){var t=new eui.Label;this.addChild(t),t.horizontalCenter=0,t.y=900/1136*mummy.data.Context.instance.stageHeight,t.text=this.info,t.stroke=2,t.strokeColor=6241026,t.size=20,egret.Tween.get(t).to({y:800/1136*mummy.data.Context.instance.stageHeight,alpha:.3},3e3,egret.Ease.quadIn).call(function(){t.parent&&(egret.Tween.removeTweens(t),t.parent.removeChild(t))})},e.prototype.onFristRemove=function(){},e}(dnc.ui.BaseComponent);__reflect(TipDialog.prototype,"TipDialog");var mummy;!function(t){var e;!function(e){var n=function(e){function n(t,n){var r=e.call(this)||this;return r.selectChapter=1,r.callObj={callBack:t,self:n},r}return __extends(n,e),n.prototype.onBeforeSkin=function(){},n.prototype.getSkinPath=function(){return"resource/skin/map/Skin_Map.exml"},n.prototype.onCreate=function(){this.percentHeight=100,this.getMapData(),this.showFocus();for(var t=0;t<this.chapterGroup.numChildren;t++){var e=this.chapterGroup.getChildAt(t);e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchChapter,this)}this.joinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this)},n.prototype.onFristRemove=function(){for(var t=0;t<this.chapterGroup.numChildren;t++){var e=this.chapterGroup.getChildAt(t);e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchChapter,this)}this.joinBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBtn,this)},n.prototype.getMapData=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r,i;return __generator(this,function(o){switch(o.label){case 0:return[4,(new t.net.MapConnetion).connet()];case 1:if(e=o.sent(),null==e)return[2];for(this.mapData=e,this.selectChapter=e.currentChapter,n=0;n<this.chapterGroup.numChildren;n++)r=this.chapterGroup.getChildAt(n),i=e.chapterState[n],r.source="map_cpt_"+i+"_png",n==e.currentChapter-1&&(this.playerImg.x=r.x,this.playerImg.y=r.y+15);return[2]}})})},n.prototype.showFocus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.isDestory?[3,3]:(this.playerImg.visible=!0,[4,dnc.utils.PromiseUtils.delay(500)]);case 1:return t.sent(),this.playerImg.visible=!1,[4,dnc.utils.PromiseUtils.delay(500)];case 2:return t.sent(),[3,0];case 3:return[2]}})})},n.prototype.onTouchChapter=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){return e=t.target,0===this.mapData.chapterState[this.chapterGroup.getChildIndex(e)]?[2]:(this.playerImg.x=e.x,this.playerImg.y=e.y+15,this.selectChapter=this.chapterGroup.getChildIndex(e)+1,[2])})})},n.prototype.onTouchBtn=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.target==this.joinBtn&&this.callObj.callBack.call(this.callObj.self,this.selectChapter),this.parent&&this.parent.removeChild(this),[2]})})},n}(dnc.ui.BaseComponent);e.Map=n,__reflect(n.prototype,"mummy.map.Map")}(e=t.map||(t.map={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="AddAdvBulbConnetion",e.uri="/addAdvBulb",e}return __extends(e,t),e.prototype.connet=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this._connetByUser()];case 1:return t=e.sent(),[2,t]}})})},e}(t.BaseConnetion);t.AddAdvBulbConnetion=e,__reflect(e.prototype,"mummy.net.AddAdvBulbConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var dnc;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.PreResGroupName="loading",e.touchEnabled=!1,e.touchChildren=!0,egret.ImageLoader.crossOrigin="anonymous";var n=new AssetAdapter,r=new ThemeAdapter;return egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",r),mummy.data.Context.init(),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),mummy.data.Context.instance.stageHeight=this.stage.stageHeight,this.gameLayer=new MainLayer,this.initDisplay=this.gameLayer.getInitDisplay(),this.addChild(this.initDisplay),this.lifecycle(),this.runGame()},e.prototype.lifecycle=function(){var t=this;egret.lifecycle.addLifecycleListener(function(e){t.plugin()}),egret.lifecycle.onPause=function(){t.onPause()},egret.lifecycle.onResume=function(){egret.ticker.resume(),t.onResume()}},e.prototype.plugin=function(){},e.prototype.onPause=function(){this.gameLayer&&this.gameLayer.onPause()},e.prototype.onResume=function(){this.gameLayer&&this.gameLayer.onResume()},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(r){switch(r.label){case 0:switch(r.trys.push([0,15,,16]),t=mummy.data.Context.instance.currentPlatform){case PlatformType.web:return[3,1];case PlatformType.wxgame:return[3,3]}return[3,8];case 1:return[4,RES.loadConfig("resource/default.res.json","resource/")];case 2:return r.sent(),[3,8];case 3:return[3,5];case 4:return r.sent(),[3,7];case 5:return[4,RES.loadConfig("default.res.json",WX_SDKManager.instance.resourceAdress)];case 6:r.sent(),r.label=7;case 7:return[3,8];case 8:return[4,this.loadTheme()];case 9:r.sent(),r.label=10;case 10:return r.trys.push([10,12,,13]),[4,RES.loadGroup(this.PreResGroupName)];case 11:return r.sent(),[3,13];case 12:return e=r.sent(),console.log("dnc: preload is null !"),[3,13];case 13:return[4,this.initialization()];case 14:return r.sent(),[3,16];case 15:return n=r.sent(),console.error(n),[3,16];case 16:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var r=new eui.Theme("resource/default.thm.json",t.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.gameLayer?(this.removeChild(this.initDisplay),this.addChild(this.gameLayer),this.initDisplay=null,console.log("dnc: show game")):console.log("dnc: GameLayer is null"),[2]}})})},e.prototype.initialization=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e}(eui.UILayer);t.Main=e,__reflect(e.prototype,"dnc.main.Main")}(e=t.main||(t.main={}))}(dnc||(dnc={})),window.dnc=dnc,window.mummy=mummy;var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="ChapterConnetion",e.uri="/chapter/enter",e}return __extends(e,t),e.prototype.connet=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e={chapterNo:t},[4,this._connetByUser(e)];case 1:return n=r.sent(),n&&n.chapterInfo?[2,n.chapterInfo]:[2,null]}})})},e}(t.BaseConnetion);t.ChapterConnetion=e,__reflect(e.prototype,"mummy.net.ChapterConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.tag="GameInitConnetion",t.uri="/init",t}return __extends(n,e),n.prototype.connet=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this._connetByUser()];case 1:return e=r.sent(),e&&e.currentChapter?(t.data.Context.instance.currentChapter=e.currentChapter,t.data.Context.instance.configInfo=e.configInfo,n=e.configInfo.advConfigInfo,n&&n.advState&&1===n.advState&&(t.data.Context.instance.adOpen=!0),n&&1===n.advState&&n.adUnitId&&(n.adUnitId[0]||(t.data.Context.instance.adOpen=!1),WX_SDKManager.instance.adObj=n.adUnitId),[2,!0]):[2,!1]}})})},n}(e.BaseConnetion);e.GameInitConnetion=n,__reflect(n.prototype,"mummy.net.GameInitConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="HeartbeatConnetion",e.uri="/beatHead",e}return __extends(e,t),e.prototype.connet=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this._connetByUser()];case 1:return t=e.sent(),[2,t]}})})},e}(t.BaseConnetion);t.HeartbeatConnetion=e,__reflect(e.prototype,"mummy.net.HeartbeatConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.tag="LoginConnetion",t.uri="/login",t}return __extends(n,e),n.prototype.connet=function(e,n){return __awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(o){switch(o.label){case 0:return r={channID:e,platform:n},[4,this._connet(r)];case 1:return i=o.sent(),i?(t.data.Context.instance.userInfo=i.userInfo,[2,!0]):[2,!1]}})})},n.prototype.releaseConnet=function(e){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return[4,this._connet(e)];case 1:return n=r.sent(),n?(t.data.Context.instance.userInfo=n.userInfo,[2,!0]):[2,!1]}})})},n}(e.BaseConnetion);e.LoginConnetion=n,__reflect(n.prototype,"mummy.net.LoginConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="MapConnetion",e.uri="/chapter/map",e}return __extends(e,t),e.prototype.connet=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this._connetByUser()];case 1:return t=e.sent(),[2,t]}})})},e}(t.BaseConnetion);t.MapConnetion=e,__reflect(e.prototype,"mummy.net.MapConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tag="MazeConnetion",e.uri="/chapter/info",e}return __extends(e,t),e.prototype.connet=function(t,e,n){return void 0===n&&(n=!0),__awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(o){switch(o.label){case 0:return r={chapterNo:t,chapterIndex:e},i=null,n?[4,this._connetByUser(r)]:[3,2];case 1:return i=o.sent().MapData,[3,4];case 2:return[4,this._connet(r)];case 3:i=o.sent().MapData,o.label=4;case 4:return[2,i]}})})},e}(t.BaseConnetion);t.MazeConnetion=e,__reflect(e.prototype,"mummy.net.MazeConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tag="MazeRecordConnetion",e.uri="/chapter/pass",e}return __extends(e,t),e.prototype.connet=function(t,e){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e={chapterNo:t.level,chapterIndex:t.index,useTime:t.useTime,record:t.code},[4,this._connetByUser(e)];case 1:return n=r.sent(),[2,n]}})})},e}(t.BaseConnetion);t.MazeRecordConnetion=e,__reflect(e.prototype,"mummy.net.MazeRecordConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tag="PlayerRecordConnetion",e.uri="/chapter/record",e}return __extends(e,t),e.prototype.connet=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e={recordId:t},[4,this._connetByUser(e)];case 1:return n=r.sent(),[2,n]}})})},e}(t.BaseConnetion);t.PlayerRecordConnetion=e,__reflect(e.prototype,"mummy.net.PlayerRecordConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="RankConnetion",e.uri="/rank",e}return __extends(e,t),e.prototype.connet=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this._connetByUser()];case 1:return t=e.sent(),[2,t]}})})},e}(t.BaseConnetion);t.RankConnetion=e,__reflect(e.prototype,"mummy.net.RankConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="StatisticsAdvConnetion",e.uri="/statAdvInfo",e}return __extends(e,t),e.prototype.connet=function(t,e,n,r){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(a){switch(a.label){case 0:return i={},i.type=t,i.chapterNo=e,i.chapterIndex=n,i.extInfo=r,[4,this._connetByUser(i)];case 1:return o=a.sent(),[2,o]}})})},e}(t.BaseConnetion);t.StatisticsAdvConnetion=e,__reflect(e.prototype,"mummy.net.StatisticsAdvConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="StatisticsDemoConnection",e.uri="/statTryPlay",e}return __extends(e,t),e.prototype.connet=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return[4,this._connetByUser(t)];case 1:return e=n.sent(),[2,e]}})})},e}(t.BaseConnetion);t.StatisticsDemoConnection=e,__reflect(e.prototype,"mummy.net.StatisticsDemoConnection")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="StatisticsMazeConnection",e.uri="/statPerChapter",e}return __extends(e,t),e.prototype.connet=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return[4,this._connetByUser(t)];case 1:return e=n.sent(),[2,e]}})})},e}(t.BaseConnetion);t.StatisticsMazeConnection=e,__reflect(e.prototype,"mummy.net.StatisticsMazeConnection")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="TreasureConnetion",e.uri="/treasureList",e}return __extends(e,t),e.prototype.connet=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this._connetByUser()];case 1:return t=e.sent(),[2,t]}})})},e}(t.BaseConnetion);t.TreasureConnetion=e,__reflect(e.prototype,"mummy.net.TreasureConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tag="UserInfoConnetion",e.uri="/userInfo",e}return __extends(e,t),e.prototype.connet=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return e={userId:t},[4,this._connet(e)];case 1:return n=r.sent(),n&&n.userInfo?[2,n.userInfo]:[2,null]}})})},e}(t.BaseConnetion);t.UserInfoConnetion=e,__reflect(e.prototype,"mummy.net.UserInfoConnetion")}(e=t.net||(t.net={}))}(mummy||(mummy={}));var mummy;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.width=240,e.height=240,e.anchorOffsetX=120,e.anchorOffsetY=120,e.showTimer=new egret.Timer(5e3,0),e}return __extends(e,t),e.prototype.getSkinPath=function(){return"resource/skin/game/Skin_Panel.exml"},e.prototype.onCreate=function(){this.waitImg.scaleX=this.waitImg.scaleY=0,this.upBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.downBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.waitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.showTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)},e.prototype.onFristRemove=function(){this.upBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.downBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.waitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.showTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this)},e.prototype.show=function(){this.panelGroup.visible=!0,this.resetTween(),this.showTimer.start()},e.prototype.hide=function(){this.panelGroup.visible=!1,this.showTimer.reset()},e.prototype.addTouchListener=function(t,e){this.touchCall={callBack:t,self:e}},e.prototype.removeTouchListener=function(){this.touchCall=null},e.prototype.onTimer=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(r){switch(r.label){case 0:t=.6,e=40,n=0,r.label=1;case 1:return 2>n?(this.waitImg.source="cursor_wait_g_png",this.upImg.source="cursor_up_g_png",this.downImg.source="cursor_down_g_png",this.leftImg.source="cursor_left_g_png",this.rightImg.source="cursor_right_g_png",egret.Tween.get(this.waitImg).to({scaleX:1,scaleY:1,alpha:.5},500,egret.Ease.sineOut),egret.Tween.get(this.upImg).to({scaleX:t,scaleY:t,alpha:0,y:54-e},500,egret.Ease.sineOut),egret.Tween.get(this.downImg).to({scaleX:t,scaleY:t,alpha:0,y:187+e},500,egret.Ease.sineOut),egret.Tween.get(this.leftImg).to({scaleX:t,scaleY:t,alpha:0,x:49-e},500,egret.Ease.sineOut),egret.Tween.get(this.rightImg).to({scaleX:t,scaleY:t,alpha:0,x:191+e},500,egret.Ease.sineOut),[4,dnc.utils.PromiseUtils.delay(600)]):[3,3];case 2:return r.sent(),this.resetTween(),n+=1,[3,1];case 3:return[2]}})})},e.prototype.resetTween=function(){egret.Tween.removeTweens(this.waitImg),egret.Tween.removeTweens(this.upImg),egret.Tween.removeTweens(this.downImg),egret.Tween.removeTweens(this.leftImg),egret.Tween.removeTweens(this.rightImg),this.waitImg.source="cursor_wait_png",this.waitImg.alpha=1,this.waitImg.scaleX=this.waitImg.scaleY=0,this.upImg.source="cursor_up_png",this.upImg.alpha=1,this.upImg.scaleX=this.upImg.scaleY=1,this.upImg.y=54,this.downImg.source="cursor_down_png",this.downImg.alpha=1,this.downImg.scaleX=this.downImg.scaleY=1,this.downImg.y=187,this.leftImg.source="cursor_left_png",this.leftImg.alpha=1,this.leftImg.scaleX=this.leftImg.scaleY=1,this.leftImg.x=49,this.rightImg.source="cursor_right_png",this.rightImg.alpha=1,this.rightImg.scaleX=this.rightImg.scaleY=1,this.rightImg.x=191},e.prototype.onTouch=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(t.target){case this.waitBtn:this.touchCall.callBack.call(this.touchCall.self,"wait");break;case this.upBtn:this.touchCall.callBack.call(this.touchCall.self,"up");break;case this.downBtn:this.touchCall.callBack.call(this.touchCall.self,"down");break;case this.leftBtn:this.touchCall.callBack.call(this.touchCall.self,"left");break;case this.rightBtn:this.touchCall.callBack.call(this.touchCall.self,"right")}return[2]})})},e}(dnc.ui.BaseComponent);t.Panel=e,__reflect(e.prototype,"mummy.game.Panel")}(e=t.game||(t.game={}))}(mummy||(mummy={}));