var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GameUser=function(){function t(){this.id=0,this.name="",this.avatar="http://pic.vszone.cn/upload/avatar/1464079970.png",this.token="",this.pValue=0,this.tableID=0,this.isOwner=!1,this.curAvatarType=1,this.ownerId=0,this.maxScore=0,this.curscore=1}return t}();__reflect(GameUser.prototype,"GameUser");var BaseClass=function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;if(!i._instance){var s=t.length;0==s?i._instance=new i:1==s?i._instance=new i(t[0]):2==s?i._instance=new i(t[0],t[1]):3==s?i._instance=new i(t[0],t[1],t[2]):4==s?i._instance=new i(t[0],t[1],t[2],t[3]):5==s&&(i._instance=new i(t[0],t[1],t[2],t[3],t[4]))}return i._instance},t}();__reflect(BaseClass.prototype,"BaseClass");var BaseSound=function(){function t(){this._cache={},this._loadingCache=new Array,App.TimerManager.doTimer(6e4,0,this.dealSoundTimer,this)}return t.prototype.dealSoundTimer=function(){for(var t=egret.getTimer(),e=Object.keys(this._cache),i=0,s=e.length;s>i;i++){var n=e[i];this.checkCanClear(n)&&t-this._cache[n]>=SoundManager.CLEAR_TIME&&(delete this._cache[n],RES.destroyRes(n))}},t.prototype.getSound=function(t){var e=RES.getRes(t);if(e)this._cache[t]&&(this._cache[t]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(t))return null;this._loadingCache.push(t),RES.getResAsync(t,this.onResourceLoadComplete,this)}return e},t.prototype.onResourceLoadComplete=function(t,e){var i=this._loadingCache.indexOf(e);-1!=i&&(this._loadingCache.splice(i,1),this._cache[e]=egret.getTimer(),this.loadedPlay(e))},t.prototype.loadedPlay=function(t){},t.prototype.checkCanClear=function(t){return!0},t}();__reflect(BaseSound.prototype,"BaseSound");var qr;!function(t){var e=function(){function t(){}return t.glog=function(e){return t.isInit||t.init(),1>e&&console.log("错误:n="+e),t.LOG_TABLE[e]},t.gexp=function(e){for(t.isInit||t.init();0>e;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},t.init=function(){t.isInit=!0;for(var e=0;8>e;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;256>e;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;255>e;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e},t}();e.EXP_TABLE=new Array(256),e.LOG_TABLE=new Array(256),t.QRMath=e,__reflect(e.prototype,"qr.QRMath")}(qr||(qr={}));var LoseUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="LoseUISkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.tuichuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tuichuFunc,this),this.jixuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jixuFunc,this)},e.prototype.playAction=function(){var t=RES.getRes("lose3"),e=RES.getRes("lose2"),i=RES.getRes("lose1"),s=new dragonBones.EgretFactory;s.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(t)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(i,e));var n=s.buildArmature("armatureName");this.addChild(n.display),n.display.x=275,n.display.y=290,dragonBones.WorldClock.clock.add(n),n.addEventListener(egret.Event.COMPLETE,function(){dragonBones.WorldClock.clock.remove(n)},this),n.animation.gotoAndPlay("zq_lose_01a",-1,-1,1)},e.prototype.tuichuFunc=function(){this.parent&&this.parent.removeChild(this),TableUI.Instance().quitFunc()},e.prototype.jixuFunc=function(){this.parent&&this.parent.removeChild(this),TableUI.Instance().againFunc()},e}(eui.Component);__reflect(LoseUI.prototype,"LoseUI");var LanguageType=function(){function t(){}return t}();LanguageType.En="_En",LanguageType.Ch="",__reflect(LanguageType.prototype,"LanguageType");var App=function(){function t(){}return Object.defineProperty(t,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DisplayUtils",{get:function(){return DisplayUtils.getInstance()},enumerable:!0,configurable:!0}),t}();App.Proto=null,App.Language=LanguageType.Ch,App.UserToken="",App.CurrChatId="",App.CurrGameId=1,App.CurrGameIsAi=!1,App.CurrGameAiLevel=3,App.CurrRoomId="",App.CurrPlatformUid="",App.kingkongBgMusic_ogg="kingkongBgMusic_ogg",App.win_ogg="win_ogg",App.lose_ogg="lose_ogg",App.banana_ogg="banana_ogg",App.kingkongBoom_ogg="kingkongBoom_ogg",App.renglei_ogg="renglei_ogg",App.renglei2_ogg="renglei2_ogg",App.kingkongjump_ogg="kingkongjump_ogg",App.readyGo_ogg="readyGo_ogg",__reflect(App.prototype,"App");var ErrorNote=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onClick=function(t){13==t.keyCode&&GameSceneView._gameScene.login()},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),"btn_return"==e?(this.btn_return=i,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this)):"btn_reconnect"==e&&(this.btn_reconnect=i,this.btn_reconnect.visible=!1,this.btn_reconnect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonReconnRoom,this))},e.prototype.childrenCreated=function(){for(t.prototype.childrenCreated.call(this),this.height=this.stage.stageHeight,this.lab_userID.text="用户ID："+GameData.gameUser.id;GameData.intervalList.length>0;)clearTimeout(GameData.intervalList.pop())},e.prototype.SetErrorMsg=function(t){this.errMsg=t},e.prototype.mbuttonReconnRoom=function(t){GameSceneView._gameScene.reconnectView()},e.prototype.mbuttonExitRoom=function(t){GameSceneView._gameScene.login()},e}(eui.Component);__reflect(ErrorNote.prototype,"ErrorNote",["eui.UIComponent","egret.DisplayObject"]);var GameData=function(){function t(){}return t.init=function(){this.isGameOver=!0,this.isRoomOwner=!1,this.syncFrame=!1,this.number1="",this.number2="",this.number3="",this.roomID="",this.intervalList=[],this.playerUserIds=[],this.roomPropertyValue=this.roomPropertyType.mapA},t.configEnvir=function(e,i){t.CHANNEL=e,t.DEFAULT_ENV=i?t.ENVIRONMENT.dev:t.ENVIRONMENT.pro,"MatchVS"===e&&(t.gameID=201150,t.appkey="0db8550d9bd345da82b852564f59d2e6",t.secretKey="15bf7e1bc2454d21b071d67f568e257c"),"MatchVS-Test"===e&&(t.gameID=201170,t.appkey="a5b937f29a4c480bb6946093105c0565",t.secretKey="a8c5c84afde44136a5eea6f0ac09887c"),"MatchVS-Test1"===e&&(t.gameID=201078,t.appkey="938e1ee0db444a079fe0695598677ba0",t.secretKey="9b11e0eca09141a1961d49d6b6028075")},t.getBindOpenIDAddr=function(t,e){if("MatchVS"==t||"Matchvs"==t){if("release"==e)return"http://vsuser.matchvs.com/wc6/thirdBind.do?";if("alpha"==e)return"http://alphavsuser.matchvs.com/wc6/thirdBind.do?"}else if("MatchVS-Test1"==t){if("release"==e)return"http://zwuser.matchvs.com/wc6/thirdBind.do?";if("alpha"==e)return"http://alphazwuser.matchvs.com/wc6/thirdBind.do?"}},t.getSign=function(e){var i=t.appkey+"&"+e+"&"+t.secretKey;console.info("待签名："+i);var s=(new MD5).hex_md5(i);return s},t}();GameData.isScoll=!1,GameData.myAccount=0,GameData.CHANNEL="MatchVS",GameData.DEFAULT_ENV="alpha",GameData.ENVIRONMENT={dev:"alpha",pro:"release"},GameData.gameID=202478,GameData.appkey="d494a96e6c134be285e4a8988409c24d#E",GameData.secretKey="3de4c550059141fb9129c0d21a2a53a6",GameData.gameUser=new GameUser,GameData.playerUserIds=[],GameData.matchType=0,GameData.randomMatch=1,GameData.specialMatch=2,GameData.tagsMatch=3,GameData.maxPlayerNum=2,GameData.isRoomOwner=!1,GameData._playerList=[],GameData.isCreateRoom=!1,GameData.runtimeType="web",GameData.gameStartEvent="gameStart",GameData.BallMoveEvent="ballmove",GameData.setWhiteBallPosEvent="setwhiteballpos",GameData.gameOverEvent="gameOver",GameData.playerPositionEvent="playerPosition",GameData.reconnectStartEvent="gameReconnectStart",GameData.newStarEvent="newStar",GameData.changeStarEvent="changeStar",GameData.gameReadyEvent="gameReady",GameData.reconnectReadyEvent="gameReconnectReady",GameData.events={},GameData.syncFrame=!1,GameData.isGameOver=!1,GameData.starPositionX=0,GameData.starPositionY=0,GameData.frameRate=20,GameData.defaultHeight=400,GameData.roomID="",GameData.isSaoMaEnter=!1,GameData.intervalList=[],GameData.number1="",GameData.number2="",GameData.number3="",GameData.playerTime=60,GameData.roomPropertyType={mapA:"mapA",mapB:"mapB"},GameData.roomPropertyValue="mapA",GameData.createRoomInfo=new MsCreateRoomInfo("MatchvsDemoEgret",2,0,0,1,"mapA"),__reflect(GameData.prototype,"GameData");var GameResultView=function(t){function e(e){var i=t.call(this)||this;return i.particlesArr=[],i.isAgain=!1,i.curSelect=1,i.canLefRig=!1,i.isAgain=!1,0==match.joinFlag||1==match.joinFlag||GameData.isSaoMaEnter?mvs.MsEngine.getInstance.leaveRoom("bye"):GameData.isCreateRoom&&mvs.MsEngine.getInstance.joinOpen("加入吧"),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,i.leaveRoomResponse,i),i.skinName="resource/mySkins/GameResultSkin.exml",i.winNumber=e,i.addEventListener(eui.UIEvent.CREATION_COMPLETE,i.onComplete,i),egret.ExternalInterface.call("sendToNative","gameResultCanclick"),"runtime2"==GameData.runtimeType?i.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(i.KeyBoardMethod,i),i.init(),i}return __extends(e,t),e.prototype.init=function(){this.y=-this.stage.stageHeight/2,egret.Tween.get(this).to({y:0},1e3,egret.Ease.backInOut)},e.prototype.KeyBoardMethod=function(t){if((40==t.keyCode||37==t.keyCode||38==t.keyCode||39==t.keyCode)&&(this.canLefRig=!0,this.group_selected.getChildAt(this.curSelect).visible=!0),(this.canLefRig&&37==t.keyCode||39==t.keyCode)&&(this.group_selected.getChildAt(this.curSelect).visible=!1,this.curSelect=0==this.curSelect?1:0,this.group_selected.getChildAt(this.curSelect).visible=!0),this.canLefRig&&13==t.keyCode)switch(this.curSelect){case 0:this.onLevelClick(),this.curSelect=1,PcKeyBoardHelper.instance.removeListener(this);break;case 1:this.onAgaginClick(),PcKeyBoardHelper.instance.removeListener(this)}},e.prototype.KeyBoardMethodRuntime=function(){var t=this;egret.ExternalInterface.addCallback("sendToJS",function(e){if(("left"==e||"right"==e||"down"==e||"up"==e)&&(t.canLefRig=!0,t.group_selected.getChildAt(t.curSelect).visible=!0),(t.canLefRig&&"left"==e||"right"==e)&&(t.group_selected.getChildAt(t.curSelect).visible=!1,t.curSelect=0==t.curSelect?1:0,t.group_selected.getChildAt(t.curSelect).visible=!0),t.canLefRig&&"OK"==e)switch(t.curSelect){case 0:t.onLevelClick(),t.curSelect=1;break;case 1:t.onAgaginClick()}})},e.prototype.onComplete=function(){this.height=this.stage.stageHeight,this.btn_again.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAgaginClick,this),this.btn_leave.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLevelClick,this),this.showResult()},e.prototype.onLevelClick=function(){egret.ExternalInterface.call("sendToNative","gameResultCanNotclick"),this.dispose(),match.joinFlag=0,e.canClick=!1,mvs.MsEngine.getInstance.leaveRoom("zoule"),GameSceneView._gameScene.lobby()},e.prototype.showResult=function(){var t=this;this.lab_myName.text=GameData.gameUser.name+"(我)";for(var e=0;e<GameData._playerList.length;e++)GameData._playerList[e].id!=GameData.gameUser.id&&(this.lab_otherName.text=GameData._playerList[e].name);this.postMyScore(),1==this.winNumber?(this.scorelable.text="分数 +5",this.onParticleEffect(0,0,"flowers"),this.img_result1.source="loseBG_png",this.img_result2.source="winBG_png",this.onParticleEffect(this.gp_particle.width/2+400,this.gp_particle.height/2,"hua"),this.onParticleEffect(this.gp_particle.width/2-400,this.gp_particle.height/2,"falisnow")):3==this.winNumber&&(this.scorelable.text="分数 -5",this.img_result1.source="winBG_png",this.img_result2.source="loseBG_png",this.onParticleEffect(this.gp_particle.width/2-400,this.gp_particle.height/2,"hua"),this.onParticleEffect(this.gp_particle.width/2+400,this.gp_particle.height/2,"falisnow")),setTimeout(function(){t.scorelable.visible=!1},4e3),this.addPerson()},e.prototype.postMyScore=function(){var t;1==this.winNumber&&(t=1),3==this.winNumber&&(t=2),GameData.gameUser.curscore>GameData.gameUser.maxScore&&(GameData.gameUser.maxScore=GameData.gameUser.curscore)},e.prototype.onPostComplete=function(t){var e=t.currentTarget;console.log("post data : ",e.response)},e.prototype.onAgaginClick=function(){this.dispose(),egret.ExternalInterface.call("sendToNative","gameResultCanNotclick"),e.canClick=!1,1==GameData.isCreateRoom?GameSceneView._gameScene.match(3):0==match.joinFlag?GameSceneView._gameScene.match(0):GameData.isSaoMaEnter?GameSceneView._gameScene.match(4):1==match.joinFlag&&GameSceneView._gameScene.match(1)},e.prototype.leaveRoomResponse=function(t){var e=t.data;200!==e.status||mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this)},e.prototype.onParticleEffect=function(t,e,i,s,n){void 0===s&&(s=-1),void 0===n&&(n=1);var r=RES.getRes(i+"_png"),o=RES.getRes(i+"_json"),a=new particle.GravityParticleSystem(r,o);if(this.particlesArr.push(a),a.y=e,a.x=t,a.scaleX=n,"flowers"==i?(this.group_flower.addChild(a),a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2):this.gp_particle.addChild(a),a.start(s),"hua"==i)for(var h=2;7>h;h++){i="hua"+h;var r=RES.getRes(i+"_png"),o=RES.getRes("hua_json"),a=new particle.GravityParticleSystem(r,o);this.particlesArr.push(a),a.y=e,a.x=t,a.scaleX=n,this.gp_particle.addChild(a),a.start(s)}},e.prototype.addPerson=function(){this.roleAvatar1=this.createAvatar(this.gp_people1,!1),this.roleAvatar2=this.createAvatar(this.gp_people2,!0);GameData.gameUser;3==this.winNumber?(this.roleAvatar1.armature.play("win"),this.roleAvatar2.armature.play("Loser2"),App.SoundManager.playEffect(App.lose_ogg)):1==this.winNumber&&(this.roleAvatar2.armature.play("win"),this.roleAvatar1.armature.play("Loser2"),App.SoundManager.playEffect(App.win_ogg),App.SoundManager.muteBg())},e.prototype.createAvatar=function(t,e){t.removeChildren();var i,s;if(e)s=GameData.gameUser;else for(var n=0;n<GameData._playerList.length;n++)GameData._playerList[n].id!=GameData.gameUser.id&&(s=GameData._playerList[n]);return i=new RoleAvatar(s.curAvatarType,s.avatar),i.armature.x=.5*t.width,i.armature.y=t.height,t.addChild(i.armature),i},e.prototype.addDBresult=function(){this.dbResult1=AssetManager.getQuickDBArmature("winloser"),this.dbResult2=AssetManager.getQuickDBArmature("winloser"),this.gp_wenzi.addChild(this.dbResult1),this.gp_wenzi.addChild(this.dbResult2),this.dbResult1.x=this.gp_wenzi.width/2-400,this.dbResult2.x=this.gp_wenzi.width/2+400,this.dbResult1.y=this.gp_wenzi.height/2-100,this.dbResult2.y=this.gp_wenzi.height/2-100,this.dbResult1.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onPlayResultComplete,this),this.dbResult1.visible=!1,this.dbResult2.visible=!1},e.prototype.onPlayResultComplete=function(){var t=this;this.dbResult1.visible=!1,this.dbResult2.visible=!1,setTimeout(function(){for(var e=0;e<t.particlesArr.length;e++)t.particlesArr[e].stop()},5e3)},e.prototype.dispose=function(){this.roleAvatar1.dispose(),this.roleAvatar2.dispose()},e}(eui.Component);GameResultView.canClick=!0,__reflect(GameResultView.prototype,"GameResultView");var GameSceneView=function(t){function e(){var i=t.call(this)||this;return e._gameScene=i,i.initView(),i}return __extends(e,t),e.prototype.errorResponse=function(t,i){e._gameScene.errorView(0,"错误回调：errCode="+t+" errMsg="+i)},e.prototype.errorResponses=function(t){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponse,this);var i=t.data.errCode,s=t.data.errMsg;1001==i&&(""!=s&&s.indexOf("hotel")>=0?e._gameScene.errorView(1,"错误回调：errCode="+i+" errMsg="+s):e._gameScene.errorView(0,"错误回调：errCode="+i+" errMsg="+s))},e.prototype.initView=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponses,this),this.thisContainer=new egret.Sprite,this.addChild(this.thisContainer),this.login()},e.prototype.login=function(){this.removeAll();var t=new Login;this.cuntPage=t,this.thisContainer.addChild(t)},e.prototype.lobby=function(){this.removeAll();var t=new Lobby;Lobby.canClick=!0,this.cuntPage=t,this.thisContainer.addChild(t)},e.prototype.match=function(t){egret.ExternalInterface.call("sendToNative","lobbyCanNotclick"),this.removeAll();var e=new match(t);match.canClick=!0,this.cuntPage=e,this.thisContainer.addChild(e)},e.prototype.gameResult=function(t){GameResultView.canClick=!0;var e=new GameResultView(t);this.cuntPage=e,this.thisContainer.addChild(e)},e.prototype.play=function(){egret.ExternalInterface.call("sendToNative","matchCanNotclick"),this.removeAll(),this.thisContainer.addChild(TableUI.Instance())},e.prototype.reconnectView=function(){this.removeAll();var t=new ReconnectUI;this.thisContainer.addChild(t)},e.prototype.errorView=function(t,e){this.removeAll(),GameData.init();var i=new ErrorNote;i.SetErrorMsg(e),this.thisContainer.addChild(i)},e.prototype.removeAll=function(){this.cuntPage&&this.cuntPage.release&&(this.cuntPage.release(),this.cuntPage=null),this.thisContainer.removeChildren()},e}(egret.Sprite);__reflect(GameSceneView.prototype,"GameSceneView");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?s(n):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Loading=function(t){function e(e,i){var s=t.call(this)||this;return s.logoUrl="resource/assets/loading_logo.png",s.isShow=!1,s.createView(e,i),s}return __extends(e,t),e.prototype.createView=function(t,e){this.w=t,this.h=e,this.textField=new egret.TextField,this.textField.y=this.h/2,this.textField.textColor=13421772,this.textField.size=46,this.textField.width=this.w,this.textField.height=100,this.textField.fontFamily="Black",this.textField.textAlign="center",this.textField.text="登录中…",this.textField_power=new egret.TextField,this.textField_power.text=".",this.textField_power.textColor=13421772,this.textField_power.size=80,this.textField_power.fontFamily="White",this.textField_power.textAlign="center",this.textField_power.x=.5*this.w,this.textField_power.y=.8*this.h,egret.Tween.get(this.textField_power,{loop:!0}).to({rotation:360},800,egret.Ease.cubicIn);var i=new egret.Shape;i.width=this.w,i.height=this.h,i.x=(this.w-i.width)/2,i.y=(this.h-i.height)/2,i.graphics.beginFill(3355443,.8),i.graphics.drawRect(-500,-500,this.w+1e3,this.h+1e3),i.graphics.endFill(),this.addChild(i),this.addChild(this.textField),this.addChild(this.textField_power),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this)},e.prototype.setProgress=function(t,e){var i=Math.floor(t/e*100);this.textField.text="加载中…"+i+"%"},e.create=function(t){var i=new e(t.width,t.height);return i.context=t,i},e.prototype.show=function(){this.isShow||(this.isShow=!0,this.context.addChild(this))},e.prototype.close=function(){this.isShow&&(this.isShow=!1,this.context.removeChild(this))},e.prototype.reconnect=function(){var t=new eui.Button;t.x=this.stage.stageWidth/2,t.y=this.stage.stageHeight/3*2,this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSceneView._gameScene.login()},this)},e}(egret.Sprite);__reflect(Loading.prototype,"Loading");var Lobby=function(t){function e(){var e=t.call(this)||this;return e.i=0,egret.ExternalInterface.call("sendToNative","lobbyCanclick"),e.skinName="src/ui/matchvs/Lobby.exml","runtime2"==GameData.runtimeType?e.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(e.KeyBoardMethod,e),e}return __extends(e,t),e.prototype.init=function(){this.PlayDb(),this.selected.getChildAt(0).visible=!0,this.len=this.selected.numChildren},e.prototype.PlayDb=function(){var t=RES.getRes("ks3_json"),e=RES.getRes("ks2_json"),i=RES.getRes("ks1_png"),s=dragonBones.EgretFactory.factory;s.parseDragonBonesData(t),s.parseTextureAtlasData(e,i);var n=s.buildArmatureDisplay("armatureName");this.addChild(n),n.scaleX=n.scaleY=1.5,n.x=this.width/2,n.y=.35*this.stage.stageHeight,n.animation.play("zq_ks_01a",1),n.addEventListener(egret.Event.COMPLETE,function(){n.animation.play("zq_ks_02a",0)},this)},e.prototype.KeyBoardMethod=function(t){if(39==t.keyCode){for(this.i;this.i<this.len;this.i++)if(this.selected.getChildAt(this.i).visible=!0){this.selected.getChildAt(this.i).visible=!1,this.i!=this.len-1?(this.selected.getChildAt(this.i+1).visible=!0,this.i=this.i+1):(this.selected.getChildAt(0).visible=!0,this.i=0);break}}else if(37==t.keyCode){for(this.i;this.i<this.len;this.i++)if(this.selected.getChildAt(this.i).visible=!0){this.selected.getChildAt(this.i).visible=!1,0!=this.i?(this.selected.getChildAt(this.i-1).visible=!0,this.i=this.i-1):(this.selected.getChildAt(2).visible=!0,this.i=2);break}}else if(13==t.keyCode)switch(this.i){case 0:GameSceneView._gameScene.match(0),this.removePckey();break;case 1:GameSceneView._gameScene.match(1),this.removePckey(),this.i=0;break;case 2:GameSceneView._gameScene.match(2),this.removePckey(),this.i=0}},e.prototype.KeyBoardMethodRuntime=function(){var t=this;egret.ExternalInterface.addCallback("sendToJS",function(e){if("right"==e){for(t.i;t.i<t.len;t.i++)if(t.selected.getChildAt(t.i).visible=!0){t.selected.getChildAt(t.i).visible=!1,t.i!=t.len-1?(t.selected.getChildAt(t.i+1).visible=!0,t.i=t.i+1):(t.selected.getChildAt(0).visible=!0,t.i=0);break}}else if("left"==e){for(t.i;t.i<t.len;t.i++)if(t.selected.getChildAt(t.i).visible=!0){t.selected.getChildAt(t.i).visible=!1,0!=t.i?(t.selected.getChildAt(t.i-1).visible=!0,t.i=t.i-1):(t.selected.getChildAt(2).visible=!0,t.i=2);break}}else if("OK"==e)switch(t.i){case 0:GameSceneView._gameScene.match(0);break;case 1:GameSceneView._gameScene.match(1),t.i=0;break;case 2:GameSceneView._gameScene.match(2),t.i=0}})},e.prototype.removePckey=function(){PcKeyBoardHelper.instance.removeListener(this)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.anchorOffsetX=this.width/2,this.x=this.stage.stageWidth/2,this.init(),this.initView()},e.prototype.initView=function(){var t=this;this.group.getChildAt(0).addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.showSelected(0),GameSceneView._gameScene.match(0),t.removePckey()},this),this.group.getChildAt(1).addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.showSelected(1),GameSceneView._gameScene.match(1),t.removePckey()},this),this.group.getChildAt(2).addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.showSelected(2),GameSceneView._gameScene.match(2),t.removePckey()},this)},e.prototype.showSelected=function(t){for(var e=0;e<this.selected.numChildren;e++)this.selected.getChildAt(e).visible=e==t},e}(eui.Component);Lobby.canClick=!0,__reflect(Lobby.prototype,"Lobby",["eui.UIComponent","egret.DisplayObject"]);var Login=function(t){function e(){var e=t.call(this)||this;return e.skinName="src/ui/matchvs/Login.exml",e.addMsResponseListen(),e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){this.anchorOffsetX=this.width/2,this.x=this.stage.stageWidth/2,t.prototype.childrenCreated.call(this),this.loading=Loading.create(this),this.Init()},e.prototype.Init=function(){this.loading.show(),this.CheckSaoMa();mvs.MsEngine.getInstance.init(GameData.CHANNEL,GameData.DEFAULT_ENV,GameData.gameID)},e.prototype.CheckSaoMa=function(){this.GetQueryString("roomid")},e.prototype.GetQueryString=function(t){for(var e=window.location.href,i=e.split("?"),s=1;s<i.length;s++){var n=i[s].split("=");n[0]==t&&(GameData.roomID=n[1],GameData.isSaoMaEnter=!0)}},e.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_INIT_RSP,this.initResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_REGISTERUSER_RSP,this.registerUserResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this)},e.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_INIT_RSP,this.initResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_REGISTERUSER_RSP,this.registerUserResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this)},e.prototype.initResponse=function(t){200==t.data.status&&mvs.MsEngine.getInstance.registerUser()},e.prototype.registerUserResponse=function(t){var e=t.data;GameData.gameUser.id=e.id,GameData.gameUser.name=e.name,GameData.gameUser.avatar=e.avatar,GameData.gameUser.token=e.token,0==e.status&&mvs.MsEngine.getInstance.login(e.id,e.token,GameData.gameID,GameData.appkey,GameData.secretKey)},e.prototype.loginResponse=function(t){var e=this;mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LOGIN_RSP,this.loginResponse,this);var i=t.data;200!=i.status||("0"!==i.roomID?(GameData.roomID=i.roomID,mvs.MsEngine.getInstance.leaveRoom(""),GameSceneView._gameScene.lobby()):setTimeout(function(){e.loading.close(),0==GameData.isSaoMaEnter?(console.log("登录成功"),GameSceneView._gameScene.lobby()):GameSceneView._gameScene.match(4)},500))},e}(eui.Component);__reflect(Login.prototype,"Login",["eui.UIComponent","egret.DisplayObject"]);var match=function(t){function e(i){var s=t.call(this)||this;return s._isInRoom=!1,s.isOwner=!1,s.canStartGame=!1,s._roomID="",s.default_name="待加入",s.default_rect_color=5592405,s.isOnePlayAgain=!0,s.btnLeaveX=0,s.curSelect=1,s.canRigLef=!1,s.num=0,App.CurrGameIsAi=!1,GameData.isRoomOwner=!1,s.skinName="src/ui/matchvs/match.exml",e.joinFlag=i,egret.ExternalInterface.call("sendToNative","matchCanclick"),s}return __extends(e,t),e.prototype.showBtn=function(){2==e.joinFlag||3==e.joinFlag?(this.btn_start.visible=!0,this.group_selected.visible=!0,this.wenxintishi.visible=!0,this.wenxintishi.y+this.wenxintishi.height>this.group_btns.y&&(this.group_btns.y=this.wenxintishi.y+this.wenxintishi.height,this.group_selected.y=this.wenxintishi.y+this.wenxintishi.height)):(this.btn_leave.x=this.group_btns.width/2,this.group_selected.getChildAt(0).x=this.btn_leave.x,this.btn_start.visible=!1),"runtime2"==GameData.runtimeType?this.KeyBoardMethodRuntime():"web"==GameData.runtimeType&&PcKeyBoardHelper.instance.addListener(this.KeyBoardMethod,this)},e.prototype.KeyBoardMethod=function(t){if(0==e.joinFlag||1==e.joinFlag)40==t.keyCode||37==t.keyCode||38==t.keyCode||39==t.keyCode?(this.group_selected.getChildAt(0).visible=!0,this.canRigLef=!0):this.canRigLef&&13==t.keyCode&&(this.mbuttonLeaveRoom(),PcKeyBoardHelper.instance.removeListener(this));else if((2==e.joinFlag||3==e.joinFlag)&&((40==t.keyCode||37==t.keyCode||38==t.keyCode||39==t.keyCode)&&(this.group_selected.getChildAt(this.curSelect).visible=!0,this.canRigLef=!0),this.canRigLef&&37==t.keyCode&&(this.group_selected.getChildAt(this.curSelect).visible=!1,this.curSelect=0==this.curSelect?1:0,this.group_selected.getChildAt(this.curSelect).visible=!0),this.canRigLef&&39==t.keyCode&&(this.group_selected.getChildAt(this.curSelect).visible=!1,this.curSelect=1==this.curSelect?0:1,this.group_selected.getChildAt(this.curSelect).visible=!0),this.canRigLef&&13==t.keyCode))switch(this.curSelect){case 0:this.curSelect=1,this.mbuttonLeaveRoom(),this.removePCkey();break;case 1:this.canStartGame&&(this.StartGame(),this.curSelect=1,this.removePCkey())}},e.prototype.KeyBoardMethodRuntime=function(){var t=this;egret.ExternalInterface.addCallback("sendToJS",function(i){if(0==e.joinFlag||1==e.joinFlag)"left"==i||"right"==i||"down"==i||"up"==i?(t.group_selected.getChildAt(0).visible=!0,t.canRigLef=!0):t.canRigLef&&"OK"==i&&(t.mbuttonLeaveRoom(),PcKeyBoardHelper.instance.removeListener(t));else if((2==e.joinFlag||3==e.joinFlag)&&(("left"==i||"right"==i||"down"==i||"up"==i)&&(t.group_selected.getChildAt(t.curSelect).visible=!0,t.canRigLef=!0),t.canRigLef&&"left"==i&&(t.group_selected.getChildAt(t.curSelect).visible=!1,t.curSelect=0==t.curSelect?1:0,t.group_selected.getChildAt(t.curSelect).visible=!0),t.canRigLef&&"right"==i&&(t.group_selected.getChildAt(t.curSelect).visible=!1,t.curSelect=1==t.curSelect?0:1,t.group_selected.getChildAt(t.curSelect).visible=!0),t.canRigLef&&"OK"==i))switch(t.curSelect){case 0:t.curSelect=1,t.mbuttonLeaveRoom();break;case 1:t.canStartGame&&(t.wenxintishi.visible=!1,t.StartGame(),t.curSelect=1)}})},e.prototype.removePCkey=function(){PcKeyBoardHelper.instance.removeListener(this)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.anchorOffsetX=this.width/2,this.x=this.stage.stageWidth/2;for(var i=GameData._playerList.length,s=0;i>s;s++)this.delPlayerList(GameData._playerList[0].id);switch(mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_GETROOMDETAIL_RSP,this.getroomDetails,this),e.joinFlag){case 0:this.joinRandRoom();break;case 1:var n={name:"paiwei",score:"score"};this.joinRoomWithPro(n);break;case 2:this.createRoom();break;case 3:GameData.roomID&&mvs.MsEngine.getInstance.getRoomDetail(GameData.roomID);break;case 4:this.joinWithRoomID(GameData.roomID)}this.btnLeaveX=this.btn_leave.x,this.initView(),this.btn_leave.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonLeaveRoom,this)},e.prototype.initView=function(){var t=this;this.player1LoadingMask.width=0,this.player2LoadingMask.width=0,this.player1Loading.mask=this.player1LoadingMask,this.player2Loading.mask=this.player2LoadingMask,this.pipeiIng_img.width=this.playerbg1_group.width,this.pipeiIng_img.height=this.playerbg1_group.height,this.StageH=this.stage.stageHeight,this.StageW=this.stage.stageWidth,this.height=this.StageH,this.vX=this.v.x,this.sX=this.s.x,this.v.x=0-this.width,this.s.x=this.width+this.s.width,this.showBtn(),this.addMsResponseListen(),this.strTXT=this.txt.text;var e=0;this.set=setInterval(function(){t.txt.text=t.strTXT.substring(0,e),e++,4==e&&(e=0)},350)},e.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINROOM_RSP,this.joinRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINROOM_NTFY,this.joinRoomNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOVER_NTFY,this.joinOverNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOVER_RSP,this.joinOverResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOPEN_RSP,this.joinOpenResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_JOINOPEN_NTFY,this.joinOpenNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_NTFY,this.leaveRoomNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_CREATEROOM_RSP,this.createRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_KICKPLAYER_RSP,this.kickPlayerResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_KICKPLAYER_NTFY,this.kickPlayerNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_RSP,this.setRoomPropertyResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_NTFY,this.setRoomPropertynotify,this)
},e.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINROOM_RSP,this.joinRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINROOM_NTFY,this.joinRoomNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOVER_NTFY,this.joinOverNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOVER_RSP,this.joinOverResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOPEN_RSP,this.joinOpenResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_JOINOPEN_NTFY,this.joinOpenNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_NTFY,this.leaveRoomNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_CREATEROOM_RSP,this.createRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_KICKPLAYER_RSP,this.kickPlayerResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_KICKPLAYER_NTFY,this.kickPlayerNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_NETWORKSTATE_NTFY,this.networkStateNotify,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_RSP,this.setRoomPropertyResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SETROOMPROPERTY_NTFY,this.setRoomPropertynotify,this)},e.prototype.getroomDetails=function(t){console.log(t.data.owner),GameData.gameUser.id==t.data.owner?GameData.isRoomOwner=!0:GameData.isRoomOwner=!1;for(var e=0;e<t.data.userInfos.length;e++){var i=JSON.parse(t.data.userInfos[e].userProfile);2==t.data.userInfos.length&&2!=GameData._playerList.length?t.data.userInfos[e].userID==GameData.gameUser.id?this.addPlayerList(t.data.userInfos[e].userID,i.name,i.avatar,1,GameData.isRoomOwner):this.addPlayerList(t.data.userInfos[e].userID,i.name,i.avatar,2,GameData.isRoomOwner):1==t.data.userInfos.length&&1!=GameData._playerList.length&&this.addPlayerList(t.data.userInfos[e].userID,i.name,i.avatar,1,GameData.isRoomOwner)}this.playAgain()},e.prototype.playAgain=function(){if(this.isOnePlayAgain){2==GameData._playerList.length?this.num++:1==GameData._playerList.length&&(this.num=0),this._isInRoom=!0,console.log("开始擦除用户信息{{{{{{{{{}}}}}}}}}"),GameData.isRoomOwner&&this.createQRCode();for(var t=0;t<GameData._playerList.length;t++)this.showPlayer(GameData._playerList[t]),console.log(GameData._playerList[t]);this.txtGroup.visible=!1,this.btn_start.visible=!0,this.wenxintishi.visible=!0,this.checkStart(),this.isOnePlayAgain=!1}},e.prototype.joinRandRoom=function(){GameData.isCreateRoom=!1;var t=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar}),e=mvs.MsEngine.getInstance.joinRandomRoom(GameData.maxPlayerNum,t);-8==e&&mvs.MsEngine.getInstance.leaveRoom("")},e.prototype.createRoom=function(){GameData.isCreateRoom=!0;var t=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.createRoom(GameData.createRoomInfo,t)},e.prototype.joinWithRoomID=function(t){var e=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar});mvs.MsEngine.getInstance.joinRoom(t,e)},e.prototype.joinRoomWithPro=function(t){GameData.isCreateRoom=!1;var e=JSON.stringify({name:GameData.gameUser.name,avatar:GameData.gameUser.avatar}),i=new MsMatchInfo(GameData.maxPlayerNum,0,0,t),s=mvs.MsEngine.getInstance.joinRoomWithProperties(i,e);-8==s&&mvs.MsEngine.getInstance.leaveRoom("")},e.prototype.addPlayerList=function(t,e,i,s,n){void 0===n&&(n=!1);var r=new GameUser;return r.id=t,r.name=e,r.avatar=i,r.tableID=s,r.isOwner=n,GameData._playerList.push(r),this.showPlayer(r),r},e.prototype.delPlayerList=function(t){for(var e=new GameUser,i=0;i<GameData._playerList.length;i++)GameData._playerList[i].id==t&&(e.id=GameData._playerList[i].id,e.avatar=GameData._playerList[i].avatar,e.name=GameData._playerList[i].name,e.tableID=GameData._playerList[i].tableID,GameData._playerList.splice(i,1),this.wipePlayer(e))},e.prototype.showPlayer=function(t){console.log(e.joinFlag);var i=t.tableID;t.id==GameData.gameUser.id&&(this.player2_name.text=GameData.gameUser.name,this.LoadeAvatar(t.avatar,this.playerbg2_group),GameData.isRoomOwner&&4==e.joinFlag&&(this.btn_start.visible=!0,this.btn_leave.x=this.btnLeaveX)),1==i||2==i&&(this.sprite&&(this.saomatip.visible=!1,this.shp.visible=!1,this.sprite.visible=!1),this.pipeiIng_img.texture=RES.getRes("bg2_png"),this.LoadeAvatar(t.avatar,this.playerbg1_group),this.player1_name.text=t.name,this.txtGroup.visible=!1)},e.prototype.wipePlayer=function(t){var e=t.tableID;1==e?(this.pipeiIng_img.texture=RES.getRes("bg1_png"),this.playerbg2_group.getChildByName("touxiang")&&this.playerbg2_group.removeChild(this.playerbg2_group.getChildByName("touxiang"))):2==e&&(this.player1_name.text="",this.pipeiIng_img.texture=RES.getRes("bg1_png"),this.playerbg1_group.getChildByName("touxiang")&&this.playerbg1_group.removeChild(this.playerbg1_group.getChildByName("touxiang")))},e.prototype.wipePlayerLocation=function(t,e){this.num--,this.createQRCode(),this.isOwner=e==GameData.gameUser.id,this.delPlayerList(t);for(var i=0;i<GameData._playerList.length;i++)GameData._playerList[i].isOwner=e==GameData._playerList[i].id,GameData._playerList[i].tableID=i+1},e.prototype.mbuttonLeaveRoom=function(){e.joinFlag=0,clearTimeout(this.ss),this._isInRoom?mvs.MsEngine.getInstance.leaveRoom("累了困了离开一下"):(this.release(),GameSceneView._gameScene.lobby())},e.prototype.btnKickPlayerClick=function(t){var e=0;"btn_kick2"==t.target.name?e=2:"btn_kick3"==t.target.name&&(e=3);var i=this.getUserForTableID(e);return null==i?void console.info("用户不存在"):void mvs.MsEngine.getInstance.kickPlayer(i.id,"我们不能一起好好的玩游戏")},e.prototype.getUserForTableID=function(t){var e=null;return GameData._playerList.forEach(function(i){i.tableID==t&&(e=i)}),e},e.prototype.leaveRoomNotify=function(t){var i=t.data;console.info("玩家离开",i);var s=i.userId;i.owner==GameData.gameUser.id?(this.isOwner=!0,GameData.isRoomOwner=!0):this.isOwner=!1,this.delPlayerList(s),this.canStartGame=!1,0==e.joinFlag||1==e.joinFlag?this.txtGroup.visible=!0:(2==e.joinFlag||3==e.joinFlag||4==e.joinFlag)&&(this.player1_name.text="",this.createQRCode());for(var n=0;n<GameData._playerList.length;n++)i.owner==GameData._playerList[n].id?GameData._playerList[n].isOwner=!0:GameData._playerList[n].isOwner=!1,GameData._playerList[n].tableID=n+1,this.showPlayer(GameData._playerList[n])},e.prototype.leaveRoomResponse=function(t){this.delPlayerList(t.data.userId);var e=t.data;200!==e.status?console.log("退出房间失败！status="+e.status):(this.release(),GameSceneView._gameScene.lobby())},e.prototype.createRoomResponse=function(t){var e=t.data;if(200==e.status){console.log("创建房间成功###############################");var i=1;this.addPlayerList(GameData.gameUser.id,GameData.gameUser.name,GameData.gameUser.avatar,i,this.isOwner),this._roomID=e.roomID,GameData.roomID=e.roomID,this._isInRoom=!0,this.createQRCode(),this.txtGroup.visible=!1,e.owner==GameData.gameUser.id?(this.isOwner=!0,GameData.isRoomOwner=!0):this.isOwner=!1}else console.info("加入房间失败",e)},e.prototype.joinRoomResponse=function(t){var e=t.data,i=this;if(200==e.status){if(GameData.gameUser.ownerId=e.owner,e.roomInfo.ownerId==GameData.gameUser.id){this.isOwner=!0,GameData.isRoomOwner=!0;var s=setTimeout(function(){0==i.num&&mvs.MsEngine.getInstance.joinOver("joinOver")},4500);this.ss=setTimeout(function(){0==i.num&&(i.GameAI(),clearTimeout(s))},5e3)}else this.isOwner=!1;this._roomID=e.roomInfo.roomID,GameData.roomID=e.roomInfo.roomID,this._isInRoom=!0,GameData.gameUser.isOwner=!1;var n=1;this.addPlayerList(GameData.gameUser.id,GameData.gameUser.name,GameData.gameUser.avatar,n,this.isOwner);for(var r=e.userList,o=0;o<r.length;o++)n++,this.otherJoinShowInfo(r[o].userId,n,r[o].userProfile,e.roomInfo.ownerId==r[o].userId);this.checkStart()}else console.info("加入房间失败",e)},e.prototype.checkStart=function(){var t=this;console.info("房间人数："+GameData._playerList.length),GameData._playerList.length==GameData.maxPlayerNum?(console.log(GameData.isRoomOwner),1==GameData.isRoomOwner&&(this.sprite?(this.canStartGame=!0,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.StartGame(),t.btn_start.enabled=!1,t.wenxintishi.visible=!1},this)):(this.canStartGame=!0,this.StartGame()))):this.canStartGame=!1},e.prototype.otherJoinShowInfo=function(t,e,i,s){if(void 0===s&&(s=!1),i&&""!==i){var n="",r="",o=JSON.parse(i);o.name&&(n=o.name),o.avatar&&(r=o.avatar),this.addPlayerList(t,n,r,e,s)}},e.prototype.joinRoomNotify=function(t){this.num++,clearTimeout(this.ss);var e=t.data,i=(e.userId,GameData._playerList.length+1);this.otherJoinShowInfo(e.userId,i,e.userProfile,e.userId==e.owner),this.checkStart()},e.prototype.notifyGameStart=function(){this.btn_leave.visible=!1,e.canClick=!1,this.group_selected.visible=!1,this.btn_leave.enabled=!1,1==this.isOwner;var t=[];GameData._playerList.forEach(function(e){t.push({id:e.id,name:e.name,avatar:e.avatar})});var i={action:GameData.gameStartEvent,userIds:t},s=mvs.MsEngine.getInstance.sendEvent(JSON.stringify(i));return 0!==s.result?console.log("发送游戏开始通知失败，错误码"+s.result):(GameData.events[s.sequence]=i,void console.log("发起游戏开始的通知，等待回复"))},e.prototype.StartGame=function(){this.btn_start.visible=!1,this.group_selected.visible=!1,GameData._playerList.length>=GameData.maxPlayerNum?(GameData.playerUserIds=GameData._playerList,console.log("停止加入房间"),mvs.MsEngine.getInstance.joinOver("joinOver")):console.log("人不够，或者还有人没有准备！")},e.prototype.sendEventResponse=function(t){var e=t.data;if(200!==e.status)return console.log("事件发送失败,status:"+status);var i=GameData.events[e.sequence];i&&i.action===GameData.gameStartEvent&&(delete GameData.events[e.sequence],this.release(),this.judgeGameMode(),GameSceneView._gameScene.play(),PcKeyBoardHelper.instance.removeListener(this))},e.prototype.sendEventNotify=function(t){var e=t.data;e&&e.cpProto&&e.cpProto.indexOf(GameData.gameStartEvent)>=0&&(GameData.playerUserIds=GameData._playerList,this.release(),PcKeyBoardHelper.instance.removeListener(this),this.judgeGameMode(),GameSceneView._gameScene.play())},e.prototype.judgeGameMode=function(){switch(e.joinFlag){case 0:App.CurrGameIsAi?App.curGameMode=1:App.curGameMode=2;break;case 1:App.curGameMode=3;break;case 2:App.curGameMode=4}},e.prototype.joinOverResponse=function(t){var i=t.data;if(200===i.status){if(this.canStartGame&&1==this.num)return PcKeyBoardHelper.instance.removeListener(this),e.canClick=!1,this.group_selected.visible=!1,this.btn_leave.visible=!1,this.loadGameSource(),void(GameData.playerUserIds=GameData._playerList)}else console.log("关闭房间失败，回调通知错误码：",i.status);Toast.show(" 设置不允许房间加人 "+(200==i.status?"success":"fail"))},e.prototype.joinOverNotify=function(t){this.btn_leave.visible=!1,this.loadGameSource();var e=t.data;console.log("userID:"+e.userID+" 关闭房间："+e.roomID+" cpProto:"+e.cpProto),Toast.show(e.userID+" 设置了不允许房间加人")},e.prototype.joinOpenResponse=function(t){var e=t.data;Toast.show(" 设置允许房间加人 "+(200==e.status?"success":"fail"))},e.prototype.joinOpenNotify=function(t){var e=t.data;Toast.show(e.userID+" 设置了允许房间加人")},e.prototype.cancelStart=function(t,e){this.canStartGame=!1},e.prototype.kickPlayerResponse=function(t){var e=t.data;this.wipePlayerLocation(e.userID,e.owner)},e.prototype.kickPlayerNotify=function(t){var e=t.data;console.info("玩家离开",e),e.userID==GameData.gameUser.id?(this.release(),GameSceneView._gameScene.lobby()):this.wipePlayerLocation(e.userID,e.owner)},e.prototype.networkStateNotify=function(t){var i=t.data,s=i.userID;this.canStartGame&&0!==e.joinFlag&&1!==e.joinFlag?(i.state=1)?(console.info("玩家断开:"+s),mvs.MsEngine.getInstance.kickPlayer(s,"玩家断线踢掉")):2==i.state?console.info("玩家正在从新连接..."+s):(console.info("玩家离开"+s),this.wipePlayerLocation(i.userID,i.owner)):(0===e.joinFlag||1===e.joinFlag)&&(GameData.isRoomOwner=!0)},e.prototype.setRoomPropertynotify=function(t){var e=t.data;console.log("roomProperty = "+e.roomProperty),e.roomProperty===GameData.roomPropertyType.mapB?GameData.roomPropertyValue=GameData.roomPropertyType.mapB:GameData.roomPropertyValue=GameData.roomPropertyType.mapA},e.prototype.setRoomPropertyResponse=function(t){console.log("roomProperty = "+t.data.roomProperty)},e.prototype.CreateVsImg=function(){var t=this;clearInterval(this.set),egret.Tween.get(this.shandian).to({alpha:1},1e3),egret.Tween.get(this.v).to({x:this.vX},1e3,egret.Ease.quartOut),egret.Tween.get(this.s).to({x:this.sX},1e3,egret.Ease.quartOut).wait(300).call(function(){GameData.isRoomOwner?t.notifyGameStart():App.CurrGameIsAi&&GameSceneView._gameScene.play()})},e.prototype.loadGameSource=function(){var t=this;egret.Tween.get(this.player1LoadingMask).to({width:this.player1Loading.width},1e3),egret.Tween.get(this.player2LoadingMask).to({width:this.player1Loading.width},1e3).call(function(){t.CreateVsImg()});var e=0;setInterval(function(){100>e&&(e+=10,t.player2loadingtxt.text=e.toString()+"%",t.player1loadingtxt.text=e.toString()+"%")},100)},e.prototype.LoadeAvatar=function(t,e){var i=new egret.ImageLoader;i.crossOrigin="anonymous",i.load(t),i.once(egret.Event.COMPLETE,function(t){if(t.currentTarget.data){var i=new egret.Texture;i.bitmapData=t.currentTarget.data;var s=new egret.Bitmap(i);s.width=s.height=100,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,e.addChild(s),s.name="touxiang",s.x=e.width/2,s.y=e.height/2}},this)},e.prototype.createQRCode=function(){this.shp=new egret.Shape,this.shp.graphics.beginFill(16777215,1),this.shp.graphics.drawRect(0,0,this.playerbg1_group.height/4*3,this.playerbg1_group.height/4*3),this.shp.anchorOffsetX=this.shp.width/2,this.shp.anchorOffsetY=this.shp.height/2,this.shp.graphics.endFill(),this.shp.x=this.qrcodebg.x,this.shp.y=this.playerbg1_group.height/2-20,this.playerbg1_group.addChild(this.shp);window.location.host;this.sprite=qr.QRCode.create("http://106.12.208.78/web/181205162618/?roomid="+GameData.roomID,50,this.shp.width,this.shp.height),this.sprite.anchorOffsetX=this.sprite.width/2,this.sprite.anchorOffsetY=this.sprite.height/2,this.playerbg1_group.addChild(this.sprite),this.sprite.x=this.shp.x,this.sprite.y=this.shp.y,this.saomatip.y=this.shp.y+this.shp.height/2,this.saomatip.visible=!0},e.prototype.GameAI=function(){App.CurrGameIsAi=!0,e.canClick=!1,this.btn_leave.visible=!1,1==App.CurrGameIsAi&&this.loadGameSource(),console.log("匹配5s");var t=new GameUser;t.id=12138,t.name="游客12138",t.avatar="resource/assets/egret_icon.png",t.tableID=2,t.curAvatarType=1,t.isOwner=!1,GameData._playerList.push(t),this.showPlayer(t)},e}(eui.Component);match.joinFlag=0,match.canClick=!0,__reflect(match.prototype,"match",["eui.UIComponent","egret.DisplayObject"]);var mvs;!function(t){var e=function(){function e(){this._engine=null,this._response=null,this._http=null,this._httpCallback=null,this._engine=new MatchvsEngine,this._httpCallback=new MatchvsNetWorkCallBack,this._http=new MatchvsHttp(this._httpCallback)}return Object.defineProperty(e,"getInstance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.HttpCallCBack=function(t){console.log(t,"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$")},e.prototype.init=function(e,i,s){this._response=t.MsResponse.getInstance.getResponse();var n=this._engine.init(t.MsResponse.getInstance.getResponse(),e,i,s);return 0!==n?(console.info("[MsEngine init failed] resCode:",n),n):(console.info("[MsEngine init seccess] resCode:",n),n)},e.prototype.HttpPost=function(t,e){this._http.post(t,e)},e.prototype.HttpGet=function(t){this._http.get(t)},e.prototype.setRegisterHost=function(t){var e=this._engine.setRegisterHost(t);return e},e.prototype.disConnect=function(t){this._engine.disConnect(t)},e.prototype.premiseInit=function(e,i){this._response=t.MsResponse.getInstance.getResponse();var s=this._engine.premiseInit(t.MsResponse.getInstance.getResponse(),e,i);return 0!==s?(console.info("[MsEngine premiseInit failed] resCode:",s),s):(console.info("[MsEngine premiseInit seccess] resCode:",s),s)},e.prototype.login=function(t,e,i,s,n){var r=this._engine.login(t,e,i,1,s,n,"eglejjddg",0);return console.info("[MsEngine login] resCode:",r),r},e.prototype.registerUser=function(){var t=this._engine.registerUser();return 0!==t?(console.error("[MsEngine registerUser failed] resCode:",t),t):(console.info("[MsEngine registerUser seccess] resCode:",t),t)},e.prototype.joinRandomRoom=function(t,e){var i=this._engine.joinRandomRoom(t,e);return console.info("[MsEngine joinRandomRoom ] resCode:",i),i},e.prototype.joinRoomWithProperties=function(t,e){var i=this._engine.joinRoomWithProperties(t,e);return console.info("[MsEngine joinRandomRoom ] resCode:",i),i},e.prototype.joinRoom=function(t,e){var i=this._engine.joinRoom(t,e);return i},e.prototype.createRoom=function(t,e){var i=this._engine.createRoom(t,e);return console.info("[MsEngine createRoom ] resCode:",i,JSON.stringify(t),e),i},e.prototype.joinOver=function(t){var e=this._engine.joinOver(t);return console.info("[MsEngine joinOver ] resCode:",e),e},e.prototype.joinOpen=function(t){var e=this._engine.joinOpen(t);return console.info("[MsEngine joinOpen ] resCode:",e),e},e.prototype.leaveRoom=function(t){var e=this._engine.leaveRoom(t);return console.info("[MsEngine leaveRoom ] resCode:",e),e},e.prototype.sendEvent=function(t){var e=this._engine.sendEvent(t);return e},e.prototype.sendEventEx=function(t,e,i,s){var n=this._engine.sendEventEx(t,e,i,s);return n},e.prototype.sendFrameEvent=function(t){var e=this._engine.sendFrameEvent(t);return console.info("[MsEngine sendFrameEvent ] resCode:",e),e},e.prototype.setFrameSync=function(t){var e=this._engine.setFrameSync(t);return console.info("[MsEngine setFrameSync ] resCode:",e),e},e.prototype.logOut=function(){var t=this._engine.logout("退出登录");return console.info("[MsEngine setFrameSync ] resCode:",t),t},e.prototype.kickPlayer=function(t,e){var i=this._engine.kickPlayer(t,e);return console.info("[MsEngine kickPlayer ] resCode:",i),i},e.prototype.getRoomDetail=function(t){var e=this._engine.getRoomDetail(t);return console.info("[MsEngine getRoomDetail ] resCode:",e),e},e.prototype.getRoomList=function(t){var e=this._engine.getRoomList(t);return console.info("[MsEngine getRoomList ] resCode:",e),e},e.prototype.getRoomListEx=function(t){var e=this._engine.getRoomListEx(t);return console.info("[MsEngine getRoomListEx ] resCode:",e),e},e.prototype.setRoomProperty=function(t,e){var i=this._engine.setRoomProperty(t,e);return console.info("[MsEngine setRoomProperty ] resCode:",i),i},e.prototype.reconnect=function(){var t=this._engine.reconnect();return console.info("[MsEngine reconnect ]",t),t},e}();e._instance=null,t.MsEngine=e,__reflect(e.prototype,"mvs.MsEngine")}(mvs||(mvs={}));var mvs;!function(t){var e=function(){function t(){}return t}();e.EVENT_INIT_RSP="MATCHVS_INIT_EVENT",e.EVENT_REGISTERUSER_RSP="MATCHVS_REGISTERUSER_EVENT",e.EVENT_LOGIN_RSP="MATCHVS_LOGIN_EVENT",e.EVENT_JOINROOM_RSP="MATCHVS_JOINROOM_EVENT",e.EVENT_JOINROOM_NTFY="MATCHVS_JOINROOM_NOTIFY_EVENT",e.EVENT_CREATEROOM_RSP="MATCHVS_CREATEROOM_RSP_EVENT",e.EVENT_SENDEVENT_RSP="MATCHVS_SENDEVENT_RSP_EVENT",e.EVENT_SENDEVENT_NTFY="MATCHVS_SENDEVENT_NOTIFY_EVENT",e.EVENT_SENDEVENT_CHUANG="MATCHVS_SENDEVENT_RSP_EVENT_chuang",e.EVENT_GAMESERVER_NTFY="MATCHVS_GAMESERVER_NOTIFY_EVENT",e.EVENT_LEAVEROOM_RSP="MATCHVS_LEAVEROOM_RSP_EVENT",e.EVENT_LEAVEROOM_NTFY="MATCHVS_LEAVEROOM_NTFY_EVENT",e.EVENT_JOINOVER_RSP="MATCHVS_JOINOVER_RSP_EVENT",e.EVENT_JOINOVER_NTFY="MATCHVS_LEAVEROOM_EVENT",e.EVENT_JOINOPEN_RSP="MATCHVS_JOINOPEN_RSP_EVENT",e.EVENT_JOINOPEN_NTFY="MATCHVS_JOINOPEN_NTFY_EVENT",e.EVENT_NETWORKSTATE_NTFY="MATCHVS_NETWORKSTATE_NTFY",e.EVENT_SENDFRAME_RSP="MATCHVS_SENDFRAME_RSP_EVENT",e.EVENT_SETFRAMESYNC_RSP="MATCHVS_SETFRAMESYNC_RSP_EVENT",e.EVENT_FRAMEUPDATE="MATCHVS_FRAMEUPDATE_EVENT",e.EVENT_ERROR_RSP="MATCHVS_ERROR_RSP_EVENT",e.EVENT_LOGOUT_RSP="MATCHVS_LOGOUT_RSP_EVENT",e.EVENT_SETROOMPROPERTY_RSP="MATCHVS_SETROOMPROPERTY_RSP_EVENT",e.EVENT_SETROOMPROPERTY_NTFY="MATCHVS_SETROOMPROPERTY_NTFY_EVENT",e.EVENT_KICKPLAYER_RSP="MATCHVS_KICKPLAYER_RSP_EVENT",e.EVENT_KICKPLAYER_NTFY="MATCHVS_KICKPLAYER_NTFY_EVENT",e.EVENT_GETROOMLIST_RSP="MATCHVS_GETROOMLIST_RSP_EVENT",e.EVENT_GETROOMLIST_EX_RSP="MATCHVS_GETROOMLIST_EX_RSP_EVENT",e.EVENT_GETROOMDETAIL_RSP="MATCHVS_GETROOMDETAIL_RSP_EVENT",e.EVENT_RECONNECT_RSP="MATCHVS_RECONNECT_RSP_EVENT",t.MsEvent=e,__reflect(e.prototype,"mvs.MsEvent")}(mvs||(mvs={}));var mvs;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.reframe=[],t.startTime=0,t.endTime=0,t.frist=0,t.re100=0,t.re70=0,t.re200=0,t.re60=0,t.re40=0,t._response=null,t.registResponseCall(),t}return __extends(i,e),Object.defineProperty(i,"getInstance",{get:function(){return null==i._instance&&(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.release=function(){i._instance._response=null,i._instance=null},i.prototype.getResponse=function(){return null==this._response&&this.registResponseCall(),this._response},i.prototype.registResponseCall=function(){this._response=new MatchvsResponse,this._response.initResponse=this.initResponse.bind(this),this._response.registerUserResponse=this.registerUserResponse.bind(this),this._response.loginResponse=this.loginResponse.bind(this),this._response.joinRoomResponse=this.joinRoomResponse.bind(this),this._response.joinRoomNotify=this.joinRoomNotify.bind(this),this._response.createRoomResponse=this.createRoomResponse.bind(this),this._response.sendEventResponse=this.sendEventResponse.bind(this),this._response.sendEventNotify=this.sendEventNotify.bind(this),this._response.gameServerNotify=this.gameServerNotify.bind(this),this._response.joinOverResponse=this.joinOverResponse.bind(this),this._response.joinOverNotify=this.joinOverNotify.bind(this),this._response.leaveRoomResponse=this.leaveRoomResponse.bind(this),this._response.leaveRoomNotify=this.leaveRoomNotify.bind(this),this._response.networkStateNotify=this.networkStateNotify.bind(this),this._response.setFrameSyncResponse=this.setFrameSyncResponse.bind(this),this._response.frameUpdate=this.frameUpdate.bind(this),this._response.errorResponse=this.errorResponse.bind(this),this._response.logoutResponse=this.logOutResponse.bind(this),this._response.joinOpenResponse=this.joinOpenResponse.bind(this),this._response.joinOpenNotify=this.joinOpenNotify.bind(this),this._response.kickPlayerNotify=this.kickPlayerNotify.bind(this),this._response.kickPlayerResponse=this.kickPlayerResponse.bind(this),this._response.setRoomPropertyNotify=this.setRoomPropertyNotify.bind(this),this._response.setRoomPropertyResponse=this.setRoomPropertyResponse.bind(this),this._response.getRoomDetailResponse=this.getRoomDetailResponse.bind(this),this._response.getRoomListExResponse=this.getRoomListExResponse.bind(this),this._response.getRoomListResponse=this.getRoomListResponse.bind(this),this._response.reconnectResponse=this.reconnectResponse.bind(this)},i.prototype.initResponse=function(e){console.info("initResponse status：",e),this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_INIT_RSP,!1,!1,{status:e}))},i.prototype.registerUserResponse=function(e){console.info("registerUserResponse userInfo ",JSON.stringify(e)),this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_REGISTERUSER_RSP,!1,!1,e))},i.prototype.loginResponse=function(e){console.info("[loginResponse] "+JSON.stringify(e)),this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_LOGIN_RSP,!1,!1,e))},i.prototype.joinRoomResponse=function(e,i,s){if(200==e){var n={status:e,userList:i,roomInfo:s};return void this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_JOINROOM_RSP,!1,!1,n))}409==e&&GameSceneView._gameScene.lobby(),console.error("[joinRoomResponse error:]",e)},i.prototype.joinRoomNotify=function(e){console.info("[joinRoomNotify] "+e.userProfile);var i={userId:e.userId,userProfile:e.userProfile};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_JOINROOM_NTFY,!1,!1,i))},i.prototype.createRoomResponse=function(e){console.info("[sendEventResponse]"+JSON.stringify(e));var i={status:e.status,roomID:e.roomID,owner:e.owner};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_CREATEROOM_RSP,!1,!1,i))},i.prototype.sendEventResponse=function(e){var i={status:e.status,sequence:e.sequence};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_SENDEVENT_RSP,!1,!1,i))},i.prototype.sendEventNotify=function(e){var i={srcUserId:e.srcUserId,cpProto:e.cpProto};console.log("+++++++++++++++++++++++++发送消息派发+++++++++++++++++++++++++++++++++"),this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_SENDEVENT_NTFY,!1,!1,i))},i.prototype.gameServerNotify=function(e){console.info("[gameServerNotify] ");var i={srcUserId:e.srcUserId,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_GAMESERVER_NTFY,!1,!1,i))},i.prototype.joinOverResponse=function(e){console.info("[joinOverResponse] "+JSON.stringify(e));var i={status:e.status,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_JOINOVER_RSP,!1,!1,i))},i.prototype.joinOverNotify=function(e){console.info("[joinOverNotify] ");var i={roomID:e.roomID,userID:e.srcUserID,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_JOINOVER_NTFY,!1,!1,i))},i.prototype.leaveRoomResponse=function(e){console.info("[leaveRoomResponse] status: "+e.status);var i={roomID:e.roomID,status:e.status,userId:e.userId,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_LEAVEROOM_RSP,!1,!1,i))},i.prototype.leaveRoomNotify=function(e){console.info("[leaveRoomNotify] "+e.userId);var i={roomID:e.roomID,userId:e.userId,owner:e.owner,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_LEAVEROOM_NTFY,!1,!1,i))},i.prototype.networkStateNotify=function(e){console.info("[networkStateNotify] state: "+e.state);var i={roomID:e.roomID,userID:e.userID,owner:e.owner,state:e.state};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_NETWORKSTATE_NTFY,!1,!1,i))},i.prototype.setFrameSyncResponse=function(e){var i={mStatus:e.mStatus};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_SETFRAMESYNC_RSP,!1,!1,i))},i.prototype.frameUpdate=function(e){var i={frameIndex:e.frameIndex,frameItems:e.frameItems,frameWaitCount:e.frameWaitCount};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_FRAMEUPDATE,!1,!1,i))},i.prototype.errorResponse=function(e,i){console.info("[setFrameSyncResponse] errCode:"+e+" errMsg:"+i);var s={errCode:e,errMsg:i};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_ERROR_RSP,!1,!1,s))},i.prototype.logOutResponse=function(e){console.info("[logOutResponse] status:",e);var i={status:e};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_LOGOUT_RSP,!1,!1,i))},i.prototype.joinOpenResponse=function(e){console.info("[joinOpenResponse] info:",e.status);var i={status:e.status,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_JOINOPEN_RSP,!1,!1,i))},i.prototype.joinOpenNotify=function(e){console.info("[joinOpenResponse] info:");var i={roomID:e.roomID,userID:e.userID,cpProto:e.cpProto};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_JOINOPEN_NTFY,!1,!1,i))},i.prototype.kickPlayerNotify=function(e){console.info("[kickPlayerNotify] info:");var i={cpProto:e.cpProto,owner:e.owner,srcUserId:e.srcUserId,userID:e.userID};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_KICKPLAYER_NTFY,!1,!1,i))},i.prototype.kickPlayerResponse=function(e){console.info("[kickPlayerResponse] info:"+e.status);var i={owner:e.owner,userID:e.userID,status:e.status};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_KICKPLAYER_RSP,!1,!1,i))},i.prototype.setRoomPropertyNotify=function(e){console.info("[setRoomPropertyNotify] info:");var i={roomID:e.roomID,userID:e.userID,roomProperty:e.roomProperty};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_SETROOMPROPERTY_NTFY,!1,!1,i))},i.prototype.setRoomPropertyResponse=function(e){console.info("[setRoomPropertyResponse] info:",e.status);var i={roomID:e.roomID,userID:e.userID,roomProperty:e.roomProperty,status:e.status};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_SETROOMPROPERTY_RSP,!1,!1,i))},i.prototype.getRoomDetailResponse=function(e){console.info("[getRoomDetailResponse] info:",e.status);var i={canWatch:e.canWatch,createFlag:e.createFlag,maxPlayer:e.maxPlayer,mode:e.mode,owner:e.owner,roomProperty:e.roomProperty,state:e.state,status:e.status,userInfos:e.userInfos};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_GETROOMDETAIL_RSP,!1,!1,i))},i.prototype.getRoomListExResponse=function(e){console.info("[getRoomListExResponse] info:",e.status);var i={roomAttrs:e.roomAttrs,status:e.status,total:e.total};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_GETROOMLIST_EX_RSP,!1,!1,i))},i.prototype.getRoomListResponse=function(e,i){console.info("[getRoomListResponse] info:",e);var s={status:e,roomInfos:i};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_GETROOMLIST_RSP,!1,!1,s))},i.prototype.reconnectResponse=function(e,i,s){console.info("[reconnectResponse] info:",e);var n={status:e,roomUserInfoList:i,roomInfo:s};this.dispatchEvent(new egret.Event(t.MsEvent.EVENT_RECONNECT_RSP,!1,!1,n))},i.prototype.frameUpdatequality=function(){var t=(new Date).valueOf();if(0==this.startTime?(this.startTime=t,this.frist=t):this.endTime=t,this.endTime-this.startTime>=5e5){for(var e=0,i=0;i<this.reframe.length;i++)e+=this.reframe[i];console.log("收到总次数：",this.reframe.length),console.log("发送间隔时间：",40),console.log("设置的帧率：",GameData.frameRate),console.log("总耗时：",this.endTime-this.startTime),console.log("预计收到间隔时间：",1e3/GameData.frameRate),console.log("平均收到间隔时间：",e/this.reframe.length),console.log("正常次数：",this.re60),console.log("小于 40 次数：",this.re40),console.log("60 ~ 100 次数：",this.re70),console.log("100 ~ 200 次数：",this.re100),console.log("大于 200 次数：",this.re200)}else{var s=t-this.frist;console.log("收到帧间隔时间：",s),0!==this.frist&&this.reframe.push(s),s>=40&&60>=s?this.re60++:40>s?this.re40++:s>60&&100>s?this.re70++:s>100&&200>s?this.re100++:s>200&&this.re200++}this.frist=t},i}(egret.EventDispatcher);e._instance=null,t.MsResponse=e,__reflect(e.prototype,"mvs.MsResponse")}(mvs||(mvs={}));var ReconnectUI=function(t){function e(){var e=t.call(this)||this;return e._reconnctTimes=1,e._totalTimes=5,e.addMsResponseListen(),e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),"btn_return"==e&&(this.btn_return=i,this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mbuttonExitRoom,this))},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._timer=new egret.Timer(1e3,5),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this._timer.start()},e.prototype.addMsResponseListen=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_RECONNECT_RSP,this.reconnectResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this)},e.prototype.release=function(){mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_ERROR_RSP,this.errorResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_LEAVEROOM_RSP,this.leaveRoomResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.removeEventListener(mvs.MsEvent.EVENT_RECONNECT_RSP,this.reconnectResponse,this)},e.prototype.mbuttonExitRoom=function(t){GameSceneView._gameScene.login()},e.prototype.timerFunc=function(t){var e=mvs.MsEngine.getInstance.reconnect();
this._reconnctTimes++,this._reconnctTimes>this._totalTimes&&(this._timer.stop(),0===e?(mvs.MsEngine.getInstance.leaveRoom(""),GameSceneView._gameScene.lobby()):(mvs.MsEngine.getInstance.leaveRoom(""),GameSceneView._gameScene.login()),this.release())},e.prototype.reconnectResponse=function(t){var e=t.data,i=e.roomUserInfoList,s=e.roomInfo;this._timer.stop(),e.status&&200===e.status?(GameData.playerUserIds=[],GameData.playerUserIds.push(GameData.gameUser),i.forEach(function(t){if(GameData.gameUser.id!==t.userID){var e={name:"",avatar:""};""!==t.userProfile&&(e=JSON.parse(t.userProfile));var i=new GameUser;i.avatar=e.avatar,i.name=e.name,i.id=t.userID,i.isOwner=t.userID==s.ownerId,GameData.playerUserIds.push(i)}}),GameData.roomPropertyValue=s.roomProperty,GameData.roomID=s.roomID,GameData.isRoomOwner=!1,GameData.playerUserIds.length===GameData.maxPlayerNum&&2===s.state?this.sendReadyEvent():(mvs.MsEngine.getInstance.leaveRoom("leaveRoom"),this.release(),GameSceneView._gameScene.lobby())):(this.release(),GameSceneView._gameScene.lobby())},e.prototype.sendEventResponse=function(t){var e=t.data;if(200===e.status){var i=GameData.events[e.sequence];i&&i.action===GameData.reconnectReadyEvent&&(delete GameData.events[e.sequence],this.release(),GameSceneView._gameScene.play())}else this.release(),mvs.MsEngine.getInstance.leaveRoom("leaveRoom"),GameSceneView._gameScene.lobby()},e.prototype.errorResponse=function(t){this._timer.stop()},e.prototype.mbuttonCancleBtn=function(t){this._timer.stop(),this.release(),mvs.MsEngine.getInstance.leaveRoom("")},e.prototype.leaveRoomResponse=function(t){},e.prototype.sendReadyEvent=function(){var t={action:GameData.reconnectReadyEvent,userID:GameData.gameUser.id},e=mvs.MsEngine.getInstance.sendEvent(JSON.stringify(t));return e&&0===e.result?void(GameData.events[e.sequence]=t):(mvs.MsEngine.getInstance.leaveRoom("leaveRoom"),GameSceneView._gameScene.lobby(),void this.release())},e}(eui.Component);__reflect(ReconnectUI.prototype,"ReconnectUI",["eui.UIComponent","egret.DisplayObject"]);var NewBall=function(t){function e(e){var i=t.call(this)||this;i.radius=17,i.vx=0,i.vy=0,i.idx=0,i.nextX=0,i.nextY=0,i.lastX=0,i.lastY=0,i.name="",i.isJindong=-1,i.moc=.9997,i.degree=0,i.idx=e;var s=e+"s_png";return i.texture=RES.getRes(s),i.width=i.height=38,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i}return __extends(e,t),e.prototype.startRoll=function(){this.vx=this.vx*this.moc,this.vy=this.vy*this.moc,Math.abs(this.vx)<.04&&Math.abs(this.vy)<.04&&(this.moc-=1e-6),Math.abs(this.vx)<.002&&Math.abs(this.vy)<.002&&(this.vx=0,this.vy=0)},e}(egret.Bitmap);__reflect(NewBall.prototype,"NewBall");var PcKeyBoardHelper=function(){function t(){this.isListening=!1,this.list={}}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.add=function(){0==this.isListening&&(this.isListening=!0,document.addEventListener("keydown",t.instance.onKeyDown))},t.prototype.onKeyDown=function(e){var i;for(i in t.instance.list){var s=t.instance.list[i];s.callback.call(s.target,e)}},t.prototype.addListener=function(e,i){var s=egret.getQualifiedClassName(i);if(null==t._instance.list[s]){var n=new KeyVo(s,i,e);t._instance.list[n.name]=n}t._instance.add()},t.prototype.removeListener=function(e){var i=egret.getQualifiedClassName(e);null!=t._instance.list[i]&&delete t._instance.list[i],this.checkCount()},t.prototype.checkCount=function(){for(var e in t._instance.list)return;document.removeEventListener("keydown",t.instance.onKeyDown),this.isListening=!1},t}();__reflect(PcKeyBoardHelper.prototype,"PcKeyBoardHelper");var KeyVo=function(){function t(t,e,i){this.name="",this.name=t,this.target=e,this.callback=i}return t}();__reflect(KeyVo.prototype,"KeyVo");var PromptWord=function(t){function e(){var e=t.call(this)||this;return e._str="",e._time=null,e.skinName="PromptWordUISkin",e}return __extends(e,t),e.prototype.setSour=function(t){this._str!=t&&(this._str=t,this.word.source=t),this.dingshi()},e.prototype.dingshi=function(){var t=this;this._time&&clearTimeout(this._time),this._time=setTimeout(function(){t.removeThis()},this,2300)},e.prototype.removeThis=function(){this._time=null,this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(PromptWord.prototype,"PromptWord");var qr;!function(t){var e=function(){function e(e){this.mode=t.QRMode.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var i=0,s=this.data.length;s>i;i++){var n=[],r=this.data.charCodeAt(i);r>65536?(n[0]=240|(1835008&r)>>>18,n[1]=128|(258048&r)>>>12,n[2]=128|(4032&r)>>>6,n[3]=128|63&r):r>2048?(n[0]=224|(61440&r)>>>12,n[1]=128|(4032&r)>>>6,n[2]=128|63&r):r>128?(n[0]=192|(1984&r)>>>6,n[1]=128|63&r):n[0]=r,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return e.prototype.getLength=function(t){return this.parsedData.length},e.prototype.write=function(t){for(var e=0,i=this.parsedData.length;i>e;e++)t.put(this.parsedData[e],8)},e}();t.QR8bitByte=e,__reflect(e.prototype,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){this.buffer=[],this.length=0}return t.prototype.get=function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},t.prototype.put=function(t,e){for(var i=0;e>i;i++)this.putBit(1==(t>>>e-i-1&1))},t.prototype.getLengthInBits=function(){return this.length},t.prototype.putBit=function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++},t}();t.QRBitBuffer=e,__reflect(e.prototype,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}return e.create=function(i,s,n,r,o){void 0===s&&(s=0),void 0===n&&(n=200),void 0===r&&(r=200),void 0===o&&(o=2);var a={width:n,height:r,correctLevel:t.QRErrorCorrectLevel.H,color:s},h=new t.QRCodeModel(t.QRUtil._getTypeNumber(i,a.correctLevel),a.correctLevel);return h.addData(i),h.make(),e.draw(h,a)},e.draw=function(t,e){var i=new egret.Sprite,e=e,s=t.getModuleCount(),n=Math.floor(e.width/s),r=Math.floor(e.height/s);i.graphics.beginFill(e.color);for(var o=0;s>o;o++)for(var a=0;s>a;a++){var h=t.isDark(o,a);h&&i.graphics.drawRect(a*n,o*r,n,r)}return i.graphics.endFill(),i},e}();t.QRCode=e,__reflect(e.prototype,"qr.QRCode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return e.prototype.addData=function(e){var i=new t.QR8bitByte(e);this.dataList.push(i),this.dataCache=null},e.prototype.isDark=function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},e.prototype.getModuleCount=function(){return this.moduleCount},e.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},e.prototype.makeImpl=function(t,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[s][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,i),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},e.prototype.setupPositionProbePattern=function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||this.moduleCount<=t+i))for(var s=-1;7>=s;s++)-1>=e+s||this.moduleCount<=e+s||(i>=0&&6>=i&&(0==s||6==s)||s>=0&&6>=s&&(0==i||6==i)||i>=2&&4>=i&&s>=2&&4>=s?this.modules[t+i][e+s]=!0:this.modules[t+i][e+s]=!1)},e.prototype.getBestMaskPattern=function(){for(var e=0,i=0,s=0;8>s;s++){this.makeImpl(!0,s);var n=t.QRUtil.getLostPoint(this);(0==s||e>n)&&(e=n,i=s)}return i},e.prototype.createMovieClip=function(t,e,i){var s=t.createEmptyMovieClip(e,i),n=1;this.make();for(var r=0;r<this.modules.length;r++)for(var o=r*n,a=0;a<this.modules[r].length;a++){var h=a*n,l=this.modules[r][a];l&&(s.beginFill(0,100),s.moveTo(h,o),s.lineTo(h+n,o),s.lineTo(h+n,o+n),s.lineTo(h,o+n),s.endFill())}return s},e.prototype.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},e.prototype.setupPositionAdjustPattern=function(){for(var e=t.QRUtil.getPatternPosition(this.typeNumber),i=0;i<e.length;i++)for(var s=0;s<e.length;s++){var n=e[i],r=e[s];if(null==this.modules[n][r])for(var o=-2;2>=o;o++)for(var a=-2;2>=a;a++)-2==o||2==o||-2==a||2==a||0==o&&0==a?this.modules[n+o][r+a]=!0:this.modules[n+o][r+a]=!1}},e.prototype.setupTypeNumber=function(e){for(var i=t.QRUtil.getBCHTypeNumber(this.typeNumber),s=0;18>s;s++){var n=!e&&1==(i>>s&1);this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=n}for(var s=0;18>s;s++){var n=!e&&1==(i>>s&1);this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=n}},e.prototype.setupTypeInfo=function(e,i){for(var s=this.errorCorrectLevel<<3|i,n=t.QRUtil.getBCHTypeInfo(s),r=0;15>r;r++){var o=!e&&1==(n>>r&1);6>r?this.modules[r][8]=o:8>r?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var r=0;15>r;r++){var o=!e&&1==(n>>r&1);8>r?this.modules[8][this.moduleCount-r-1]=o:9>r?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!e},e.prototype.mapData=function(e,i){for(var s=-1,n=this.moduleCount-1,r=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var h=0;2>h;h++)if(null==this.modules[n][a-h]){var l=!1;o<e.length&&(l=1==(e[o]>>>r&1));var c=t.QRUtil.getMask(i,n,a-h);c&&(l=!l),this.modules[n][a-h]=l,r--,-1==r&&(o++,r=7)}if(n+=s,0>n||this.moduleCount<=n){n-=s,s=-s;break}}},e.createData=function(i,s,n){for(var r=t.QRRSBlock.getRSBlocks(i,s),o=new t.QRBitBuffer,a=0;a<n.length;a++){var h=n[a];o.put(h.mode,4),o.put(h.getLength(),t.QRUtil.getLengthInBits(h.mode,i)),h.write(o)}for(var l=0,a=0;a<r.length;a++)l+=r[a].dataCount;if(o.getLengthInBits()>8*l)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*l+")");for(o.getLengthInBits()+4<=8*l&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*l)&&(o.put(e.PAD0,8),!(o.getLengthInBits()>=8*l));)o.put(e.PAD1,8);return e.createBytes(o,r)},e.createBytes=function(e,i){for(var s=0,n=0,r=0,o=new Array(i.length),a=new Array(i.length),h=0;h<i.length;h++){var l=i[h].dataCount,c=i[h].totalCount-l;n=Math.max(n,l),r=Math.max(r,c),o[h]=new Array(l);for(var p=0;p<o[h].length;p++)o[h][p]=255&e.buffer[p+s];s+=l;var u=t.QRUtil.getErrorCorrectPolynomial(c),g=new t.QRPolynomial(o[h],u.getLength()-1),d=g.mod(u);a[h]=new Array(u.getLength()-1);for(var p=0;p<a[h].length;p++){var m=p+d.getLength()-a[h].length;a[h][p]=m>=0?d.get(m):0}}for(var v=0,p=0;p<i.length;p++)v+=i[p].totalCount;for(var f=new Array(v),_=0,p=0;n>p;p++)for(var h=0;h<i.length;h++)p<o[h].length&&(f[_++]=o[h][p]);for(var p=0;r>p;p++)for(var h=0;h<i.length;h++)p<a[h].length&&(f[_++]=a[h][p]);return f},e}();e.PAD0=236,e.PAD1=17,t.QRCodeModel=e,__reflect(e.prototype,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t}();e.L=1,e.M=0,e.Q=3,e.H=2,t.QRErrorCorrectLevel=e,__reflect(e.prototype,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t}();e.PATTERN000=0,e.PATTERN001=1,e.PATTERN010=2,e.PATTERN011=3,e.PATTERN100=4,e.PATTERN101=5,e.PATTERN110=6,e.PATTERN111=7,t.QRMaskPattern=e,__reflect(e.prototype,"qr.QRMaskPattern")}(qr||(qr={}));var DBArmature=function(t){function e(e){var i=t.call(this)||this;return i._displayEvents=[],i._armature=e,i._armatureDisplay=e.display,i.dealClock(i),i.addChild(i._armatureDisplay),i}return __extends(e,t),e.prototype.dealClock=function(t){var e=this,i=t.$onAddToStage.bind(t);t.$onAddToStage=function(t,e){i(t,e)};var s=t.$onRemoveFromStage.bind(t);t.$onRemoveFromStage=function(){s(),e.$removeFromClock()}},e.prototype.addToClock=function(t){this._curClock||(this._curClock=t,this._curClock.add(this._armature))},e.prototype.$removeFromClock=function(){this._curClock&&(this._curClock.remove(this._armature),this._curClock=null)},e.prototype.gotoAndStop=function(t){this._currAction=t,this._armature.animation.gotoAndStopByFrame(t)},e.prototype.gotoAndStopByTime=function(t,e){this._currAction=t,this._armature.animation.gotoAndStopByTime(t,e)},e.prototype.gotoAndStopByProgress=function(t,e){this._currAction=t,this._armature.animation.gotoAndStopByProgress(t,e)},e.prototype.play=function(t,e){return void 0===e&&(e=0),this._currAction=t,this._armature.animation.play(t,e)},Object.defineProperty(e.prototype,"currAction",{get:function(){return this._currAction},enumerable:!0,configurable:!0}),e.prototype.stop=function(){this._armature.animation.stop()},e.prototype.replaceSlot=function(t,e){var i=this._armature.getSlot(t);i&&(i.display=e)},e.prototype.replaceTexture=function(t){this._armature.replaceTexture(t)},e.prototype.replaceSkin=function(t){},Object.defineProperty(e.prototype,"armatureName",{get:function(){return this._armature.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._armature.animation.timeScale},set:function(t){this._armature&&(this._armature.animation.timeScale=t)},enumerable:!0,configurable:!0}),e.prototype.getSlot=function(t){return this._armature.getSlot(t)},e.prototype.getBone=function(t){return this._armature.getBone(t)},e.prototype.once=function(t,e,i){this._armatureDisplay.once(t,e,i)},e.prototype.addDisplayEvent=function(t,e,i){this._armatureDisplay.addEvent(t,e,i),this._displayEvents.push([t,e,i])},e.prototype.removeDisplayEvent=function(t,e,i){this._armatureDisplay.removeEvent(t,e,i)},e.prototype.removeAllDisplayEvent=function(){for(;this._displayEvents.length;){var t=this._displayEvents.pop();this.removeDisplayEvent(t[0],t[1],t[2])}},e.prototype.dispose=function(){this._armature&&(AssetManager.removeCacheArmature(this),this.$removeFromClock(),this.removeAllDisplayEvent(),egret.Tween.removeTweens(this),this._armature.dispose(),this._armature=null,this._armatureDisplay=null)},e}(egret.DisplayObjectContainer);__reflect(DBArmature.prototype,"DBArmature");var qr;!function(t){var e=function(){function t(){}return t}();e.MODE_NUMBER=1,e.MODE_ALPHA_NUM=2,e.MODE_8BIT_BYTE=4,e.MODE_KANJI=8,t.QRMode=e,__reflect(e.prototype,"qr.QRMode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=new Array(t.length-i+e);for(var s=0;s<t.length-i;s++)this.num[s]=t[s+i]}return e.prototype.get=function(t){return this.num[t]},e.prototype.getLength=function(){return this.num.length},e.prototype.multiply=function(i){for(var s=new Array(this.getLength()+i.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<i.getLength();r++)s[n+r]^=t.QRMath.gexp(t.QRMath.glog(this.get(n))+t.QRMath.glog(i.get(r)));return new e(s,0)},e.prototype.mod=function(i){if(this.getLength()-i.getLength()<0)return this;for(var s=t.QRMath.glog(this.get(0))-t.QRMath.glog(i.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<i.getLength();r++)n[r]^=t.QRMath.gexp(t.QRMath.glog(i.get(r))+s);return new e(n,0).mod(i)},e}();t.QRPolynomial=e,__reflect(e.prototype,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(t,e){this.totalCount=t,this.dataCount=e}return t}();e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,i){var s=e.getRsBlockTable(t,i);if(void 0==s)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var n=s.length/3,r=[],o=0;n>o;o++)for(var a=s[3*o+0],h=s[3*o+1],l=s[3*o+2],c=0;a>c;c++)r.push(new e(h,l));return r},e.getRsBlockTable=function(i,s){switch(s){case t.QRErrorCorrectLevel.L:return e.RS_BLOCK_TABLE[4*(i-1)+0];case t.QRErrorCorrectLevel.M:return e.RS_BLOCK_TABLE[4*(i-1)+1];case t.QRErrorCorrectLevel.Q:return e.RS_BLOCK_TABLE[4*(i-1)+2];case t.QRErrorCorrectLevel.H:return e.RS_BLOCK_TABLE[4*(i-1)+3];default:return}},t.QRRSBlock=e,__reflect(e.prototype,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}return e.getBCHTypeInfo=function(t){for(var i=t<<10;e.getBCHDigit(i)-e.getBCHDigit(e.G15)>=0;)i^=e.G15<<e.getBCHDigit(i)-e.getBCHDigit(e.G15);return(t<<10|i)^e.G15_MASK},e.getBCHTypeNumber=function(t){for(var i=t<<12;e.getBCHDigit(i)-e.getBCHDigit(e.G18)>=0;)i^=e.G18<<e.getBCHDigit(i)-e.getBCHDigit(e.G18);return t<<12|i},e.getBCHDigit=function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},e.getPatternPosition=function(t){return e.PATTERN_POSITION_TABLE[t-1]},e.getMask=function(e,i,s){switch(e){case t.QRMaskPattern.PATTERN000:return(i+s)%2==0;case t.QRMaskPattern.PATTERN001:return i%2==0;case t.QRMaskPattern.PATTERN010:return s%3==0;case t.QRMaskPattern.PATTERN011:return(i+s)%3==0;case t.QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2==0;case t.QRMaskPattern.PATTERN101:return i*s%2+i*s%3==0;case t.QRMaskPattern.PATTERN110:return(i*s%2+i*s%3)%2==0;case t.QRMaskPattern.PATTERN111:return(i*s%3+(i+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},e.getErrorCorrectPolynomial=function(e){for(var i=new t.QRPolynomial([1],0),s=0;e>s;s++)i=i.multiply(new t.QRPolynomial([1,t.QRMath.gexp(s)],0));return i},e.getLengthInBits=function(e,i){if(i>=1&&10>i)switch(e){case t.QRMode.MODE_NUMBER:return 10;case t.QRMode.MODE_ALPHA_NUM:return 9;case t.QRMode.MODE_8BIT_BYTE:return 8;case t.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>i)switch(e){case t.QRMode.MODE_NUMBER:return 12;case t.QRMode.MODE_ALPHA_NUM:return 11;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>i))throw new Error("type:"+i);switch(e){case t.QRMode.MODE_NUMBER:return 14;case t.QRMode.MODE_ALPHA_NUM:return 13;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},e.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,s=0;e>s;s++)for(var n=0;e>n;n++){for(var r=0,o=t.isDark(s,n),a=-1;1>=a;a++)if(!(0>s+a||s+a>=e))for(var h=-1;1>=h;h++)0>n+h||n+h>=e||(0!=a||0!=h)&&o==t.isDark(s+a,n+h)&&r++;r>5&&(i+=3+r-5)}for(var s=0;e-1>s;s++)for(var n=0;e-1>n;n++){var l=0;t.isDark(s,n)&&l++,t.isDark(s+1,n)&&l++,t.isDark(s,n+1)&&l++,t.isDark(s+1,n+1)&&l++,(0==l||4==l)&&(i+=3)}for(var s=0;e>s;s++)for(var n=0;e-6>n;n++)t.isDark(s,n)&&!t.isDark(s,n+1)&&t.isDark(s,n+2)&&t.isDark(s,n+3)&&t.isDark(s,n+4)&&!t.isDark(s,n+5)&&t.isDark(s,n+6)&&(i+=40);for(var n=0;e>n;n++)for(var s=0;e-6>s;s++)t.isDark(s,n)&&!t.isDark(s+1,n)&&t.isDark(s+2,n)&&t.isDark(s+3,n)&&t.isDark(s+4,n)&&!t.isDark(s+5,n)&&t.isDark(s+6,n)&&(i+=40);for(var c=0,n=0;e>n;n++)for(var s=0;e>s;s++)t.isDark(s,n)&&c++;var p=Math.abs(100*c/e/e-50)/5;return i+=10*p},e.prototype.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},e._getTypeNumber=function(i,s){for(var n=1,r=e._getUTF8Length(i),o=0,a=e.QRCodeLimitLength.length;a>=o;o++){var h=0;switch(s){case t.QRErrorCorrectLevel.L:h=e.QRCodeLimitLength[o][0];break;case t.QRErrorCorrectLevel.M:h=e.QRCodeLimitLength[o][1];break;case t.QRErrorCorrectLevel.Q:h=e.QRCodeLimitLength[o][2];break;case t.QRErrorCorrectLevel.H:h=e.QRCodeLimitLength[o][3]}if(h>=r)break;n++}if(n>e.QRCodeLimitLength.length)throw new Error("Too long data");return n},e._getUTF8Length=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)},e}();e.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e.G15=1335,e.G18=7973,e.G15_MASK=21522,e.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],t.QRUtil=e,__reflect(e.prototype,"qr.QRUtil")}(qr||(qr={}));var RoleAvatar=function(){function t(t,e,i){if(void 0===i&&(i="dbxiaoren00"),this._armature=AssetManager.getDBArmature(i),null!=this._armature&&(this._headContainer=new egret.Sprite,this._head=new RoleHeadImage(e),this._head.x=.5*-this._head.width,this._head.y=.5*-this._head.height,this._headContainer.addChild(this._head),this._armature.replaceSlot("tou",this._headContainer),(null==t||void 0==t)&&(t=1),1!=t)){var s=this.getDbRes(t),n=this.getAvatarRes(t),r=function(){!this._armature}.bind(this);RES.getRes(n[0])?r():(App.ResourceUtils.createGroup(s,n),App.ResourceUtils.loadGroup(s,function(){AssetManager.loadDBAnimation([s]),r()},function(){},this))}}return Object.defineProperty(t.prototype,"avatarConfig",{get:function(){return RES.getRes("avatar_json")},enumerable:!0,configurable:!0}),t.prototype.getDbRes=function(t){var e=RES.getRes("avatar_json");return e.base[t].res},t.prototype.getAvatarRes=function(t){var e=this.getDbRes(t);return[e+"_ske_json",e+"_tex_json",e+"_tex_png"]},Object.defineProperty(t.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._armature.dispose(),this._armature=null,this._head.dispose(),this._head=null},t}();__reflect(RoleAvatar.prototype,"RoleAvatar");var RoleHeadImage=function(t){function e(e,i,s,n){void 0===i&&(i="tou_png"),void 0===s&&(s=96),void 0===n&&(n=96);var r=t.call(this)||this;return r.userBase64=!1,r.imgUrl=e,r.maskRes=i,r.bitmap=new egret.Bitmap,r.bitmap.width=s,r.bitmap.height=n,r.bitmap.texture=RES.getRes("tou_png"),r.addChild(r.bitmap),r.imgUrl&&r.imgUrl.length?(r.LoadeAvatar(r.imgUrl,r),r):r}return __extends(e,t),e.prototype.setBitmap=function(t){this.bitmap&&t&&(this.bitmap.texture=t,this.maskRes&&(this.maskBitmap=App.DisplayUtils.createBitmap(this.maskRes),this.maskBitmap.width=this.bitmap.width,this.maskBitmap.height=this.bitmap.height,this.addChild(this.maskBitmap),this.bitmap.mask=this.maskBitmap,this.cacheAsBitmap=!0))},e.prototype.LoadeAvatar=function(t,e){var i=new egret.ImageLoader;i.crossOrigin="anonymous",i.load(t),i.once(egret.Event.COMPLETE,function(t){if(t.currentTarget.data){var i=new egret.Texture;i.bitmapData=t.currentTarget.data;var s=new egret.Bitmap(i);e.addChild(s),s.width=96,s.height=96,s.name="touxiang"}},this),this.maskRes&&(this.maskBitmap=App.DisplayUtils.createBitmap(this.maskRes),this.maskBitmap.width=this.bitmap.width,this.maskBitmap.height=this.bitmap.height,this.addChild(this.maskBitmap),this.bitmap.mask=this.maskBitmap,this.cacheAsBitmap=!0)},e.prototype.dispose=function(){this.removeChildren(),this.bitmap.texture=null,this.bitmap=null,this.maskBitmap&&(this.maskBitmap.texture=null,this.maskBitmap=null),this.userBase64,this.cacheAsBitmap=!1},e}(egret.Sprite);__reflect(RoleHeadImage.prototype,"RoleHeadImage");var DBProgress=function(t){function e(e){var i=t.call(this)||this;return i._armature=e,i._armature.gotoAndStop("progress"),i.addChild(i._armature),i}return __extends(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=t,this._progress>1&&(this._progress=1),this._progress<0&&(this._progress=0),this._armature.gotoAndStopByProgress("progress",this._progress)},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(DBProgress.prototype,"DBProgress");var SoundBg=function(t){function e(){var e=t.call(this)||this;return e._currBg="",e}return __extends(e,t),e.prototype.mute=function(){this._currSoundChannel&&(this._currSoundChannel.volume=0)},e.prototype.restoreVolume=function(){this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},e.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg=""},e.prototype.play=function(t,e){if(void 0===e&&(e=0),this._currBg!=t){this.stop(),this._currBg=t,this._currPlayTime=e;var i=this.getSound(t);i&&this.playSound(i)}},e.prototype.playSound=function(t){this._currSound=t,this._currSoundChannel=this._currSound.play(this._currPlayTime,0),this._currSoundChannel.volume=this._volume},e.prototype.getPlayTime=function(){return this._currSoundChannel?this._currSoundChannel.position:0},e.prototype.setVolume=function(t){this._volume=t,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},e.prototype.loadedPlay=function(t){this._currBg==t&&this.playSound(RES.getRes(t))},e.prototype.checkCanClear=function(t){return this._currBg!=t},e}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(t){function e(){var e=t.call(this)||this;return e._cacheSoundChannel=[],e._playingEffects={},e}return __extends(e,t),e.prototype.play=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=1),this._playTime=i,e||!this._playingEffects[t]){var s=this.getSound(t);s&&this.playSound(t,s)}},e.prototype.getSoundChannel=function(t){var e=null;return this._cacheSoundChannel.length?(e=this._cacheSoundChannel.pop(),e.isStopped=!1,e.$url=t.url,e.$loops=this._playTime,e.$audioBuffer=t.audioBuffer,e.$startTime=0,e.$play()):e=t.play(0,this._playTime),e},e.prototype.playSound=function(t,e){var i=this.getSoundChannel(e);i.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),i.volume=this._volume,i.soundName=t,this._playingEffects[t]=i},e.prototype.onSoundComplete=function(t){var e=t.currentTarget,i=e.soundName;delete this._playingEffects[i]},e.prototype.stopSound=function(t){var e=this._playingEffects[t];e&&(e.stop(),delete this._playingEffects[t])},e.prototype.setVolume=function(t){this._volume=t},e.prototype.loadedPlay=function(t){this.playSound(t,RES.getRes(t))},e}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(t){function e(){var e=t.call(this)||this;return e.bgOn=!0,e.effectOn=!0,e.bgVolume=.5,e.effectVolume=.7,e.bg=new SoundBg,e.bg.setVolume(e.bgVolume),e.effect=new SoundEffects,e.effect.setVolume(e.effectVolume),e}return __extends(e,t),e.prototype.playEffect=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=1),this.effectOn&&this.effect.play(t,e,i)},e.prototype.playBg=function(t){this.currBg=t,this.bgOn&&this.bg.play(t)},e.prototype.pauseBg=function(){this.bgOn&&(this.bgPlayTime=this.bg.getPlayTime(),this.bg.stop())},e.prototype.replayBg=function(){this.bgOn&&this.bg.play(this.currBg,this.bgPlayTime)},e.prototype.stopBg=function(){this.bg.stop()},e.prototype.muteBg=function(){this.bg.mute()},e.prototype.restoreVolumeBg=function(){this.bg.restoreVolume()},e.prototype.stopEffect=function(t){this.effect.stopSound(t)},e.prototype.setEffectOn=function(t){this.effectOn=t},e.prototype.setBgOn=function(t){this.bgOn!=t&&(this.bgOn=t,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg())},e.prototype.setBgVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.bgVolume=t,this.bg.setVolume(this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.effectVolume=t,this.effect.setVolume(this.effectVolume)},e.prototype.getEffectVolume=function(){return this.effectVolume},Object.defineProperty(e.prototype,"bgIsOn",{get:function(){return this.bgOn},enumerable:!0,configurable:!0}),e}(BaseClass);SoundManager.CLEAR_TIME=18e4,__reflect(SoundManager.prototype,"SoundManager");var TableUI=function(t){function e(){var e=t.call(this)||this;return e.ballArr=[],e.bounce=-.7,e.tableX=0,e.tableY=0,e.tableW=0,e.tableH=0,e.curBall=null,e.ganLen=581,e.angleSpeed=0,e.angleNum=0,e.otherX=0,e.otherY=0,e.posArr=[],e.holeR=28,e.centerX=0,e.centerY=0,e.ballImgArr=[],e.downStart=744,e.downOver=820,e._r=0,e.removeBallArr=[],e.firstCollision=0,e.isMove=!1,e.curVx=0,e.curVy=0,e.isBegin=!1,e.huadongAngle=0,e["long"]=0,e.moveTime=0,e.whiteBall=null,e.xIcon=null,e.isBaiqiu=0,e.isOwnGame=!1,e.curActionNum=0,e.myChairId=-1,e.otherChairId=-1,e.isLianxi=0,e.myBrowser="",e.myColor=-1,e.lightArr=[],e.curTimerNum=0,e.isLoading=0,e.isKsBtn=!1,e.quanShpArr=[],e.isCanClose=!1,e.isLosePrompt=!1,e.isCanMove=!1,e.isTOHit=!1,e.isKsPlay=!1,e.isClickLidu=!1,e.isSetBaiQiu=!0,e.liduTime=0,e.addNum=2,e.isMeClick=GameData.isRoomOwner,e.skinName="src/ui/TableUISkin.exml",e
}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.StageW=this.stage.stageWidth,this.StageH=this.stage.stageHeight,this.tableX=this.tableBG.x,this.tableY=this.tableBG.y,this.tableW=this.tableBG.width,this.tableH=this.tableBG.height,this.leftGroupPos={x:this.smallGroup.x,y:this.smallGroup.y},this.rightGroupPos={x:this.bigGroup.x,y:this.bigGroup.y},this.leftLabel.visible=!1,this.rightLabel.visible=!1,this.leftTurn.visible=!1,this.rightTurn.visible=!1,this.ballImgArr=[this.ball1,this.ball2,this.ball3,this.ball4,this.ball5,this.ball6,this.ball7,null,this.ball9,this.ball10,this.ball11,this.ball12,this.ball13,this.ball14,this.ball15],this.ball8.alpha=.2,this.ball16.alpha=.2;for(var e=0;e<this.ballImgArr.length;e++)this.ballImgArr[e]&&(this.ballImgArr[e].alpha=.2);this.posArr=[{x1:this.StageW/2-this.tableBG2.width/2*.86,y1:this.tableBG2.y+.078*this.tableBG2.height,x2:this.StageW/2-this.tableBG2.width/2*.915,y2:this.tableBG2.y+.137*this.tableBG2.height,hx:this.StageW/2-this.tableBG2.width/2*.905,hy:this.tableBG2.y+.0912*this.tableBG2.height},{x1:this.StageW/2-this.tableBG2.width/2*.05,y1:this.tableBG2.y+.078*this.tableBG2.height,x2:this.StageW/2+this.tableBG2.width/2*.05,y2:this.tableBG2.y+.078*this.tableBG2.height,hx:this.StageW/2,hy:this.tableBG2.y+.062*this.tableBG2.height},{x1:this.StageW/2+this.tableBG2.width/2*.86,y1:this.tableBG2.y+.078*this.tableBG2.height,x2:this.StageW/2+this.tableBG2.width/2*.915,y2:this.tableBG2.y+.137*this.tableBG2.height,hx:this.StageW/2+this.tableBG2.width/2*.905,hy:this.tableBG2.y+.0912*this.tableBG2.height},{x2:this.StageW/2-this.tableBG2.width/2*.86,y2:this.tableBG2.y+.925*this.tableBG2.height,x1:this.StageW/2-this.tableBG2.width/2*.915,y1:this.tableBG2.y+.865*this.tableBG2.height,hx:this.StageW/2-this.tableBG2.width/2*.905,hy:this.tableBG2.y+.912*this.tableBG2.height},{x1:this.StageW/2-this.tableBG2.width/2*.05,y1:this.tableBG2.y+.925*this.tableBG2.height,x2:this.StageW/2+this.tableBG2.width/2*.05,y2:this.tableBG2.y+.925*this.tableBG2.height,hx:this.StageW/2,hy:this.tableBG2.y+.942*this.tableBG2.height},{x1:this.StageW/2+this.tableBG2.width/2*.86,y1:this.tableBG2.y+.925*this.tableBG2.height,x2:this.StageW/2+this.tableBG2.width/2*.915,y2:this.tableBG2.y+.865*this.tableBG2.height,hx:this.StageW/2+this.tableBG2.width/2*.905,hy:this.tableBG2.y+.912*this.tableBG2.height}],this.centerX=this.posArr[0].hx+.5*(this.posArr[2].hx-this.posArr[0].hx),this.centerY=this.posArr[0].hy+(this.posArr[3].hy-this.posArr[0].hy)/2;for(var e=0;e<this.posArr.length;e++){var i=new egret.Shape;i.graphics.lineStyle(1,65280),i.graphics.drawCircle(this.posArr[e].x1,this.posArr[e].y1,1),i.graphics.endFill(),this.addChild(i);var s=new egret.Shape;s.graphics.lineStyle(1,65280),s.graphics.drawCircle(this.posArr[e].x2,this.posArr[e].y2,1),s.graphics.endFill(),this.addChild(s);var n=new egret.Shape;n.graphics.lineStyle(1,65280),n.graphics.drawCircle(this.posArr[e].hx,this.posArr[e].hy,this.holeR),n.graphics.endFill(),this.addChild(n)}this.ganImg=new eui.Image("gan_png"),this.ganImg.anchorOffsetX=12,this.ganImg.anchorOffsetY=5,this.ganImg.visible=!1,this.addChild(this.ganImg),this.BtnReadyFunc(),this.shp1=new egret.Shape,this.addChild(this.shp1),this.shp1.alpha=.6,this.shp2=new egret.Shape,this.addChild(this.shp2),this.shp2.alpha=.6,this.shp3=new egret.Shape,this.addChild(this.shp3),this.shp3.alpha=.6,this.shp4=new egret.Shape,this.addChild(this.shp4),this.shp4.alpha=.6,this["long"]=175.7,this.liduLabel.text="70/100";var r=new egret.Rectangle(251-this["long"],0,this["long"],42);this.lidu.mask=r,this.lidu.touchEnabled=!1,this.soundganqiu=RES.getRes("ganqiu_mp3"),this.soundrudong=RES.getRes("rudong_mp3"),this.soundzhuangbian=RES.getRes("zhuangbian_mp3"),this.soundzhuangqiu=RES.getRes("zhuangqiu_mp3")},e.prototype.BtnReadyFunc=function(){var t=this;this.isLianxi=2,this.isOwnGame=!0,this.ganImg0.visible=!1,this.ganImg1.visible=!0,this.isBaiqiu=1;var e=new eui.Label;e.text="等待游戏开始...",e.width=1440,e.y=this.centerY,e.name="dengdai",e.textAlign=egret.HorizontalAlign.CENTER,this.addChild(e),setTimeout(function(){t.startGame1()},200)},e.prototype.startConnect=function(){var t=new eui.Label;t.text="等待其他玩家...",t.width=1440,t.y=this.centerY,t.name="dengdai",t.textAlign=egret.HorizontalAlign.CENTER,this.addChild(t)},e.prototype.startGame1=function(){var t=this;this.curBall=new NewBall(0),this.addChild(this.curBall),this.curBall.lastX=this.posArr[0].hx+.1*(this.posArr[2].hx-this.posArr[0].hx),this.curBall.lastY=this.posArr[0].hy+(this.posArr[3].hy-this.posArr[0].hy)/2,this.curBall.nextX=this.curBall.lastX,this.curBall.nextY=this.curBall.lastY,this.curBall.name="cur",this.ballArr.push(this.curBall),this.otherX=this.posArr[0].hx+.7*(this.posArr[2].hx-this.posArr[0].hx),this.otherY=this.posArr[0].hy+(this.posArr[3].hy-this.posArr[0].hy)/2;for(var e=0;5>e;e++){var i=new NewBall(this.ballArr.length);this.addChild(i),i.lastX=this.otherX+(2*i.radius+1)*e*Math.cos(Math.PI/6),i.lastY=this.otherY-(2*i.radius+1)*e*Math.sin(Math.PI/6),i.nextX=i.lastX,i.nextY=i.lastY,this.ballArr.push(i);for(var s=1;e>=s;s++){var n=new NewBall(this.ballArr.length);this.addChild(n),n.lastX=i.lastX,n.lastY=i.lastY+2*n.radius*s+s,n.nextX=n.lastX,n.nextY=n.lastY,this.ballArr.push(n)}}for(var e=0;e<this.ballArr.length;e++){var i=this.ballArr[e];this.setBallPos1(i.nextX,i.nextY,e)}setTimeout(function(){t.startGame2()},this,100)},e.prototype.setBallPos1=function(t,e,i){this.ballArr[i].x=t,this.ballArr[i].y=e},e.prototype.sendEventResponse=function(t){var e=t.data;if(200!==e.status)return console.log("事件发送失败,status:"+status);var i=GameData.events[e.sequence];i&&i.action===GameData.gameStartEvent&&delete GameData.events[e.sequence]},e.prototype.sendEventNotify=function(t){var e=this,i=t.data,s=JSON.parse(i.cpProto);if(i.cpProto.indexOf(GameData.setWhiteBallPosEvent)>=0)console.log(s.mPX,s.mPY,"info.mPY"),this.curBall.x=s.mPX,this.curBall.y=s.mPY,this.curBall.lastX=this.curBall.nextX=s.mPX,this.curBall.lastY=this.curBall.nextY=s.mPY;else if(i.cpProto.indexOf(GameData.BallMoveEvent)>=0){console.log("BallMoveEvent"),this.isLoading=2,this.ganImg.rotation=s.ganRotation,this.curBall.vx=s.curBallVx,this.curBall.vy=s.curBallVy,this["long"]=s["long"],this.ganImg.visible=!0,this.ganImg.x=s.oldx,this.ganImg.y=s.oldy;var n=egret.Tween.get(this.ganImg);n.to({x:s.newOldx,y:s.newOldy},1e3*(1-this["long"]/251)).to({x:s.oldx,y:s.oldy},600*(1-this["long"]/251)).call(function(){e.addEventListener(egret.Event.ENTER_FRAME,e.enterFrame,e)})}},e.prototype.ShowMeCanClickBall=function(){if(this.quanShpArr.length>0)for(var t=0;t<this.quanShpArr.length;t++)this.quanShpArr[t].graphics.clear(),this.quanShpArr.pop();for(var t=1;t<this.ballArr.length;t++){var e=new egret.Shape;e.graphics.lineStyle(1,16777215),e.graphics.beginFill(16777215,1),e.graphics.drawCircle(this.ballArr[t].x,this.ballArr[t].y,25),e.graphics.endFill(),this.addChild(e),this.quanShpArr.push(e),e.alpha=0;egret.Tween.get(e).to({alpha:.2},500).to({alpha:0},500)}},e.prototype.startGame2=function(){mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_RSP,this.sendEventResponse,this),mvs.MsResponse.getInstance.addEventListener(mvs.MsEvent.EVENT_SENDEVENT_NTFY,this.sendEventNotify,this),this._r=this.ballArr[0].radius,this.showTipsUI("轮到你击球"),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunc,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMoveGanStage,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.endFunc,this),this.lidudi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.liduFunc,this),this.whiteBall=new eui.Image("whiteBall_png"),this.whiteBall.anchorOffsetX=54.5,this.whiteBall.anchorOffsetY=54.5,this.addChild(this.whiteBall),this.whiteBall.x=this.curBall.x,this.whiteBall.y=this.curBall.y,this.curBall.visible=!1,this.isCanMove=!0;var t=this.getChildByName("dengdai");t.parent&&this.removeChild(t),1==this.isLianxi},e.prototype.showTipsUI=function(t){var e=new TipsUI(t);this.addChild(e),e.x=this.centerX,e.y=this.centerY},e.prototype.removeAllEventListener=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunc,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMoveGanStage,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunc,this),this.lidudi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.liduFunc,this),this.countdownTimer.removeEventListener(egret.TimerEvent.TIMER,this.startCountDown,this),this.isCanMove=!1},e.prototype.quitFunc=function(){var t=this;this.resetUI(),1==this.isLianxi&&(this.isCanClose=!0),this.isLianxi=0,this.lianxiImg=new eui.Image("lianxiBtn1_png"),this.lianxiImg.anchorOffsetX=48,this.lianxiImg.x=this.centerX,this.lianxiImg.y=this.centerY+170,this.addChild(this.lianxiImg),this.lianxiImg.name="lianxi";var e=RES.getRes("ks3_json"),i=RES.getRes("ks2_json"),s=RES.getRes("ks1_png"),n=new dragonBones.EgretFactory;n.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),n.addTextureAtlas(new dragonBones.EgretTextureAtlas(s,i)),this.ksDragon.addEventListener(egret.Event.COMPLETE,function(){t.isKsBtn=!0,t.isKsPlay=!1,t.ksDragon.touchEnabled=!0,t.ksDragon.addEventListener(egret.TouchEvent.TOUCH_TAP,t.startConnect,t)},this)},e.prototype.countdownFunc=function(t,e){if(void 0===e&&(e=0),t&&e>0){var i=Math.floor(e);this.curTimerNum=i,this.countdownTimer.running||this.countdownTimer.start()}t||(this.curTimerNum=0,this.countdownTimer.running&&this.countdownTimer.stop(),this.setTimeNum(this.curTimerNum))},e.prototype.startCountDown=function(){this.curTimerNum--,this.setTimeNum(this.curTimerNum),0==this.curTimerNum&&this.countdownTimer.stop()},e.prototype.againFunc=function(){if(this.resetUI(),1==this.isLianxi){var t=new eui.Label;t.text="等待其他玩家...",t.width=1440,t.y=this.centerY,t.name="dengdai",t.textAlign=egret.HorizontalAlign.CENTER,this.addChild(t)}else if(2==this.isLianxi){this.isOwnGame=!0,this.ganImg0.visible=!1,this.ganImg1.visible=!0,this.isBaiqiu=1;var t=new eui.Label;t.text="等待游戏开始...",t.width=1440,t.y=this.centerY,t.name="dengdai",t.textAlign=egret.HorizontalAlign.CENTER,this.addChild(t),setTimeout(this.startGame1,this,100)}},e.prototype.resetUI=function(){this.removeAllEventListener();for(var t=this.ballArr.length-1;t>=0;t--)this.ballArr[t].parent.removeChild(this.ballArr[t]),this.ballArr.splice(t,1);this.isMove=!1,this.isBegin=!1,this.isOwnGame=!1,this.otherChairId=-1,this.curActionNum=0,this.myColor=-1,this.smallGroup.visible=!1,this.bigGroup.visible=!1,this.leftLabel.visible=!1,this.rightLabel.visible=!1,this.leftTurn.visible=!1,this.rightTurn.visible=!1,this.ball8.alpha=.4,this.ball16.alpha=.4;for(var t=0;t<this.ballImgArr.length;t++)this.ballImgArr[t]&&(this.ballImgArr[t].alpha=.4);for(var t=0;t<this.lightArr.length;t++)this.lightArr[t]&&(this.lightArr[t].animation.gotoAndStop("zq_guang_001a",0),this.removeChild(this.lightArr[t].display),dragonBones.WorldClock.clock.remove(this.lightArr[t]));this.lightArr=[],this.ganImg.visible=!1,this.ganImg0.visible=!0,this.ganImg1.visible=!0,this["long"]=175.7,this.liduLabel.text="70/100";var e=new egret.Rectangle(251-this["long"],0,this["long"],42);this.lidu.mask=e},e.prototype.showTips=function(){this.tipsUI.parent||(this.tipsUI.anchorOffsetX=this.tipsUI.width/2,this.tipsUI.anchorOffsetY=this.tipsUI.height/2,this.tipsUI.x=this.stage.stageWidth/2,this.tipsUI.y=this.ballArr[0].nextY,this.tipsUI.dingshi(),this.addChild(this.tipsUI))},e.Instance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.mouseMoveGanStage=function(t){e.Instance().isCanMove&&e.Instance().moveGan(t.stageX,t.stageY)},e.prototype.playKsAction=function(t,e){var i=0,s=0;0==bep?(i=t,s=e-bel):1==bep&&(i=t-bel,s=e);var t=this.centerX,e=this.centerY+80;i>=t-80&&s>=e-80&&t+80>=i&&e+80>=s?this.isKsPlay||(this.isKsPlay=!0,console.log("play"),this.ksDragon.animation.gotoAndPlay("zq_ks_02a",-1,-1,0)):this.isKsPlay&&(this.ksDragon.animation.gotoAndStop("zq_ks_02a"),this.isKsPlay=!1,console.log("over")),i>=this.lianxiImg.x-48&&i<=this.lianxiImg.x+48&&s>=this.lianxiImg.y&&s<=this.lianxiImg.y+41?"lianxiBtn1"==this.lianxiImg.source&&(this.lianxiImg.source="lianxiBtn2"):"lianxiBtn2"==this.lianxiImg.source&&(this.lianxiImg.source="lianxiBtn1")},e.prototype.moveGan=function(t,e){if(this.isOwnGame&&!this.isMove){if(0!=this.isBaiqiu){var i=0,s=0;return i=t,s=e,void(i>=116&&s>=31&&1311>=i&&683>=s&&(null==this.whiteBall&&(this.whiteBall=new eui.Image("whiteBall_png"),this.whiteBall.anchorOffsetX=54.5,this.whiteBall.anchorOffsetY=54.5,this.addChild(this.whiteBall),this.curBall.lastX=this.curBall.nextX=-17,this.curBall.lastY=this.curBall.nextY=-17,this.curBall.vx=0,this.curBall.vy=0,this.setBaiPos(-17,-17),this.showGan(200,200),this.setSubline()),1==this.isBaiqiu&&(i>418?(null==this.xIcon&&(this.xIcon=new eui.Image("forbid_png"),this.xIcon.anchorOffsetX=54.5,this.xIcon.anchorOffsetY=54.5,this.addChild(this.xIcon)),this.xIcon.x=i,this.xIcon.y=s):this.xIcon&&this.xIcon.parent&&(this.removeChild(this.xIcon),this.xIcon=null)),this.whiteBall.x=i,this.whiteBall.y=s))}if(!this.isSetBaiQiu){var i=0,s=0;i=t,s=e;var n=i-this.curBall.nextX,r=s-this.curBall.nextY,o=Math.sqrt(n*n+r*r);if(o<=this._r)return;if(this.showGan(i,s),this.setSubline(),1==this.isLianxi){var a=egret.getTimer();a-this.moveTime>1e3&&(this.moveTime=a)}}}},e.prototype.rotationCoord=function(t,e,i){0==i&&(i=1e-4);var s=-i,n=Math.cos(s)*Math.cos(s)/Math.sin(s)+Math.sin(s),r=(Math.cos(s)*t/Math.sin(s)-e)/n,o=Math.cos(s)+Math.sin(s)*Math.sin(s)/Math.cos(s),a=(Math.sin(s)*t/Math.cos(s)+e)/o;return{x:r,y:a}},e.prototype.showGan=function(t,e){var i=this.curBall.nextX,s=this.curBall.nextY,n=t,r=e,o=n-i,a=r-s,h=Math.sqrt((n-i)*(n-i)+(r-s)*(r-s)),l=0;o>=0&&0>=a&&(l=180*Math.asin(o/h)/Math.PI-90,this.angleSpeed=Math.asin(o/h),this.angleNum=1,this.huadongAngle=this.angleSpeed-Math.PI/2,this.ganImg.x=i-this.ganLen*Math.sin(Math.asin(o/h)),this.ganImg.y=s+this.ganLen*Math.cos(Math.asin(o/h))),o>0&&a>0&&(l=180*Math.asin(a/h)/Math.PI,this.angleSpeed=Math.asin(a/h),this.angleNum=2,this.huadongAngle=this.angleSpeed,this.ganImg.x=i-this.ganLen*Math.cos(Math.asin(a/h)),this.ganImg.y=s-this.ganLen*Math.sin(Math.asin(a/h))),0>a&&0>o&&(l=180*Math.asin(o/h)/Math.PI-90,this.angleSpeed=Math.asin(o/h),this.angleNum=3,this.huadongAngle=this.angleSpeed-Math.PI/2,this.ganImg.x=i+this.ganLen*Math.sin(Math.asin(-o/h)),this.ganImg.y=s+this.ganLen*Math.cos(Math.asin(-o/h))),0>o&&a>0&&(l=180*-(Math.asin(a/h)+90*Math.PI/180)/Math.PI-90,this.angleSpeed=Math.asin(a/h),this.angleNum=4,this.huadongAngle=Math.PI-this.angleSpeed,this.ganImg.x=i+this.ganLen*Math.cos(Math.asin(a/h)),this.ganImg.y=s-this.ganLen*Math.sin(Math.asin(a/h))),this.ganImg.rotation=l,this.ganImg.visible=!0},e.prototype.liduFunc=function(t){if(console.log("力度"),!this.isBegin&&!this.isMove){this["long"]=251-t.localX,this.liduLabel.text=""+Math.floor(this["long"]/251*100)+"/100";var e=new egret.Rectangle(251-this["long"],0,this["long"],42);this.lidu.mask=e,this.isClickLidu=!0}},e.prototype.beginFunc=function(t){var e=this;if(this.isOwnGame&&!this.isMove&&!this.isSetBaiQiu){var i=t.stageX-this.curBall.nextX,s=t.stageY-this.curBall.nextY,n=Math.sqrt(i*i+s*s);if(n<=this._r)return;return 1==this.isLianxi,this.isBegin=!0,this.isClickLidu?this.isClickLidu=!1:this["long"]=175.7,this.addNum=2,this.isLoading=0,this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),void(this.liduTime=setTimeout(function(){e.isLoading=1},this,500))}},e.prototype.setBaiPos=function(t,e){this.ballArr[0].x=t,this.ballArr[0].y=e},e.prototype.endFunc=function(t){var e=this;if(this.isOwnGame&&!this.isMove){if(t.stageX>=116&&t.stageY>=31&&t.stageX<=1311&&t.stageY<=683&&0!=this.isBaiqiu){var i=0,s="";if(1==this.isBaiqiu?(i=418+this._r,s="word15"):2==this.isBaiqiu&&(i=this.posArr[2].x2,s="word14"),!(t.stageX>this.posArr[0].x2+this._r&&t.stageY>this.posArr[0].y1+this._r&&t.stageX<i-this._r&&t.stageY<this.posArr[3].y2-this._r))return;for(var n=0;6>n;n++){var r=this.posArr[n].hx,o=this.posArr[n].hy;if(t.stageX>r-this.holeR&&t.stageX<r+this.holeR&&t.stageY>o-this.holeR&&t.stageY<o+this.holeR){var a=t.stageX-r,h=t.stageY-o,l=Math.sqrt(a*a+h*h);if(l<this.holeR)return}}for(var c=0;c<this.ballArr.length;c++){var p=this.ballArr[c];if("cur"!=p.name){var a=p.nextX-t.stageX,h=p.nextY-t.stageY,l=Math.sqrt(a*a+h*h);if(l<=2*this._r)return}}this.curBall.visible=!0,this.setBaiPos(t.stageX,t.stageY);var u={action:GameData.setWhiteBallPosEvent,mPX:t.stageX,mPY:t.stageY};return mvs.MsEngine.getInstance.sendEvent(JSON.stringify(u)),console.log("我发送了"),this.curBall.lastX=this.curBall.nextX=t.stageX,this.curBall.lastY=this.curBall.nextY=t.stageY,this.whiteBall&&this.whiteBall.parent&&(this.removeChild(this.whiteBall),this.whiteBall=null),this.xIcon&&this.xIcon.parent&&(this.removeChild(this.xIcon),this.xIcon=null),this.curBall.isJindong=-1,1==this.isLianxi&&(1==this.isBaiqiu||2==this.isBaiqiu),this.isBaiqiu=0,this.isMove=!1,this.isBegin=!1,void(this.isSetBaiQiu=!1)}if(!this.isSetBaiQiu){var g=2*this["long"]/251;1==this.angleNum?(this.curVx=g*Math.sin(this.angleSpeed),this.curVy=-g*Math.cos(this.angleSpeed)):2==this.angleNum?(this.curVx=g*Math.cos(this.angleSpeed),this.curVy=g*Math.sin(this.angleSpeed)):3==this.angleNum?(this.curVx=g*Math.sin(this.angleSpeed),this.curVy=-g*Math.cos(this.angleSpeed)):4==this.angleNum&&(this.curVx=-g*Math.cos(this.angleSpeed),this.curVy=g*Math.sin(this.angleSpeed)),this.shp1.graphics.clear(),this.shp2.graphics.clear(),this.shp3.graphics.clear(),this.shp4.graphics.clear(),this.curBall.vx=this.curVx,this.curBall.vy=this.curVy,clearTimeout(this.liduTime),this.isLoading=0;var d=this.ganImg.x,m=this.ganImg.y,v=this.curBall.nextX-d,f=this.curBall.nextY-m,_=Math.atan2(f,v),y=Math.sin(_),E=Math.cos(_),R=new egret.Point(0,0);R.x-=80*this["long"]/251;var b=this.rotateR(R.x,R.y,y,E,!1),T=d+b.x,S=m+b.y,C=egret.Tween.get(this.ganImg);C.to({x:T,y:S},1e3*(1-this["long"]/251)),C.to({x:d,y:m},600*(1-this["long"]/251)),C.call(function(){var t={action:GameData.BallMoveEvent,ganRotation:e.ganImg.rotation,curBallVx:e.curVx,curBallVy:e.curVy,newOldx:T,newOldy:S,"long":e["long"],oldx:d,oldy:m};mvs.MsEngine.getInstance.sendEvent(JSON.stringify(t)),e.isMove=!0,e.isLoading=2,e.ganImg.visible=!1,1==e.isLianxi&&(e.ganImg0.visible=!0),e.ganImg1.visible=!0;e.soundganqiu.play(0,1)},this)}}},e.prototype.enterFrame=function(){if(1==this.isLoading){this["long"]+=this.addNum,this["long"]>=251?this.addNum=-2:this["long"]<=0&&(this.addNum=2);var t=new egret.Rectangle(251-this["long"],0,this["long"],42);this.lidu.mask=t,this.liduLabel.text=""+Math.floor(this["long"]/251*100)+"/100"}else 2==this.isLoading&&this.updataMask()},e.prototype.updataMask=function(){for(var t=this,e=0;30>e;e++){for(var i=this.ballArr.length,s=0,n=i-1;n>=0;n--){var r=this.ballArr[n];if(0==r.vx&&0==r.vy&&-1==r.isJindong&&s++,-1!=r.isJindong){var o=egret.Point.polar(11,r.degree*Math.PI/180);r.nextX=this.posArr[r.isJindong].hx+o.x,r.nextY=this.posArr[r.isJindong].hy+o.y,r.degree+=.6,r.degree>=300&&r.degree<300.6&&this.jinqiuAction(r.isJindong),r.degree>=600&&(this.removeBallArr.push(r.idx),"cur"==r.name?(r.nextX=-17,r.nextY=-17,r.isJindong=-1):(this.remove3DBall(n),this.ballArr.splice(n,1),this.ballImgArr[r.idx-1]&&(this.ballImgArr[r.idx-1].alpha=1)))}else(0!=r.vx||0!=r.vy)&&(r.nextX+=r.vx,r.nextY+=r.vy,r.startRoll(),this.checkWalls(r))}var i=this.ballArr.length;for(n=0;i-1>n;n++){var a=this.ballArr[n];if(-1==a.isJindong)for(var h=n+1;i>h;h++){var l=this.ballArr[h];-1==l.isJindong&&this.checkCollision(a,l)}}if(i==s){this.isLoading=0,this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),setTimeout(function(){t.ShowMeCanClickBall()},2e3),console.log("over"),this["long"]=175.7,this.liduLabel.text="70/100";var c=new egret.Rectangle(251-this["long"],0,this["long"],42);this.lidu.mask=c;for(var n=this.ballArr.length-1;n>=0;n--){var p=this.ballArr[n];p.moc=.9997,p.degree=0,p.isJindong=-1}if(1==this.isLianxi){for(var n=0;n<this.ballArr.length;n++)this.ballArr[n].nextX=Math.round(this.ballArr[n].nextX),this.ballArr[n].nextY=Math.round(this.ballArr[n].nextY);this.firstCollision=0,this.removeBallArr=[]}else if(2==this.isLianxi){if(1==this.ballArr.length){var u=new WinUI;u.x=this.centerX-273,u.y=this.centerY-234.5,this.addChild(u),u.playAction()}else this.isOwnGame=!0;-17==this.curBall.nextX&&-17==this.curBall.nextY&&(this.isBaiqiu=2)}this.isMove=!1;break}}for(var i=this.ballArr.length,n=i-1;n>=0;n--){var p=this.ballArr[n];this.setBallPos(p.nextX,p.nextY,p.lastX,p.lastY,n),p.lastX=p.nextX,p.lastY=p.nextY}},e.prototype.remove3DBall=function(t){for(var e=0;e<this.ballArr.length;e++)e===t&&this.ballArr[t].parent.removeChild(this.ballArr[t])},e.prototype.setBallPos=function(t,e,i,s,n){var r=t,o=e,a=i,h=s;if(r!=a||o!=h){this.ballArr[n].x=r,this.ballArr[n].y=o;var l=r-a,c=o-h;Math.sqrt(l*l+c*c)}},e.prototype.jinqiuAction=function(t){var e=this,i=RES.getRes("jinqiu3_json"),s=RES.getRes("jinqiu2_json"),n=RES.getRes("jinqiu1_png"),r=dragonBones.EgretFactory.factory;r.parseDragonBonesData(i),r.parseTextureAtlasData(s,n);var o=r.buildArmatureDisplay("armatureNamejinqiu");this.addChild(o),o.x=this.posArr[t].hx,o.y=this.posArr[t].hy,o.animation.gotoAndPlay("01",-1,-1,1),o.addEventListener(egret.Event.COMPLETE,function(){o.parent&&e.removeChild(o)},this)},e.prototype.checkWalls=function(t){for(var e=0;6>e;e++){var i=this.posArr[e].hx,s=this.posArr[e].hy;if(t.nextX>i-this.holeR&&t.nextX<i+this.holeR&&t.nextY>s-this.holeR&&t.nextY<s+this.holeR){var n=t.nextX-i,r=t.nextY-s,o=Math.sqrt(n*n+r*r);if(o<this.holeR){console.log("ball: "+t.idx);var a=this.soundrudong.play(0,1);a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vx=0,t.vy=0,t.isJindong=e}}}if(t.nextX<this.posArr[0].x2+this._r){if(t.nextY>this.posArr[0].y2&&t.nextY<this.posArr[3].y1){t.nextX=this.posArr[0].x2+this._r;var a=this.soundzhuangbian.play(0,1);return a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vx*=this.bounce,!1}if(t.nextY<=this.posArr[0].y2){var n=t.nextX-this.posArr[0].x2,r=t.nextY-this.posArr[0].y2,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[0].x2,this.posArr[0].y2,.7)}if(t.nextY>=this.posArr[3].y1){var n=t.nextX-this.posArr[3].x1,r=t.nextY-this.posArr[3].y1,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[3].x1,this.posArr[3].y1,.7)}}if(t.nextX>this.posArr[2].x2-this._r){if(t.nextY>this.posArr[2].y2&&t.nextY<this.posArr[5].y1){t.nextX=this.posArr[2].x2-this._r;var a=this.soundzhuangbian.play(0,1);a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vx*=this.bounce}if(t.nextY<=this.posArr[2].y2){var n=t.nextX-this.posArr[2].x2,r=t.nextY-this.posArr[2].y2,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[2].x2,this.posArr[2].y2,.7)}if(t.nextY>=this.posArr[5].y1){var n=t.nextX-this.posArr[5].x1,r=t.nextY-this.posArr[5].y1,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[5].x1,this.posArr[5].y1,.7)}}if(t.nextY<this.posArr[0].y1+this._r){if(t.nextX>this.posArr[0].x1&&t.nextX<this.posArr[1].x1){t.nextY=this.posArr[0].y1+this._r;var a=this.soundzhuangbian.play(0,1);a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vy*=this.bounce}if(t.nextX>this.posArr[1].x2&&t.nextX<this.posArr[2].x1){t.nextY=this.posArr[0].y1+this._r;var a=this.soundzhuangbian.play(0,1);a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vy*=this.bounce}if(t.nextX<=this.posArr[0].x1){var n=t.nextX-this.posArr[0].x1,r=t.nextY-this.posArr[0].y1,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[0].x1,this.posArr[0].y1,.7)}if(t.nextX>=this.posArr[1].x1&&t.nextX<this.posArr[1].hx){var n=t.nextX-this.posArr[1].x1,r=t.nextY-this.posArr[1].y1,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[1].x1,this.posArr[1].y1,.7)}if(t.nextX<=this.posArr[1].x2&&t.nextX>this.posArr[1].hx){var n=t.nextX-this.posArr[1].x2,r=t.nextY-this.posArr[1].y2,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[1].x2,this.posArr[1].y2,.7)}if(t.nextX>=this.posArr[2].x1){var n=t.nextX-this.posArr[2].x1,r=t.nextY-this.posArr[2].y1,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[2].x1,this.posArr[2].y1,.7)}}if(t.nextY>this.posArr[3].y2-this._r){if(t.nextX>this.posArr[3].x2&&t.nextX<this.posArr[4].x1){t.nextY=this.posArr[3].y2-this._r;var a=this.soundzhuangbian.play(0,1);a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vy*=this.bounce}if(t.nextX>this.posArr[4].x2&&t.nextX<this.posArr[5].x2){t.nextY=this.posArr[3].y2-this._r;var a=this.soundzhuangbian.play(0,1);a.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2,t.vy*=this.bounce}if(t.nextX<=this.posArr[3].x2){var n=t.nextX-this.posArr[3].x2,r=t.nextY-this.posArr[3].y2,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[3].x2,this.posArr[3].y2,.7)}if(t.nextX>=this.posArr[4].x1&&t.nextX<this.posArr[4].hx){var n=t.nextX-this.posArr[4].x1,r=t.nextY-this.posArr[4].y1,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[4].x1,this.posArr[4].y1,.7)}if(t.nextX<=this.posArr[4].x2&&t.nextX>this.posArr[4].hx){var n=t.nextX-this.posArr[4].x2,r=t.nextY-this.posArr[4].y2,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[4].x2,this.posArr[4].y2,.7)}if(t.nextX>=this.posArr[5].x2){var n=t.nextX-this.posArr[5].x2,r=t.nextY-this.posArr[5].y2,o=Math.sqrt(n*n+r*r);o<this._r&&this.rebound(t,this.posArr[5].x2,this.posArr[5].y2,.7)}}},e.prototype.setSubline=function(){var t=2,e=0,i=0;1==this.angleNum?(e=t*Math.sin(this.angleSpeed),i=-t*Math.cos(this.angleSpeed)):2==this.angleNum?(e=t*Math.cos(this.angleSpeed),i=t*Math.sin(this.angleSpeed)):3==this.angleNum?(e=t*Math.sin(this.angleSpeed),i=-t*Math.cos(this.angleSpeed)):4==this.angleNum&&(e=-t*Math.cos(this.angleSpeed),i=t*Math.sin(this.angleSpeed)),this.shp1.graphics.clear(),this.shp2.graphics.clear(),this.shp3.graphics.clear(),this.shp4.graphics.clear();for(var s=this.curBall.nextX,n=this.curBall.nextY,r=0;1500>r;r++){s+=e,n+=i;for(var o=this.ballArr.length,a=!1,h=0;o>h;h++){var l=this.ballArr[h];if("cur"!=l.name){var c=l.nextX-s,p=l.nextY-n,u=Math.sqrt(c*c+p*p);if(u<=2*this._r){a=!0;var g=this.rotationCoord(s,n,this.huadongAngle),d=this.rotationCoord(l.nextX,l.nextY,this.huadongAngle),m=g.x-d.x,v=g.y-d.y,f=Math.sqrt(m*m+v*v),_=Math.abs(m/f),y=v/Math.abs(v),E=Math.atan2(p,c),R=Math.sin(E),b=Math.cos(E),T=this.rotateR(c,p,R,b,!0);T.x+=70*_;var S=new egret.Point(0,y*(this._r+50*(1-_))),C=new egret.Point(0,y*this._r),A=this.rotateR(T.x,T.y,R,b,!1),x=this.rotateR(S.x,S.y,R,b,!1),M=this.rotateR(C.x,C.y,R,b,!1);this.shp3.graphics.lineStyle(3,16777215),this.shp3.graphics.moveTo(l.nextX,l.nextY),this.shp3.graphics.lineTo(s+A.x,n+A.y),this.shp3.graphics.endFill(),this.shp4.graphics.lineStyle(3,16777215),this.shp4.graphics.moveTo(s+M.x,n+M.y),this.shp4.graphics.lineTo(s+x.x,n+x.y),this.shp4.graphics.endFill();break}}}if(a)break;for(var w=!0,r=0;6>r;r++){var I=this.posArr[r].hx,L=this.posArr[r].hy;if(s>I-this.holeR&&s<I+this.holeR&&n>L-this.holeR&&n<L+this.holeR){var c=s-I,p=n-L,u=Math.sqrt(c*c+p*p);if(u<this.holeR){w=!1;break}}}if(s<this.posArr[0].x2+this._r)break;if(s>this.posArr[2].x2-this._r)break;if(n<this.posArr[0].y1+this._r)break;if(n>this.posArr[3].y2-this._r)break}this.shp1.graphics.lineStyle(3,16777215),this.shp1.graphics.moveTo(this.curBall.nextX,this.curBall.nextY),this.shp1.graphics.lineTo(s,n),this.shp1.graphics.endFill(),this.shp2.graphics.lineStyle(3,16777215),this.shp2.graphics.drawCircle(s,n,this._r-2),this.shp2.graphics.endFill()},e.prototype.rotateR=function(t,e,i,s,n){var r=new egret.Point;return n?(r.x=t*s+e*i,r.y=e*s-t*i):(r.x=t*s-e*i,r.y=e*s+t*i),r},e.prototype.checkCollision=function(t,e){var i=e.nextX-t.nextX,s=e.nextY-t.nextY,n=Math.sqrt(i*i+s*s);if(n<2*this._r){var r=t.vx+e.vx,o=t.vy+e.vy,a=this.soundzhuangqiu.play(0,1);a.volume=Math.sqrt(r*r+o*o)/2;var h=Math.atan2(s,i),l=Math.sin(h),c=Math.cos(h),p=new egret.Point(0,0),u=this.rotateR(i,s,l,c,!0),g=this.rotateR(t.vx,t.vy,l,c,!0),d=this.rotateR(e.vx,e.vy,l,c,!0),m=2*this._r-Math.abs(p.x-u.x);p.x-=.5*m+1e-4,u.x+=.5*m+1e-4;var v=this.rotateR(p.x,p.y,l,c,!1),f=this.rotateR(u.x,u.y,l,c,!1);e.nextX=t.nextX+f.x,e.nextY=t.nextY+f.y,t.nextX=t.nextX+v.x,t.nextY=t.nextY+v.y;var _=g.x-d.x;g.x=d.x,d.x=_+g.x;var y=this.rotateR(g.x,g.y,l,c,!1),E=this.rotateR(d.x,d.y,l,c,!1);t.vx=y.x,t.vy=y.y,e.vx=E.x,e.vy=E.y,0==this.firstCollision&&(0==t.idx&&(this.firstCollision=e.idx),0==e.idx&&(this.firstCollision=t.idx))}},e.prototype.rebound=function(t,e,i,s){if(0==s)return t.vx=0,void(t.vy=0);var n=this.soundzhuangbian.play(0,1);n.volume=Math.sqrt(t.vx*t.vx+t.vy*t.vy)/2;var r=e-t.nextX,o=i-t.nextY,a=Math.atan2(o,r),h=Math.sin(a),l=Math.cos(a),c=new egret.Point(0,0),p=this.rotateR(r,o,h,l,!0);c.x=p.x-this._r-1e-4;var u=this.rotateR(c.x,c.y,h,l,!1);t.nextX=t.nextX+u.x,t.nextY=t.nextY+u.y;var g=this.rotateR(t.vx,t.vy,h,l,!0),d=this.rotateR(0,0,h,l,!0),m=g.x-d.x;g.x=d.x,d.x=m+g.x;var v=this.rotateR(g.x,g.y,h,l,!1),f=this.rotateR(d.x,d.y,h,l,!1);t.vx=s*(v.x-f.x),t.vy=s*(v.y-f.y)},e.prototype.setTimeNum=function(t){if(console.log("执行了事件"),!(0>t||t>=100)){var e=Math.floor(t);Math.floor(e/10)}},e}(eui.Component);TableUI._instance=null,__reflect(TableUI.prototype,"TableUI",["eui.UIComponent","egret.DisplayObject"]);var TipsUI=function(t){function e(e){var i=t.call(this)||this;return i.skinName="TipsUISkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,function(){i.txt.text=e,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2},i),i.dingshi(),i}return __extends(e,t),e.prototype.dingshi=function(){var t=this;setTimeout(function(){t.removeThis()},2500)},e.prototype.removeThis=function(){this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(TipsUI.prototype,"TipsUI");var AssetManager=function(){function t(){}return t.clearCacheList=function(t){for(var e=this.cacheDbs[t]||[];e.length;){var i=e[0];i.dispose()}delete this.cacheDbs[t]},t.removeCacheArmature=function(t){var e=t.armatureName,i=this.cacheDbs[e];if(i){var s=i.indexOf(t);-1!=s&&i.splice(s,1)}this.printCacheListCount()},t.addCacheArmature=function(t){var e=t.armatureName;this.cacheDbs[e]||(this.cacheDbs[e]=[]),this.cacheDbs[e].push(t),this.printCacheListCount()},t.printCacheListCount=function(){return},t.getBitmap=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0);var s=new egret.Bitmap,n=RES.getRes(t);return s.texture=n,e&&(s.anchorOffsetX=s.width>>1),i&&(s.anchorOffsetY=s.height>>1),s},t.getSound=function(t){return RES.getRes(t)},t.loadDBAnimation=function(e){var i,s,n;for(i=0,s=e.length;s>i;i++){n=e[i];var r=RES.getRes(n+"_ske_json"),o=RES.getRes(n+"_tex_json"),a=RES.getRes(n+"_tex_png");r&&o&&a&&(t.dbFactory.parseDragonBonesData(r),t.dbFactory.parseTextureAtlasData(o,a))}},t.removeDBAnimation=function(e){var i,s,n;for(i=0,s=e.length;s>i;i++){n=e[i];var r=RES.getRes(n+"_ske_json");if(r){var o=r.name,a=t.dbFactory.getDragonBonesData(o);t.dbFactory.removeDragonBonesData(o),t.dbFactory.removeTextureAtlasData(o);for(var h in a.armatures)this.clearCacheList(h)}}},t.getDBArmature=function(e){var i=t.dbFactory.buildArmature(e);if(!i)return null;var s=new DBArmature(i);return this.addCacheArmature(s),s},t.getQuickDBArmature=function(e){var i=t.dbFactory.buildArmature(e);if(!i)return null;i.cacheFrameRate=30;var s=new DBArmature(i);return this.addCacheArmature(s),s},t.changeTexture=function(t,e){var i=t.width,s=t.height;t.texture=RES.getRes(e),t.width=i,t.height=s},t.setText=function(t,e){t.text=e,t.anchorOffsetX=t.width>>1,t.anchorOffsetY=t.height>>1},t}();AssetManager.dbFactory=new dragonBones.EgretFactory,AssetManager.cacheDbs={},__reflect(AssetManager.prototype,"AssetManager");var DisplayUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createBitmap=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.createEuiImage=function(t){var e=new eui.Image,i=RES.getRes(t);return e.source=i,e},e.prototype.removeFromParent=function(t){null!=t.parent&&t.parent.removeChild(t)
},e.prototype.quickAddChild=function(t,e){return"true"===egret.getOption("egretnative")?void t.addChild(e):void(e.$parent!=t&&(t.$children.push(e),e.$parent=t))},e.prototype.quickRemoveChild=function(t){if("true"===egret.getOption("egretnative"))return void this.removeFromParent(t);var e=t.$parent;if(e){var i=e.$children.indexOf(t);e.$children.splice(i,1),t.$parent=null,t instanceof DBArmature&&t.$removeFromClock()}},e}(BaseClass);__reflect(DisplayUtils.prototype,"DisplayUtils");var GameReady=function(t){function e(e,i,s){void 0===i&&(i="ready_png"),void 0===s&&(s="go_png");var n=t.call(this)||this;return n._callback=e,n.imgReady=AssetManager.getBitmap(i),n.imgGo=AssetManager.getBitmap(s),n.addChild(n.imgReady),n.addChild(n.imgGo),n}return __extends(e,t),e.prototype.hide=function(){this.imgReady.alpha=0,this.imgGo.alpha=0},e.prototype.play=function(){var t=this;this.hide(),App.SoundManager.playEffect(App.readyGo_ogg),this.imgReady.alpha=1,this.stepReady=setTimeout(function(){t.hide(),t.imgGo.alpha=1,t.stepGo=setTimeout(function(){t.hide(),t._callback(),clearTimeout(t.stepGo),t.stepGo=void 0},1e3),clearTimeout(t.stepReady),t.stepReady=void 0},1e3)},e.prototype.dispose=function(){this.stepReady&&(clearTimeout(this.stepReady),this.stepReady=void 0),this.stepGo&&(clearTimeout(this.stepGo),this.stepGo=void 0),this._callback=void 0,this.imgGo=void 0,this.imgReady=void 0},e}(egret.DisplayObjectContainer);__reflect(GameReady.prototype,"GameReady");var MD5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var s=Array(16),n=Array(16),r=0;16>r;r++)s[r]=909522486^i[r],n[r]=1549556828^i[r];var o=this.binl_md5(s.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(o),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,s=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<t.length;r++)i=t.charCodeAt(r),n+=s.charAt(i>>>4&15)+s.charAt(15&i);return n},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",n=t.length,r=0;n>r;r+=3)for(var o=t.charCodeAt(r)<<16|(n>r+1?t.charCodeAt(r+1)<<8:0)|(n>r+2?t.charCodeAt(r+2):0),a=0;4>a;a++)s+=8*r+6*a>8*t.length?this.b64pad:i.charAt(o>>>6*(3-a)&63);return s},t.prototype.rstr2any=function(t,e){var i,s,n,r,o,a=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l);for(s=0;l>s;s++){for(o=Array(),r=0,i=0;i<h.length;i++)r=(r<<16)+h[i],n=Math.floor(r/a),r-=n*a,(o.length>0||n>0)&&(o[o.length]=n);c[s]=r,h=o}var p="";for(i=c.length-1;i>=0;i--)p+=e.charAt(c[i]);return p},t.prototype.str2rstr_utf8=function(t){for(var e,i,s="",n=-1;++n<t.length;)e=t.charCodeAt(n),i=n+1<t.length?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),n++),127>=e?s+=String.fromCharCode(e):2047>=e?s+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?s+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(s+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return s},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,s=-271733879,n=-1732584194,r=271733878,o=0;o<t.length;o+=16){var a=i,h=s,l=n,c=r;i=this.md5_ff(i,s,n,r,t[o+0],7,-680876936),r=this.md5_ff(r,i,s,n,t[o+1],12,-389564586),n=this.md5_ff(n,r,i,s,t[o+2],17,606105819),s=this.md5_ff(s,n,r,i,t[o+3],22,-1044525330),i=this.md5_ff(i,s,n,r,t[o+4],7,-176418897),r=this.md5_ff(r,i,s,n,t[o+5],12,1200080426),n=this.md5_ff(n,r,i,s,t[o+6],17,-1473231341),s=this.md5_ff(s,n,r,i,t[o+7],22,-45705983),i=this.md5_ff(i,s,n,r,t[o+8],7,1770035416),r=this.md5_ff(r,i,s,n,t[o+9],12,-1958414417),n=this.md5_ff(n,r,i,s,t[o+10],17,-42063),s=this.md5_ff(s,n,r,i,t[o+11],22,-1990404162),i=this.md5_ff(i,s,n,r,t[o+12],7,1804603682),r=this.md5_ff(r,i,s,n,t[o+13],12,-40341101),n=this.md5_ff(n,r,i,s,t[o+14],17,-1502002290),s=this.md5_ff(s,n,r,i,t[o+15],22,1236535329),i=this.md5_gg(i,s,n,r,t[o+1],5,-165796510),r=this.md5_gg(r,i,s,n,t[o+6],9,-1069501632),n=this.md5_gg(n,r,i,s,t[o+11],14,643717713),s=this.md5_gg(s,n,r,i,t[o+0],20,-373897302),i=this.md5_gg(i,s,n,r,t[o+5],5,-701558691),r=this.md5_gg(r,i,s,n,t[o+10],9,38016083),n=this.md5_gg(n,r,i,s,t[o+15],14,-660478335),s=this.md5_gg(s,n,r,i,t[o+4],20,-405537848),i=this.md5_gg(i,s,n,r,t[o+9],5,568446438),r=this.md5_gg(r,i,s,n,t[o+14],9,-1019803690),n=this.md5_gg(n,r,i,s,t[o+3],14,-187363961),s=this.md5_gg(s,n,r,i,t[o+8],20,1163531501),i=this.md5_gg(i,s,n,r,t[o+13],5,-1444681467),r=this.md5_gg(r,i,s,n,t[o+2],9,-51403784),n=this.md5_gg(n,r,i,s,t[o+7],14,1735328473),s=this.md5_gg(s,n,r,i,t[o+12],20,-1926607734),i=this.md5_hh(i,s,n,r,t[o+5],4,-378558),r=this.md5_hh(r,i,s,n,t[o+8],11,-2022574463),n=this.md5_hh(n,r,i,s,t[o+11],16,1839030562),s=this.md5_hh(s,n,r,i,t[o+14],23,-35309556),i=this.md5_hh(i,s,n,r,t[o+1],4,-1530992060),r=this.md5_hh(r,i,s,n,t[o+4],11,1272893353),n=this.md5_hh(n,r,i,s,t[o+7],16,-155497632),s=this.md5_hh(s,n,r,i,t[o+10],23,-1094730640),i=this.md5_hh(i,s,n,r,t[o+13],4,681279174),r=this.md5_hh(r,i,s,n,t[o+0],11,-358537222),n=this.md5_hh(n,r,i,s,t[o+3],16,-722521979),s=this.md5_hh(s,n,r,i,t[o+6],23,76029189),i=this.md5_hh(i,s,n,r,t[o+9],4,-640364487),r=this.md5_hh(r,i,s,n,t[o+12],11,-421815835),n=this.md5_hh(n,r,i,s,t[o+15],16,530742520),s=this.md5_hh(s,n,r,i,t[o+2],23,-995338651),i=this.md5_ii(i,s,n,r,t[o+0],6,-198630844),r=this.md5_ii(r,i,s,n,t[o+7],10,1126891415),n=this.md5_ii(n,r,i,s,t[o+14],15,-1416354905),s=this.md5_ii(s,n,r,i,t[o+5],21,-57434055),i=this.md5_ii(i,s,n,r,t[o+12],6,1700485571),r=this.md5_ii(r,i,s,n,t[o+3],10,-1894986606),n=this.md5_ii(n,r,i,s,t[o+10],15,-1051523),s=this.md5_ii(s,n,r,i,t[o+1],21,-2054922799),i=this.md5_ii(i,s,n,r,t[o+8],6,1873313359),r=this.md5_ii(r,i,s,n,t[o+15],10,-30611744),n=this.md5_ii(n,r,i,s,t[o+6],15,-1560198380),s=this.md5_ii(s,n,r,i,t[o+13],21,1309151649),i=this.md5_ii(i,s,n,r,t[o+4],6,-145523070),r=this.md5_ii(r,i,s,n,t[o+11],10,-1120210379),n=this.md5_ii(n,r,i,s,t[o+2],15,718787259),s=this.md5_ii(s,n,r,i,t[o+9],21,-343485551),i=this.safe_add(i,a),s=this.safe_add(s,h),n=this.safe_add(n,l),r=this.safe_add(r,c)}return[i,s,n,r]},t.prototype.md5_cmn=function(t,e,i,s,n,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(s,r)),n),i)},t.prototype.md5_ff=function(t,e,i,s,n,r,o){return this.md5_cmn(e&i|~e&s,t,e,n,r,o)},t.prototype.md5_gg=function(t,e,i,s,n,r,o){return this.md5_cmn(e&s|i&~s,t,e,n,r,o)},t.prototype.md5_hh=function(t,e,i,s,n,r,o){return this.md5_cmn(e^i^s,t,e,n,r,o)},t.prototype.md5_ii=function(t,e,i,s,n,r,o){return this.md5_cmn(i^(e|~s),t,e,n,r,o)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),s=(t>>16)+(e>>16)+(i>>16);return s<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(MD5.prototype,"MD5");var ObjectPool=function(){function t(){this._objs=new Array}return t.prototype.pushObj=function(t){this._objs.push(t)},t.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},t.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},t.pop=function(e,i){for(var s=[],n=2;n<arguments.length;n++)s[n-2]=arguments[n];t._content[i]||(t._content[i]=[]);var r=t._content[i];if(r.length)return r.pop();var o,a=s.length;return 0==a?o=new e:1==a?o=new e(s[0]):2==a?o=new e(s[0],s[1]):3==a?o=new e(s[0],s[1],s[2]):4==a?o=new e(s[0],s[1],s[2],s[3]):5==a&&(o=new e(s[0],s[1],s[2],s[3],s[4])),o.ObjectPoolKey=i,o},t.popWithExtraKey=function(e,i){t._content[e]||(t._content[e]=[]);var s,n=t._content[e];if(n.length)for(var r=0;r<n.length;r++)if(n[r].extraKey==i){s=n[r],n.splice(r,1);break}if(!s){var o=e;s=new o(i),s.extraKey=i,s.ObjectPoolKey=e}return s},t.push=function(e){if(null==e)return!1;var i=e.ObjectPoolKey;return t._content[i]?(t._content[i].push(e),!0):!1},t.clear=function(){t._content={}},t.clearClass=function(e,i){void 0===i&&(i=null);for(var s=t._content[e];s&&s.length;){var n=s.pop();i&&n[i](),n=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,i){var s=t._content[e];if(null!=s){var n=0,r=s.length;for(n;r>n;n++)s[n][i]()}},t}();ObjectPool._content={},__reflect(ObjectPool.prototype,"ObjectPool");var ProxyHttp=function(){function t(){}return t.wxImgToBase64=function(t,e){},t}();__reflect(ProxyHttp.prototype,"ProxyHttp");var ResourceUtils=function(t){function e(){var e=t.call(this)||this;return e._groupIndex=0,e._configs=new Array,e._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResourceLoadProgress,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResourceLoadError,e),e}return __extends(e,t),e.prototype.addConfig=function(t,e){this._configs.push([t,e])},e.prototype.loadConfig=function(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()},e.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])},e.prototype.onConfigCompleteHandle=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},e.prototype.loadGroup=function(t,e,i,s,n){void 0===n&&(n=null),this._groups[t]=[e,i,s,n],RES.loadGroup(t)},e.prototype.loadGroups=function(t,e,i,s,n,r){void 0===r&&(r=null),RES.createGroup(t,e,!0),this.loadGroup(t,i,s,n,r)},e.prototype.pilfererLoadGroup=function(t,e){void 0===e&&(e=null);var i="pilferer_"+t;e||(e=[t]),RES.createGroup(i,e,!0),RES.loadGroup(i,-1)},e.prototype.onResourceLoadComplete=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][0],s=this._groups[e][2];null!=i&&i.apply(s,[e]),this._groups[e]=null,delete this._groups[e]}},e.prototype.onResourceLoadProgress=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][1],s=this._groups[e][2];null!=i&&i.call(s,t.itemsLoaded,t.itemsTotal)}},e.prototype.onResourceLoadError=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][2],s=this._groups[e][3];null!=s&&s.apply(i,[e])}},e.prototype.createGroup=function(t,e){RES.createGroup(t,e,!0)},e}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var TimerManager=function(t){function e(){var e=t.call(this)||this;return e._handlers=new Array,e._delHandlers=new Array,e._currTime=egret.getTimer(),e._currFrame=0,e._count=0,e._timeScale=1,egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var t=0;t<this._count;t++){var e=this._handlers[t],i=e.userFrame?this._currFrame:this._currTime;i>=e.exeTime&&(e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?e.repeatCount--:(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this._delHandlers.push(e))))}for(;this._delHandlers.length;){var e=this._delHandlers.pop();this.remove(e.method,e.methodObj)}return!1},e.prototype.create=function(t,e,i,s,n,r,o){if(!(0>e||0>i||null==s)){this.remove(s,n);var a=ObjectPool.pop(TimerHandler,"TimerHandler");a.userFrame=t,a.repeat=0==i,a.repeatCount=i,a.delay=e,a.method=s,a.methodObj=n,a.complateMethod=r,a.complateMethodObj=o,a.exeTime=e+(t?this._currFrame:this._currTime),a.dealTime=this._currTime,this._handlers.push(a),this._count++}},e.prototype.doTimer=function(t,e,i,s,n,r){void 0===n&&(n=null),void 0===r&&(r=null),this.create(!1,t,e,i,s,n,r)},e.prototype.doFrame=function(t,e,i,s,n,r){void 0===n&&(n=null),void 0===r&&(r=null),this.create(!0,t,e,i,s,n,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.remove=function(t,e){for(var i=0;i<this._count;i++){var s=this._handlers[i];if(s.method==t&&s.methodObj==e){this._handlers.splice(i,1),ObjectPool.push(s),this._count--;break}}},e.prototype.removeAll=function(t){for(var e=0;e<this._count;e++){var i=this._handlers[e];i.methodObj==t&&(this._handlers.splice(e,1),ObjectPool.push(i),this._count--,e--)}},e.prototype.isExists=function(t,e){for(var i=0;i<this._count;i++){var s=this._handlers[i];if(s.method==t&&s.methodObj==e)return!0}return!1},e}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var Toast=function(t){function e(i,s,n){var r=t.call(this)||this;console.log("Toast:",i);var o=new egret.Bitmap(e._txtrToastBg);r.x=.5*s,r.y=.85*n,r.addChild(o),o.anchorOffsetX=o.width/2;var a=new egret.TextField;return a.multiline=!0,a.size=30,a.bold=!0,a.textColor=16777215,a.stroke=6,a.strokeColor=0,a.text=i,a.fontFamily="微软雅黑",a.textAlign=egret.HorizontalAlign.CENTER,a.width=1*s,a.x=o.x,a.y=o.y+a.size/10,a.anchorOffsetX=a.width/2,r.addChild(a),o.height=12+a.height,r.alpha=0,egret.Tween.get(r).to({alpha:1},800,egret.Ease.quintOut).wait(1600).to({alpha:0},1200,egret.Ease.quintIn).call(function(){r.parent&&r.parent.removeChild(r)}),r}return __extends(e,t),e.init=function(t,e){console.log("Toast.init",e),this._cont=t,this._txtrToastBg=e},e.initRes=function(t,e){console.log("Toast.init",e),this._cont=t;var i=new egret.ImageLoader;i.addEventListener(egret.Event.COMPLETE,function(t){var e=t.target,i=e.data,s=new egret.Texture;s.bitmapData=i,this._txtrToastBg=s},this),i.load(e)},e.show=function(t){if(this._cont){var i=new e(t,this._cont.stage.stageWidth,this._cont.stage.stageHeight);this._cont.addChild(i)}},e}(egret.DisplayObjectContainer);__reflect(Toast.prototype,"Toast");var WinUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="WinUISkin",console.log("dawdad"),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.tuichuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tuichuFunc,this),this.jixuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jixuFunc,this)},e.prototype.playAction=function(){var t=RES.getRes("win3"),e=RES.getRes("win2"),i=RES.getRes("win1"),s=new dragonBones.EgretFactory;s.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(t)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(i,e));var n=s.buildArmature("armatureName");this.addChild(n.display),n.display.x=275,n.display.y=290,dragonBones.WorldClock.clock.add(n),n.addEventListener(egret.Event.COMPLETE,function(){dragonBones.WorldClock.clock.remove(n)},this),n.animation.gotoAndPlay("zq_win_01a",-1,-1,1)},e.prototype.tuichuFunc=function(){this.parent&&this.parent.removeChild(this),TableUI.Instance().quitFunc()},e.prototype.jixuFunc=function(){this.parent&&this.parent.removeChild(this),TableUI.Instance().againFunc()},e}(eui.Component);__reflect(WinUI.prototype,"WinUI");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){this.addChild(TableUI.Instance())},e.prototype.mPR=function(){var t=1440/document.body.clientWidth,e=900/document.body.clientHeight;t>=e?(bep=0,_rate=t,bel=(document.body.clientHeight-900/t)/2):(bep=1,_rate=e,bel=(document.body.clientWidth-1440/e)/2),console.log(bel,"bel")},e}(eui.UILayer);__reflect(Main.prototype,"Main");var _rate,bel,bep,ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,s){function n(t){e.call(s,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);